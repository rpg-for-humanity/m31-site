{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/clairhur/m31-site/app/utils/tts.ts"],"sourcesContent":["// Multi-language TTS utilities for RPG4H\n// Supports English (en-US), Korean (ko-KR), and French (fr-FR)\n\nexport type SupportedLanguage = 'en-US' | 'ko-KR' | 'fr-FR';\n\n// Get the best voice for a given language\nexport const getVoiceForLang = (\n  voices: SpeechSynthesisVoice[], \n  lang: SupportedLanguage\n): SpeechSynthesisVoice | null => {\n  const prefix = lang.split('-')[0]; // en / ko / fr\n  \n  // Preferred voices by language (female voices preferred for NPC)\n  const preferredVoices: Record<SupportedLanguage, string[]> = {\n    'en-US': ['Samantha', 'Karen', 'Moira', 'Tessa', 'Fiona', 'Victoria', 'Zira', 'Hazel'],\n    'ko-KR': ['Yuna', 'Sora', 'Heami', 'Google í•œêµ­ì–´'],\n    'fr-FR': ['AmÃ©lie', 'Audrey', 'Aurelie', 'Thomas', 'Google franÃ§ais'],\n  };\n  \n  // Try preferred voices first\n  for (const name of preferredVoices[lang] || []) {\n    const voice = voices.find(v => v.name.includes(name));\n    if (voice) return voice;\n  }\n  \n  // Fall back to any voice matching the language prefix\n  const langVoice = voices.find(v => \n    v.lang.toLowerCase().startsWith(prefix) && \n    !v.name.toLowerCase().includes('male')\n  );\n  if (langVoice) return langVoice;\n  \n  // Any voice for this language\n  const anyLangVoice = voices.find(v => v.lang.toLowerCase().startsWith(prefix));\n  if (anyLangVoice) return anyLangVoice;\n  \n  // Ultimate fallback\n  return voices[0] || null;\n};\n\n// Speak text using TTS with the correct language\nexport const speakWithLanguage = (\n  text: string,\n  lang: SupportedLanguage,\n  voices: SpeechSynthesisVoice[],\n  options?: {\n    rate?: number;\n    pitch?: number;\n    volume?: number;\n    onStart?: () => void;\n    onEnd?: () => void;\n    onError?: (error: any) => void;\n  }\n): void => {\n  if (!('speechSynthesis' in window)) {\n    console.warn('Speech synthesis not supported');\n    options?.onError?.('Speech synthesis not supported');\n    return;\n  }\n  \n  window.speechSynthesis.cancel();\n  \n  const utterance = new SpeechSynthesisUtterance(text);\n  utterance.lang = lang;\n  \n  const voice = getVoiceForLang(voices, lang);\n  if (voice) utterance.voice = voice;\n  \n  utterance.rate = options?.rate ?? 1.0;\n  utterance.pitch = options?.pitch ?? 1.2;\n  utterance.volume = options?.volume ?? 1.0;\n  \n  if (options?.onStart) {\n    utterance.onstart = options.onStart;\n  }\n  \n  if (options?.onEnd) {\n    utterance.onend = options.onEnd;\n  }\n  \n  if (options?.onError) {\n    utterance.onerror = (event) => options.onError?.(event);\n  }\n  \n  window.speechSynthesis.speak(utterance);\n};\n\n// Speech recognition language mapping\nexport const getSpeechRecognitionLang = (lang: SupportedLanguage): string => {\n  return lang; // Direct mapping works for these languages\n};\n\n// Get localStorage language or default\nexport const getStoredLanguage = (): SupportedLanguage => {\n  if (typeof window === 'undefined') return 'en-US';\n  \n  const stored = localStorage.getItem('m31-language');\n  if (stored && ['en-US', 'ko-KR', 'fr-FR'].includes(stored)) {\n    return stored as SupportedLanguage;\n  }\n  return 'en-US';\n};\n\n// Language display info\nexport const languageInfo: Record<SupportedLanguage, { flag: string; label: string; shortCode: string }> = {\n  'en-US': { flag: 'ðŸ‡ºðŸ‡¸', label: 'English', shortCode: 'EN' },\n  'ko-KR': { flag: 'ðŸ‡°ðŸ‡·', label: 'í•œêµ­ì–´', shortCode: 'KR' },\n  'fr-FR': { flag: 'ðŸ‡«ðŸ‡·', label: 'FranÃ§ais', shortCode: 'FR' },\n};\n"],"names":[],"mappings":"AAAA,yCAAyC;AACzC,+DAA+D;;;;;;;;;;;;;AAKxD,MAAM,kBAAkB,CAC7B,QACA;IAEA,MAAM,SAAS,KAAK,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,eAAe;IAElD,iEAAiE;IACjE,MAAM,kBAAuD;QAC3D,SAAS;YAAC;YAAY;YAAS;YAAS;YAAS;YAAS;YAAY;YAAQ;SAAQ;QACtF,SAAS;YAAC;YAAQ;YAAQ;YAAS;SAAa;QAChD,SAAS;YAAC;YAAU;YAAU;YAAW;YAAU;SAAkB;IACvE;IAEA,6BAA6B;IAC7B,KAAK,MAAM,QAAQ,eAAe,CAAC,KAAK,IAAI,EAAE,CAAE;QAC9C,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;QAC/C,IAAI,OAAO,OAAO;IACpB;IAEA,sDAAsD;IACtD,MAAM,YAAY,OAAO,IAAI,CAAC,CAAA,IAC5B,EAAE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,WAChC,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;IAEjC,IAAI,WAAW,OAAO;IAEtB,8BAA8B;IAC9B,MAAM,eAAe,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;IACtE,IAAI,cAAc,OAAO;IAEzB,oBAAoB;IACpB,OAAO,MAAM,CAAC,EAAE,IAAI;AACtB;AAGO,MAAM,oBAAoB,CAC/B,MACA,MACA,QACA;IASA,IAAI,CAAC,CAAC,qBAAqB,MAAM,GAAG;QAClC,QAAQ,IAAI,CAAC;QACb,SAAS,UAAU;QACnB;IACF;IAEA,OAAO,eAAe,CAAC,MAAM;IAE7B,MAAM,YAAY,IAAI,yBAAyB;IAC/C,UAAU,IAAI,GAAG;IAEjB,MAAM,QAAQ,gBAAgB,QAAQ;IACtC,IAAI,OAAO,UAAU,KAAK,GAAG;IAE7B,UAAU,IAAI,GAAG,SAAS,QAAQ;IAClC,UAAU,KAAK,GAAG,SAAS,SAAS;IACpC,UAAU,MAAM,GAAG,SAAS,UAAU;IAEtC,IAAI,SAAS,SAAS;QACpB,UAAU,OAAO,GAAG,QAAQ,OAAO;IACrC;IAEA,IAAI,SAAS,OAAO;QAClB,UAAU,KAAK,GAAG,QAAQ,KAAK;IACjC;IAEA,IAAI,SAAS,SAAS;QACpB,UAAU,OAAO,GAAG,CAAC,QAAU,QAAQ,OAAO,GAAG;IACnD;IAEA,OAAO,eAAe,CAAC,KAAK,CAAC;AAC/B;AAGO,MAAM,2BAA2B,CAAC;IACvC,OAAO,MAAM,2CAA2C;AAC1D;AAGO,MAAM,oBAAoB;IAC/B,wCAAmC,OAAO;;;IAE1C,MAAM;AAKR;AAGO,MAAM,eAA8F;IACzG,SAAS;QAAE,MAAM;QAAQ,OAAO;QAAW,WAAW;IAAK;IAC3D,SAAS;QAAE,MAAM;QAAQ,OAAO;QAAO,WAAW;IAAK;IACvD,SAAS;QAAE,MAAM;QAAQ,OAAO;QAAY,WAAW;IAAK;AAC9D"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///Users/clairhur/m31-site/app/test/convoset/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { SupportedLanguage, getVoiceForLang, getStoredLanguage, languageInfo } from '../../utils/tts';\ntype Round = 1 | 2 | 3 | 4 | 5;\ntype GameState = 'intro' | 'walking' | 'playing' | 'investor';\ntype OrderItem = {\n  type: string;\n  size: string;\n  temp?: string;\n  milk?: string;\n  syrup?: string;\n};\n\ntype InvestorMessage = {\n  title: string;\n  subtitle?: string;\n};\n\ntype Coin = {\n  id: number;\n  x: number;           // horizontal position of the jet\n  y: number;           // max height this coin reaches\n  rotation: number;\n  scale: number;\n  delay: number;\n  jetIndex: number;    // which vertical jet column (0-29)\n  coinInJet: number;   // position within the jet (for staggered timing)\n};\n\nexport default function ConvosetTest() {\n  const [gameState, setGameState] = useState<GameState>('intro');\n  const [round, setRound] = useState<Round>(1);\n  const [coins, setCoins] = useState(50);\n  const [investorMessage, setInvestorMessage] = useState<InvestorMessage>({\n    title: \"Great job!\",\n  });\n  const [showDialogue, setShowDialogue] = useState(false);\n  const [isNpcSpeaking, setIsNpcSpeaking] = useState(false);\n  const [showTranscript, setShowTranscript] = useState(false);\n  const [voices, setVoices] = useState<SpeechSynthesisVoice[]>([]);\n  const [showCoinAnimation, setShowCoinAnimation] = useState(false);\n  const [animatedCoins, setAnimatedCoins] = useState<Coin[]>([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [selectedLanguage, setSelectedLanguage] = useState<SupportedLanguage>('en-US');\n  // Menu and Shop states\n  const [showMenu, setShowMenu] = useState(false);\n  const [showCafeShop, setShowCafeShop] = useState(false);\n  const [showCoinShop, setShowCoinShop] = useState(false);\n  const [showInventory, setShowInventory] = useState(false);\n  const [inventoryTab, setInventoryTab] = useState<'buildings' | 'kokorobots' | 'items'>('buildings');\n  const [selectedInventoryItem, setSelectedInventoryItem] = useState<string | null>(null);\n  const [purchasedCafes, setPurchasedCafes] = useState<string[]>([]);\n  \n  // Purchase confirmation popup states\n  const [showPurchaseConfirm, setShowPurchaseConfirm] = useState(false);\n  const [selectedCafe, setSelectedCafe] = useState<{id: string, name: string, price: number, image: string} | null>(null);\n  const [showJustPurchased, setShowJustPurchased] = useState(false);\n  const [justPurchasedCafe, setJustPurchasedCafe] = useState<{id: string, name: string, price: number, image: string} | null>(null);\n  const [showOwnedPopup, setShowOwnedPopup] = useState(false);\n  const [ownedCafeToView, setOwnedCafeToView] = useState<{id: string, name: string, image: string} | null>(null);\n  \n  // Friendly feedback modal state\n  const [showFeedbackModal, setShowFeedbackModal] = useState(false);\n  \n  // Reward summary state (shown after Round 5 completion)\n  const [showRewardSummary, setShowRewardSummary] = useState(false);\n  const [totalCoinsEarned, setTotalCoinsEarned] = useState(0);\n  \n  // Email capture modal state\n  const [showEmailModal, setShowEmailModal] = useState(false);\n  const [emailInput, setEmailInput] = useState('');\n  const [emailSubmitted, setEmailSubmitted] = useState(false);\n  const [emailError, setEmailError] = useState('');\n  \n  // Calculate coins earned per round\n  const getCoinsForRound = (r: number) => {\n    const coinRewards: Record<number, number> = { 1: 20, 2: 30, 3: 50, 4: 80, 5: 100 };\n    return coinRewards[r] ?? 0;\n  };\n\n  // Feedback form\n  const FEEDBACK_FORM_URL = \"https://forms.gle/H42F4Vz4uZXtqHaB8\";\n  \n  const openFeedbackForm = () => {\n    window.open(FEEDBACK_FORM_URL, \"_blank\", \"noopener,noreferrer\");\n  };\n  \n  // Handle email submission\n  const handleEmailSubmit = async () => {\n    if (!emailInput || !emailInput.includes('@')) {\n      setEmailError('Please enter a valid email');\n      return;\n    }\n    \n    try {\n      // For now, just save to localStorage (later: send to Supabase)\n      const waitlistData = {\n        email: emailInput,\n        coinsEarned: totalCoinsEarned,\n        timestamp: new Date().toISOString(),\n        source: 'coffee_outpost_demo'\n      };\n      \n      // Store locally\n      const existing = JSON.parse(localStorage.getItem('rpg4h-waitlist') || '[]');\n      existing.push(waitlistData);\n      localStorage.setItem('rpg4h-waitlist', JSON.stringify(existing));\n      \n      setEmailSubmitted(true);\n      setEmailError('');\n      \n      // Close modal after 2 seconds\n      setTimeout(() => {\n        setShowEmailModal(false);\n      }, 2000);\n    } catch (err) {\n      setEmailError('Something went wrong. Please try again.');\n    }\n  };\n\n  // Auto-load saved progress on mount\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        const savedData = localStorage.getItem('m31-coffee-save');\n        if (savedData) {\n          const data = JSON.parse(savedData);\n          if (data.coins !== undefined) setCoins(data.coins);\n          if (data.purchasedCafes) setPurchasedCafes(data.purchasedCafes);\n          console.log('ðŸŽ® Progress loaded:', data);\n        }\n      } catch (e) {\n        console.log('No saved progress found');\n      }\n      // Load language preference\n      setSelectedLanguage(getStoredLanguage());\n      setIsLoaded(true);\n    }\n  }, []);\n\n  // Auto-save when coins or purchases change\n  useEffect(() => {\n    if (isLoaded && typeof window !== 'undefined') {\n      const saveData = {\n        coins,\n        purchasedCafes,\n        lastSaved: new Date().toISOString()\n      };\n      localStorage.setItem('m31-coffee-save', JSON.stringify(saveData));\n      console.log('ðŸ’¾ Auto-saved:', saveData);\n    }\n  }, [coins, purchasedCafes, isLoaded]);\n  \n  // Cafe options - Updated prices for Level 3 economy\n  const cafeOptions = [\n    { id: 'coffeepost', name: 'Coffee Post', price: 800, image: '/coffeepost.png' },\n    { id: 'retrocafe', name: 'Retro CafÃ©', price: 1500, image: '/retrocafe.png' },\n    { id: 'flowercafe', name: 'Flower CafÃ©', price: 2500, image: '/flowercafe.png' },\n    { id: 'moderncafe', name: 'Modern CafÃ©', price: 4000, image: '/moderncafe.png' },\n    { id: 'rocococafe', name: 'Rococo CafÃ©', price: 6000, image: '/rocococafe.png' },\n  ];\n  \n  // Coin bundles\n  const coinBundles = [\n    { id: 'starter', coins: 500, price: '$0.99', label: 'Starter' },\n    { id: 'popular', coins: 1500, price: '$2.99', label: 'Popular', best: true },\n    { id: 'pro', coins: 5000, price: '$7.99', label: 'Pro Pack' },\n  ];\n  \n  // Menu items\n  const menuItems = [\n    { name: 'Americano', desc: 'Espresso + water' },\n    { name: 'Latte', desc: 'Espresso + steamed milk' },\n    { name: 'Cappuccino', desc: 'Espresso + foam' },\n    { name: 'Flat White', desc: 'Double shot + microfoam' },\n    { name: 'Macchiato', desc: 'Espresso + milk foam' },\n    { name: 'Mocha', desc: 'Espresso + chocolate + milk' },\n    { name: 'Espresso', desc: 'Pure coffee shot' },\n  ];\n  \n  // Animation states\n  const [kokoroX, setKokoroX] = useState(-200);\n  const [kokoroScale, setKokoroScale] = useState(1);\n  const [kokoroOpacity, setKokoroOpacity] = useState(1);\n  const [showFullBody, setShowFullBody] = useState(true);\n  const [isWalking, setIsWalking] = useState(false);\n  const [introReady, setIntroReady] = useState(false);\n  const [missionVisible, setMissionVisible] = useState(false);\n  \n  const [round1Selections, setRound1Selections] = useState<OrderItem[]>([]);\n  const [currentItem, setCurrentItem] = useState<Partial<OrderItem>>({});\n  \n  const [round2Input, setRound2Input] = useState('');\n  const [round2Chat, setRound2Chat] = useState<{role: 'npc' | 'player', text: string}[]>([]);\n  const [round2Order, setRound2Order] = useState<{type: boolean, size: boolean, milk: boolean, syrup: boolean, temp: boolean}>({\n    type: false, size: false, milk: false, syrup: false, temp: false\n  });\n  \n  const [round3Listening, setRound3Listening] = useState(false);\n  const [round3Transcript, setRound3Transcript] = useState('');\n  const [round3Attempts, setRound3Attempts] = useState(0);\n  const [round3Feedback, setRound3Feedback] = useState<string[]>([]);\n  const [musicStarted, setMusicStarted] = useState(false);\n  const [musicPlaying, setMusicPlaying] = useState(true);\n  const [audioRef, setAudioRef] = useState<HTMLAudioElement | null>(null);\n\n  // Round-specific orders and audio\n  const roundConfigs = {\n    1: {\n      audio: '/Audio/round1-order.mp3',\n      npcOrder: \"Hi, a medium caramel macchiato, with half & half please.\",\n      correctOrder: [{ type: 'Macchiato', size: 'Medium', milk: 'Half & Half', syrup: 'Caramel' }] as OrderItem[],\n      itemCount: 1\n    },\n    2: {\n      audio: '/Audio/round2-order.mp3', \n      npcOrder: \"Hi, I'd like a large flat white with nonfat milk, and hazelnut syrup please.\",\n      correctOrder: [{ type: 'Flat White', size: 'Large', milk: 'Nonfat', syrup: 'Hazelnut' }] as OrderItem[],\n      itemCount: 1\n    },\n    3: {\n      audio: '/Audio/order.mp3',\n      npcOrder: \"Can I get a large Americano, and two small lattes â€” one with oat milk and one with whole milk?\",\n      correctOrder: [\n        { type: 'Americano', size: 'Large' },\n        { type: 'Latte', size: 'Small', milk: 'Oat' },\n        { type: 'Latte', size: 'Small', milk: 'Whole' },\n      ] as OrderItem[],\n      itemCount: 3\n    }\n  };\n\n  const currentRoundConfig = round <= 3 ? roundConfigs[round as 1 | 2 | 3] : null;\n\n  // Intro - Kokorobot walks to center-left, then mission fades in\n  useEffect(() => {\n    if (gameState === 'intro') {\n      setKokoroX(-200);\n      setIsWalking(true);\n      setIntroReady(false);\n      setMissionVisible(false);\n      \n      const walkIn = setInterval(() => {\n        setKokoroX(prev => {\n          // Walk more toward center - responsive target\n          // Mobile: ~30% from left, Desktop: ~40% from left (closer to center)\n          const isMobile = window.innerWidth < 768;\n          const target = isMobile ? window.innerWidth * 0.30 : window.innerWidth * 0.40;\n          if (prev >= target) {\n            clearInterval(walkIn);\n            setIsWalking(false);\n            // Mission fades in after Kokorobot stops\n            setTimeout(() => {\n              setMissionVisible(true);\n              setTimeout(() => setIntroReady(true), 400);\n            }, 200);\n            return target;\n          }\n          return prev + 10;\n        });\n      }, 20);\n      \n      return () => clearInterval(walkIn);\n    }\n  }, [gameState]);\n\n  // Bellagio-style fountain - vertical jets spread from left to right, shoot up, then go to balance\n  const triggerCoinAnimation = (currentRound: number) => {\n    const newCoins: Coin[] = [];\n    \n    // Number of vertical jets increases with round\n    const jetCounts = { 1: 12, 2: 18, 3: 24, 4: 30, 5: 36 };\n    const coinsPerJet = { 1: 4, 2: 5, 3: 6, 4: 7, 5: 8 };\n    // Heights increase per round\n    const maxHeightMultipliers = { 1: 0.4, 2: 0.55, 3: 0.7, 4: 0.85, 5: 1.0 };\n    \n    const numJets = jetCounts[currentRound as keyof typeof jetCounts] || 20;\n    const coinsInJet = coinsPerJet[currentRound as keyof typeof coinsPerJet] || 5;\n    const heightMult = maxHeightMultipliers[currentRound as keyof typeof maxHeightMultipliers] || 1;\n    \n    // Create jets spread across the screen width (left to right)\n    const screenWidth = typeof window !== 'undefined' ? window.innerWidth : 1200;\n    const jetSpacing = screenWidth / (numJets + 1);\n    \n    let coinId = 0;\n    \n    for (let jet = 0; jet < numJets; jet++) {\n      // Center jets are taller, edge jets are shorter\n      const centerDistance = Math.abs(jet - numJets / 2) / (numJets / 2);\n      const jetHeightVariation = 1 - (centerDistance * 0.5);\n      \n      // Add some randomness\n      const randomHeightBoost = 0.8 + Math.random() * 0.4;\n      const jetMaxHeight = 300 + (200 * jetHeightVariation * randomHeightBoost * heightMult);\n      \n      // X position for this jet (spread across screen from left to right)\n      const jetX = (jet * jetSpacing) - (screenWidth / 2) + jetSpacing;\n      \n      // Create multiple coins in each jet\n      for (let c = 0; c < coinsInJet; c++) {\n        const coinHeight = jetMaxHeight * (0.5 + (c / coinsInJet) * 0.5);\n        newCoins.push({\n          id: coinId++,\n          x: jetX + (Math.random() * 10 - 5), // Slight wobble\n          y: -coinHeight, // negative = up\n          rotation: Math.random() * 360,\n          scale: 0.25 + Math.random() * 0.2,\n          delay: (c * 0.08) + (Math.random() * 0.1),\n          jetIndex: jet,\n          coinInJet: c\n        });\n      }\n    }\n    \n    setAnimatedCoins(newCoins);\n    setShowCoinAnimation(true);\n    setTimeout(() => setShowCoinAnimation(false), 3500);\n  };\n\n  useEffect(() => {\n    const loadVoices = () => {\n      const availableVoices = window.speechSynthesis.getVoices();\n      setVoices(availableVoices);\n    };\n    \n    loadVoices();\n    window.speechSynthesis.onvoiceschanged = loadVoices;\n  }, []);\n\n  // REMOVED: useEffect that was causing music overlap\n  // Music is now ONLY started in specific places, not on every round change\n\n  const getVoice = () => {\n  // Use multi-language voice selection\n  const voice = getVoiceForLang(voices, selectedLanguage);\n  if (voice) return voice;\n  \n  // Fallback to original English logic if utility fails\n  const preferred = ['Samantha', 'Karen', 'Moira', 'Tessa', 'Fiona', 'Victoria', 'Zira', 'Hazel'];\n  \n  for (const name of preferred) {\n    const v = voices.find(v => v.name.includes(name));\n    if (v) return v;\n  }\n  \n  const englishVoice = voices.find(v => \n    v.lang.startsWith('en') && \n    !v.name.toLowerCase().includes('male')\n  );\n  \n  return englishVoice || voices.find(v => v.lang.startsWith('en')) || voices[0];\n};\n\n  const speak = (text: string, audioFile?: string) => {\n    // If audio file provided, play it instead of TTS\n    if (audioFile) {\n      const audio = new Audio(audioFile);\n      audio.volume = 0.8;\n      setIsNpcSpeaking(true);\n      audio.onended = () => setIsNpcSpeaking(false);\n      audio.onerror = (e) => {\n        console.error('Audio failed to load:', audioFile, e);\n        setIsNpcSpeaking(false);\n        // Fallback to TTS if audio fails\n        if ('speechSynthesis' in window) {\n          const utterance = new SpeechSynthesisUtterance(text);\n          const voice = getVoice();\n          if (voice) utterance.voice = voice;\n          utterance.rate = 1.0;\n          utterance.pitch = 1.2;\n          setIsNpcSpeaking(true);\n          utterance.onend = () => setIsNpcSpeaking(false);\n          window.speechSynthesis.speak(utterance);\n        }\n      };\n      audio.play().catch((err) => {\n        console.error('Audio play failed:', err);\n        setIsNpcSpeaking(false);\n      });\n      return;\n    }\n    \n    // Fallback to TTS\n    if ('speechSynthesis' in window) {\n      window.speechSynthesis.cancel();\n      const utterance = new SpeechSynthesisUtterance(text);\n      \n      const voice = getVoice();\n      if (voice) utterance.voice = voice;\n      \n      utterance.rate = 1.0;\n      utterance.pitch = 1.2;\n      utterance.volume = 1.0;\n      \n      setIsNpcSpeaking(true);\n      utterance.onend = () => setIsNpcSpeaking(false);\n      window.speechSynthesis.speak(utterance);\n    }\n  };\n\n  const playRoundOrder = (forceRound?: number) => {\n    // Only for rounds 1-3 (listen & select)\n    const targetRound = forceRound || round;\n    const config = roundConfigs[targetRound as 1 | 2 | 3];\n    if (!config) return;\n    \n    console.log(`Playing round ${targetRound} order audio: ${config.audio}`);\n    \n    // Pause background music while voice plays\n    if (audioRef) {\n      audioRef.pause();\n    }\n    \n    const audio = new Audio();\n    audio.preload = 'auto';\n    audio.src = config.audio;\n    audio.volume = 0.8;\n    setIsNpcSpeaking(true);\n    \n    audio.oncanplay = () => {\n      console.log('Audio can play');\n      audio.play().then(() => {\n        console.log('Audio playing successfully');\n      }).catch(err => {\n        console.error('Play failed:', err);\n        speakTTS(config.npcOrder);\n      });\n    };\n    \n    audio.onended = () => {\n      console.log('Audio ended');\n      setIsNpcSpeaking(false);\n      // DON'T start music here - it's already started in completeGame\n      // Just resume if it was paused\n      if (audioRef && musicPlaying) {\n        audioRef.play().catch(() => {});\n      }\n    };\n    \n    audio.onerror = (e) => {\n      console.error('Audio load error - trying fetch:', e);\n      fetch(config.audio)\n        .then(res => {\n          console.log('Fetch status:', res.status, res.statusText);\n          if (!res.ok) {\n            speakTTS(config.npcOrder);\n          }\n        })\n        .catch(fetchErr => {\n          console.error('Fetch also failed:', fetchErr);\n          speakTTS(config.npcOrder);\n        });\n    };\n  };\n\n  const getMusicForRound = (r: number) => {\n    // music-round1.mp3 for Round 1-2, music-round2.mp3 for round 3, music-round3.mp3 for round 4,5\n    if (r <= 2) return '/Audio/music-round1.mp3';\n    if (r === 3) return '/Audio/music-round2.mp3';\n    return '/Audio/music-round3.mp3'; // rounds 4 and 5\n  };\n\n  // Use a module-level variable to ensure only ONE audio instance exists\n  const startBackgroundMusic = (forceRound?: number | boolean) => {\n    // DON'T start music if user has turned it off\n    if (!musicPlaying && musicStarted) {\n      console.log('ðŸŽµ Music is muted, not starting');\n      return;\n    }\n    \n    // CRITICAL: First, stop and destroy ANY existing audio\n    if (audioRef) {\n      audioRef.pause();\n      audioRef.currentTime = 0;\n      audioRef.src = '';\n    }\n    \n    // Also find and kill any orphaned audio elements playing music\n    if (typeof document !== 'undefined') {\n      document.querySelectorAll('audio').forEach((el) => {\n        const audioEl = el as HTMLAudioElement;\n        if (audioEl.src && audioEl.src.includes('music-round')) {\n          audioEl.pause();\n          audioEl.currentTime = 0;\n          audioEl.src = '';\n        }\n      });\n    }\n    \n    const targetRound = typeof forceRound === 'number' ? forceRound : round;\n    const musicFile = getMusicForRound(targetRound);\n    \n    console.log(`ðŸŽµ Starting music for round ${targetRound}: ${musicFile}`);\n    \n    // Stop existing before creating new\n    stopBackgroundMusic();\n    \n    const audio = new Audio(musicFile);\n    audio.loop = true;\n    audio.volume = 0.05;\n    audio.play().catch(() => {});\n    setAudioRef(audio);\n    setMusicStarted(true);\n    setMusicPlaying(true);\n  };\n  \n  // Stop all music completely\n  const stopBackgroundMusic = () => {\n    console.log('ðŸ”‡ Stopping all music');\n    if (audioRef) {\n      audioRef.pause();\n      audioRef.currentTime = 0;\n      try { audioRef.src = ''; } catch(e) {}\n    }\n    // Kill ALL audio elements playing music (aggressive cleanup)\n    if (typeof document !== 'undefined') {\n      document.querySelectorAll('audio').forEach((el) => {\n        const audioEl = el as HTMLAudioElement;\n        if (audioEl.src && (audioEl.src.includes('music-round') || audioEl.src.includes('Audio'))) {\n          audioEl.pause();\n          audioEl.currentTime = 0;\n          try { audioEl.src = ''; } catch(e) {}\n        }\n      });\n    }\n    // Don't set musicPlaying to false here - that's only for user muting\n  };\n  \n  // Pause music temporarily (for sound effects) - will auto-resume\n  const pauseBackgroundMusic = () => {\n    console.log('â¸ï¸ Pausing music temporarily');\n    if (audioRef) {\n      audioRef.pause();\n    }\n  };\n  \n  // Resume music after sound effect\n  const resumeBackgroundMusic = () => {\n    console.log('â–¶ï¸ Resuming music');\n    if (audioRef && musicPlaying) {\n      audioRef.play().catch(() => {});\n    }\n  };\n\n  const speakTTS = (text: string) => {\n    if ('speechSynthesis' in window) {\n      window.speechSynthesis.cancel();\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.lang = selectedLanguage;\n      const voice = getVoice();\n      if (voice) utterance.voice = voice;\n      utterance.rate = 1.0;\n      utterance.pitch = 1.2;\n      utterance.volume = 1.0;\n      setIsNpcSpeaking(true);\n      utterance.onend = () => {\n        setIsNpcSpeaking(false);\n        // Just resume existing music, don't start new\n        if (audioRef && musicPlaying) {\n          audioRef.play().catch(() => {});\n        }\n      };\n      window.speechSynthesis.speak(utterance);\n    }\n  };\n\n  const buyTranscript = () => {\n    if (coins >= 10) {\n      setCoins(prev => prev - 10);\n      setShowTranscript(true);\n    }\n  };\n\n  const toggleMusic = () => {\n    if (musicPlaying) {\n      // Stop ALL music\n      if (audioRef) {\n        audioRef.pause();\n      }\n      // Also stop any orphaned audio\n      if (typeof document !== 'undefined') {\n        document.querySelectorAll('audio').forEach((el) => {\n          const audioEl = el as HTMLAudioElement;\n          if (audioEl.src && audioEl.src.includes('music-round')) {\n            audioEl.pause();\n          }\n        });\n      }\n      setMusicPlaying(false);\n    } else {\n      // Try to resume existing audioRef first\n      if (audioRef && audioRef.src) {\n        audioRef.play().catch(() => {\n          // If resume fails, create new audio\n          const musicFile = getMusicForRound(round);\n          const audio = new Audio(musicFile);\n          audio.loop = true;\n          audio.volume = 0.05;\n          audio.play().catch(() => {});\n          setAudioRef(audio);\n        });\n      } else {\n        // No audioRef exists, create new one\n        const musicFile = getMusicForRound(round);\n        const audio = new Audio(musicFile);\n        audio.loop = true;\n        audio.volume = 0.05;\n        audio.play().catch(() => {});\n        setAudioRef(audio);\n      }\n      setMusicPlaying(true);\n    }\n  };\n\n  const startGame = () => {\n    setGameState('walking');\n    setShowTranscript(false);\n    setIsWalking(true);\n    \n    // Walk to center then transition\n    const walkToCenter = setInterval(() => {\n      setKokoroX(prev => {\n        const target = window.innerWidth / 2 - 80;\n        if (prev >= target) {\n          clearInterval(walkToCenter);\n          shrinkAndTransition();\n          return target;\n        }\n        return prev + 12;\n      });\n    }, 20);\n  };\n\n  const shrinkAndTransition = () => {\n    setIsWalking(false);\n    \n    let scale = 1;\n    let opacity = 1;\n    \n    const shrinkInterval = setInterval(() => {\n      scale -= 0.08;\n      opacity -= 0.08;\n      setKokoroScale(scale);\n      setKokoroOpacity(opacity);\n      \n      if (scale <= 0) {\n        clearInterval(shrinkInterval);\n        setShowFullBody(false);\n        setGameState('playing');\n        setShowDialogue(true);\n        playRoundOrder();\n        startBackgroundMusic(1); // Start music for Round 1\n      }\n    }, 25);\n  };\n\n  const replayVoice = () => {\n    playRoundOrder();\n  };\n\n  const addToOrder = () => {\n    if (!currentRoundConfig) return;\n    if (currentItem.type && currentItem.size && round1Selections.length < currentRoundConfig.itemCount) {\n      setRound1Selections([...round1Selections, currentItem as OrderItem]);\n      setCurrentItem({});\n    }\n  };\n\n  const removeFromOrder = (index: number) => {\n    setRound1Selections(round1Selections.filter((_, i) => i !== index));\n  };\n\n  const checkRound1 = () => {\n    if (!currentRoundConfig) return;\n    \n    const normalize = (items: OrderItem[]) => \n      items.map(i => `${i.size}-${i.type}-${i.milk || 'none'}-${i.syrup || 'none'}`).sort().join(',');\n    \n    const isCorrect = normalize(round1Selections) === normalize(currentRoundConfig.correctOrder);\n    \n    if (isCorrect) {\n      // Pause background music for celebration sound\n      pauseBackgroundMusic();\n      // Coin rewards: Round 1 = 20, Round 2 = 30, Round 3 = 50\n      const coinReward = round === 1 ? 20 : round === 2 ? 30 : 50;\n      // Track total coins earned\n      setTotalCoinsEarned(prev => prev + coinReward);\n      // Play celebration sound\n      playAudio('/Audio/goodresult.mp3', () => {\n        setCoins(prev => prev + coinReward);\n        triggerCoinAnimation(round);\n        const messages: Record<number, InvestorMessage> = {\n          1: { title: \"Well done!\" },\n          2: { title: \"Great job!\" },\n          3: { title: \"Excellent!\", subtitle: \"Can she take your orders too?\" },\n          4: { title: \"Impressive!\" },\n          5: { title: \"You're a natural!\" }\n        };\n\n        setInvestorMessage(messages[round] ?? { title: \"Great job!\" });\n        setGameState(\"investor\");\n      });\n\n    } else {\n      // Wrong answer - play error sound and show friendly feedback\n      playAudio('/Audio/kokorobot-wrong.mp3');\n      setShowFeedbackModal(true);\n      setRound1Selections([]);\n      setCurrentItem({});\n    }\n  };\n\n  const startRound2 = () => {\n    setRound(2);\n    setGameState('playing');\n    setShowDialogue(true);\n    setShowTranscript(true);\n    setRound2Order({ type: false, size: false, milk: false, syrup: false, temp: false });\n    setRound2OrderDetails({});\n    setRound2ConfirmStep(false);\n    const greeting = \"Hi there! What can I get started for you today?\";\n    setRound2Chat([{ role: 'npc', text: greeting }]);\n    playAudio('/Audio/kokorobot-greeting.mp3');\n  };\n\n  const playAudio = (audioFile: string, onEnd?: () => void) => {\n    // Pause background music while voice plays\n    if (audioRef) {\n      audioRef.pause();\n    }\n    \n    const audio = new Audio(audioFile);\n    audio.volume = 0.8;\n    setIsNpcSpeaking(true);\n    \n    // Don't resume music after victory/celebration sounds\n    const isVictorySound = audioFile.includes('goodresult') || audioFile.includes('kokorobot-success');\n    \n    audio.oncanplay = () => {\n      audio.play().catch(err => {\n        console.error('Play failed:', err);\n        setIsNpcSpeaking(false);\n      });\n    };\n    \n    audio.onended = () => {\n      setIsNpcSpeaking(false);\n      if (onEnd) onEnd();\n      // Resume background music (but not after victory sounds)\n      if (audioRef && musicPlaying && !isVictorySound) {\n        audioRef.play().catch(() => {});\n      }\n    };\n    \n    audio.onerror = () => {\n      console.error('Audio error:', audioFile);\n      setIsNpcSpeaking(false);\n    };\n  };\n\n  // Track actual order details for repeating back\n  const [round2OrderDetails, setRound2OrderDetails] = useState<{type?: string, size?: string, temp?: string, milk?: string, syrup?: string}>({});\n  const [round2ConfirmStep, setRound2ConfirmStep] = useState(false);\n\n  const processRound2Input = () => {\n    if (!round2Input.trim()) return;\n    \n    const input = round2Input.toLowerCase();\n    setRound2Chat(prev => [...prev, { role: 'player', text: round2Input }]);\n    setRound2Input('');\n    \n    // If in confirm step, check for confirmation\n    if (round2ConfirmStep) {\n      if (input.includes('yes') || input.includes('confirm') || input.includes('correct') || input.includes('that\\'s right') || input.includes('looks good') || input.includes('perfect') || input.includes('that\\'s it') || input.includes('thats it') || input.includes('thank you') || input.includes('thanks') || input.includes('good') || input.includes('yep') || input.includes('yup') || input.includes('sure') || input.includes('okay') || input.includes('ok')) {\n        const response = \"Thank you, it will be at the pick up counter.\";\n        setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n        // Pause background music for celebration\n        pauseBackgroundMusic();\n        // Track total coins earned\n        setTotalCoinsEarned(prev => prev + 80);\n        playAudio('/Audio/goodresult.mp3', () => {\n          setCoins(prev => prev + 80);\n          triggerCoinAnimation(round);\n          setInvestorMessage({ title: \"Impressive!\" });\n          setGameState('investor');\n        });\n        return;\n      } else if (input.includes('no') || input.includes('change') || input.includes('actually') || input.includes('wait') || input.includes('wrong')) {\n        setRound2ConfirmStep(false);\n        setRound2Order({ type: false, size: false, milk: false, syrup: false, temp: false });\n        setRound2OrderDetails({});\n        const response = \"No problem! What would you like instead?\";\n        setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n        playAudio('/Audio/kokorobot-greeting.mp3');\n        return;\n      }\n    }\n    \n    // Check for \"what do you have\" type questions FIRST - before any order processing\n    if (input.includes('what do you have') || input.includes('what options') || input.includes('what kinds') || input.includes('what milk') || input.includes('what type')) {\n      const response = \"We have whole, oat, almond, nonfat, and soy milk. Which would you like?\";\n      setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n      playAudio('/Audio/milk-lists.mp3');\n      return;\n    }\n    \n    // Check for unavailable items (like 2%, half and half) BEFORE other processing\n    if (input.includes('2%') || input.includes('two percent') || input.includes('two %') || input.includes('with 2') || input.includes('half and half') || input.includes('half & half') || input.includes('cream') || input.includes('coconut')) {\n      const response = \"We don't have that, but we do have whole, oat, almond, nonfat, and soy milk. Which would you like?\";\n      setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n      playAudio('/Audio/milk-lists.mp3');\n      return;\n    }\n    \n    const newOrder = { ...round2Order };\n    const newDetails = { ...round2OrderDetails };\n    \n    // Check if it's a question about availability\n    const isQuestion = input.includes('do you have') || input.includes('is there') || input.includes('can i get') || input.includes('?');\n    \n    // Check for unknown drink types (things that sound like orders but aren't on menu)\n    const unknownDrinks = ['black coffee', 'drip', 'filter', 'pour over', 'cold brew', 'frappuccino', 'frappe', 'chai', 'tea', 'matcha', 'hot chocolate'];\n    const hasUnknownDrink = unknownDrinks.some(drink => input.includes(drink));\n    \n    if (hasUnknownDrink && !round2Order.type) {\n      const response = \"I'm sorry, we don't have that, but here are your options!\";\n      setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n      playAudio('/Audio/notavailable.mp3');\n      setTimeout(() => setShowMenu(true), 1000);\n      return;\n    }\n    \n    // Detect drink type\n    if (input.includes('americano')) { newOrder.type = true; newDetails.type = 'Americano'; }\n    else if (input.includes('flat white')) { newOrder.type = true; newDetails.type = 'Flat White'; }\n    else if (input.includes('latte')) { newOrder.type = true; newDetails.type = 'Latte'; }\n    else if (input.includes('cappuccino')) { newOrder.type = true; newDetails.type = 'Cappuccino'; }\n    else if (input.includes('macchiato') || input.includes('machiato')) { newOrder.type = true; newDetails.type = 'Macchiato'; }\n    else if (input.includes('mocha')) { newOrder.type = true; newDetails.type = 'Mocha'; }\n    else if (input.includes('espresso')) { newOrder.type = true; newDetails.type = 'Espresso'; }\n    \n    // Detect size\n    if (input.includes('small')) { newOrder.size = true; newDetails.size = 'small'; }\n    else if (input.includes('medium')) { newOrder.size = true; newDetails.size = 'medium'; }\n    else if (input.includes('large')) { newOrder.size = true; newDetails.size = 'large'; }\n    \n    // Detect temperature\n    if (input.includes('iced') || input.includes('ice') || input.includes('cold')) { newOrder.temp = true; newDetails.temp = 'iced'; }\n    else if (input.includes('hot')) { newOrder.temp = true; newDetails.temp = 'hot'; }\n    \n    // Detect syrup/flavor\n    if (input.includes('caramel')) { newOrder.syrup = true; newDetails.syrup = 'caramel'; }\n    else if (input.includes('vanilla')) { newOrder.syrup = true; newDetails.syrup = 'vanilla'; }\n    else if (input.includes('hazelnut')) { newOrder.syrup = true; newDetails.syrup = 'hazelnut'; }\n    else if (input.includes('no syrup') || input.includes('no flavor') || input.includes('plain')) { newOrder.syrup = true; newDetails.syrup = 'none'; }\n    \n    // Americano and Espresso don't need milk\n    const noMilkDrinks = ['Americano', 'Espresso'];\n    if (noMilkDrinks.includes(newDetails.type || '')) {\n      newOrder.milk = true;\n      newDetails.milk = 'none';\n    }\n    \n    // Detect milk - including \"no\" responses\n    if (input.includes('no thank') || input.includes('no,') || input.includes('no milk') || input.includes('none') || input.includes('black') || input.includes('regular') || (input === 'no') || input.startsWith('no ') || input.includes(\"i'm good\") || input.includes(\"that's it\") || input.includes(\"that's all\")) {\n      newOrder.milk = true;\n      newDetails.milk = 'none';\n    } else if (input.includes('oat')) { newOrder.milk = true; newDetails.milk = 'oat milk'; }\n    else if (input.includes('almond')) { newOrder.milk = true; newDetails.milk = 'almond milk'; }\n    else if (input.includes('whole')) { newOrder.milk = true; newDetails.milk = 'whole milk'; }\n    else if (input.includes('skim')) { newOrder.milk = true; newDetails.milk = 'skim milk'; }\n    else if (input.includes('nonfat') || input.includes('non-fat') || input.includes('non fat')) { newOrder.milk = true; newDetails.milk = 'nonfat milk'; }\n    else if (input.includes('soy')) { newOrder.milk = true; newDetails.milk = 'soy milk'; }\n    \n    setRound2Order(newOrder);\n    setRound2OrderDetails(newDetails);\n    \n    setTimeout(() => {\n      let response = '';\n      let audioFile = '';\n      \n      // Handle questions about availability\n      if (isQuestion && !newOrder.type) {\n        if (input.includes('almond') || input.includes('oat') || input.includes('whole') || input.includes('nonfat') || input.includes('soy')) {\n          response = \"Yes, we do! Would you like to order something with that?\";\n          setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n          playAudio('/Audio/ask-type.mp3');\n          return;\n        }\n      }\n      \n      if (!newOrder.type) {\n        response = \"What kind of coffee would you like?\";\n        audioFile = '/Audio/ask-type.mp3';\n      } else if (!newOrder.size) {\n        response = \"Sure, what size? We have small, medium, and large.\";\n        audioFile = '/Audio/ask-size.mp3';\n      } else if (!newOrder.temp) {\n        response = \"Would you like that hot or over ice?\";\n        audioFile = '/Audio/coffee-temperature.mp3';\n      } else if (!newOrder.milk) {\n        response = \"Any milk preference? We have whole, oat, almond, nonfat, and soy.\";\n        audioFile = '/Audio/milk-preference.mp3';\n      } else {\n        // All required info collected! Show confirmation\n        const milkText = newDetails.milk === 'none' ? '' : ` with ${newDetails.milk}`;\n        const syrupText = newDetails.syrup && newDetails.syrup !== 'none' ? ` ${newDetails.syrup}` : '';\n        response = `Got it! One ${newDetails.size} ${newDetails.temp}${syrupText} ${newDetails.type}${milkText}. Anything else? Please confirm your order.`;\n        setRound2ConfirmStep(true);\n      }\n      \n      setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n      if (audioFile) playAudio(audioFile);\n    }, 500);\n  };\n\n  const startRound3 = () => {\n    setRound(3);\n    setGameState('playing');\n    setShowDialogue(true);\n    setRound3Order({ type: false, size: false, milk: false, temp: false, syrup: false });\n    setRound3OrderDetails({});\n    setRound3Score(500);\n    setRound3ConfirmStep(false);\n    setRound3CurrentQuestion('');\n    setRound3Transcript('');\n    setRound3Feedback([]);\n    playAudio('/Audio/kokorobot-ready.mp3');\n  };\n\n  const [round3Order, setRound3Order] = useState<{type: boolean, size: boolean, milk: boolean, temp: boolean, syrup: boolean}>({\n    type: false, size: false, milk: false, temp: false, syrup: false\n  });\n\n  const [round3OrderDetails, setRound3OrderDetails] = useState<{type?: string, size?: string, temp?: string, milk?: string, syrup?: string}>({});\n  const [round3Score, setRound3Score] = useState(500);\n  const [round3ConfirmStep, setRound3ConfirmStep] = useState(false);\n  const [round3CurrentQuestion, setRound3CurrentQuestion] = useState('');\n\n  const startListening = () => {\n    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {\n      alert('Speech recognition not supported. Try Chrome.');\n      return;\n    }\n    \n    // Pause music while speaking\n    if (audioRef) {\n      audioRef.pause();\n    }\n    \n    const SpeechRecognition = (window as any).webkitSpeechRecognition || (window as any).SpeechRecognition;\n    const recognition = new SpeechRecognition();\n    \n    recognition.continuous = true;\n    recognition.interimResults = false;\n    recognition.lang = selectedLanguage;\n    \n    setRound3Listening(true);\n    setRound3Transcript('');\n    setRound3Feedback([]);\n    setRound3CurrentQuestion('');\n    \n    let speechTimeout: NodeJS.Timeout;\n    \n    recognition.onresult = (event: any) => {\n      clearTimeout(speechTimeout);\n      const transcript = Array.from(event.results)\n        .map((result: any) => result[0].transcript)\n        .join(' ');\n      setRound3Transcript(transcript);\n      \n      speechTimeout = setTimeout(() => {\n        recognition.stop();\n        evaluateRound3(transcript);\n      }, 1500);\n    };\n    \n    recognition.onerror = () => {\n      setRound3Listening(false);\n      if (audioRef && musicPlaying) {\n        audioRef.play().catch(() => {});\n      }\n    };\n    recognition.onend = () => {\n      setRound3Listening(false);\n      if (audioRef && musicPlaying) {\n        audioRef.play().catch(() => {});\n      }\n    };\n    recognition.start();\n    \n    setTimeout(() => {\n      if (round3Listening) {\n        recognition.stop();\n      }\n    }, 8000);\n  };\n\n  const evaluateRound3 = (transcript: string) => {\n    const input = transcript.toLowerCase();\n    const newOrder = { ...round3Order };\n    const newDetails = { ...round3OrderDetails };\n    let score = round3Score;\n    \n    // Detect drink type\n    if (!newOrder.type) {\n      if (input.includes('americano')) { newOrder.type = true; newDetails.type = 'Americano'; }\n      else if (input.includes('flat white')) { newOrder.type = true; newDetails.type = 'Flat White'; }\n      else if (input.includes('latte')) { newOrder.type = true; newDetails.type = 'Latte'; }\n      else if (input.includes('cappuccino')) { newOrder.type = true; newDetails.type = 'Cappuccino'; }\n      else if (input.includes('macchiato') || input.includes('machiato')) { newOrder.type = true; newDetails.type = 'Macchiato'; }\n      else if (input.includes('mocha')) { newOrder.type = true; newDetails.type = 'Mocha'; }\n      else if (input.includes('espresso')) { newOrder.type = true; newDetails.type = 'Espresso'; }\n    }\n    \n    // Detect size\n    if (!newOrder.size) {\n      if (input.includes('small')) { newOrder.size = true; newDetails.size = 'small'; }\n      else if (input.includes('medium')) { newOrder.size = true; newDetails.size = 'medium'; }\n      else if (input.includes('large')) { newOrder.size = true; newDetails.size = 'large'; }\n    }\n    \n    // Detect temperature\n    if (!newOrder.temp) {\n      if (input.includes('iced') || input.includes('ice') || input.includes('cold')) { newOrder.temp = true; newDetails.temp = 'iced'; }\n      else if (input.includes('hot')) { newOrder.temp = true; newDetails.temp = 'hot'; }\n    }\n    \n    // Detect syrup/flavor\n    if (!newOrder.syrup) {\n      if (input.includes('caramel')) { newOrder.syrup = true; newDetails.syrup = 'caramel'; }\n      else if (input.includes('vanilla')) { newOrder.syrup = true; newDetails.syrup = 'vanilla'; }\n      else if (input.includes('hazelnut')) { newOrder.syrup = true; newDetails.syrup = 'hazelnut'; }\n      else if (input.includes('no syrup') || input.includes('no flavor') || input.includes('plain')) { newOrder.syrup = true; newDetails.syrup = 'none'; }\n      // Auto-pass syrup for drinks that don't typically have syrup mentioned\n      else if (newOrder.type && !input.includes('caramel') && !input.includes('vanilla') && !input.includes('hazelnut')) {\n        newOrder.syrup = true;\n        newDetails.syrup = 'none';\n      }\n    }\n    \n    // Americano and Espresso don't need milk\n    const noMilkDrinks = ['Americano', 'Espresso'];\n    if (noMilkDrinks.includes(newDetails.type || '')) {\n      newOrder.milk = true;\n      newDetails.milk = 'none';\n    }\n    \n    // Detect milk - for drinks that require milk, \"no\" alone doesn't work\n    const milkRequiredDrinks = ['Latte', 'Cappuccino', 'Macchiato', 'Mocha'];\n    if (!newOrder.milk) {\n      // Check for actual milk choices\n      if (input.includes('oat')) { newOrder.milk = true; newDetails.milk = 'oat milk'; }\n      else if (input.includes('almond')) { newOrder.milk = true; newDetails.milk = 'almond milk'; }\n      else if (input.includes('whole')) { newOrder.milk = true; newDetails.milk = 'whole milk'; }\n      else if (input.includes('skim')) { newOrder.milk = true; newDetails.milk = 'skim milk'; }\n      else if (input.includes('nonfat') || input.includes('non-fat') || input.includes('non fat')) { newOrder.milk = true; newDetails.milk = 'nonfat milk'; }\n      else if (input.includes('soy')) { newOrder.milk = true; newDetails.milk = 'soy milk'; }\n      else if (input.includes('regular') || input.includes('normal') || input.includes('default')) { newOrder.milk = true; newDetails.milk = 'whole milk'; }\n      // Only allow \"no milk\" for non-milk-required drinks\n      else if ((input.includes('no milk') || input.includes('black') || input.includes('no thank')) && !milkRequiredDrinks.includes(newDetails.type || '')) { \n        newOrder.milk = true; newDetails.milk = 'none'; \n      }\n    }\n    \n    setRound3Order(newOrder);\n    setRound3OrderDetails(newDetails);\n    setRound3Attempts(prev => prev + 1);\n    \n    // Check what's missing and ask follow-up\n    let question = '';\n    let audioFile = '';\n    \n    if (!newOrder.type) {\n      question = \"What kind of coffee would you like?\";\n      audioFile = '/Audio/ask-type.mp3';\n    } else if (!newOrder.size) {\n      question = \"What size?\";\n      audioFile = '/Audio/ask-size.mp3';\n    } else if (!newOrder.temp) {\n      question = \"Would you like that hot or over ice?\";\n      audioFile = '/Audio/coffee-temperature.mp3';\n    } else if (!newOrder.milk) {\n      question = `A ${newDetails.type} requires a milk choice. We have whole, oat, almond, nonfat, or soy.`;\n      audioFile = '/Audio/milk-preference.mp3';\n    }\n    \n    if (question) {\n      // Still missing info - ask follow-up\n      setRound3CurrentQuestion(question);\n      setRound3Feedback([question]);\n      playAudio(audioFile);\n    } else {\n      // All info collected! Show confirmation\n      setRound3ConfirmStep(true);\n      setRound3Feedback([]);\n      const milkText = newDetails.milk === 'none' ? '' : ` with ${newDetails.milk}`;\n      const syrupText = newDetails.syrup && newDetails.syrup !== 'none' ? ` ${newDetails.syrup}` : '';\n      setRound3CurrentQuestion(`Perfect! One ${newDetails.size} ${newDetails.temp}${syrupText} ${newDetails.type}${milkText}.`);\n    }\n  };\n\n  const acceptRound3Score = () => {\n    // Pause background music for celebration\n    pauseBackgroundMusic();\n    // Track total coins earned (Round 5 = 100 coins)\n    setTotalCoinsEarned(prev => prev + 100);\n    // Play celebration sound and go straight to investor\n    playAudio('/Audio/goodresult.mp3', () => {\n      setCoins(prev => prev + 100);\n      triggerCoinAnimation(round);\n      setInvestorMessage({ title: \"You're a natural!\" });\n      setGameState('investor');\n    });\n  };\n\n  const completeGame = () => {\n    if (round < 5) {\n      // Move to next round\n      const nextRound = (round + 1) as Round;\n      setRound(nextRound);\n      \n      // ALL rounds after round 1 go DIRECTLY to playing - NO intro/walking\n      if (nextRound === 2 || nextRound === 3) {\n        // Rounds 2-3: Listen & Select - go DIRECTLY to playing\n        setGameState('playing');\n        setShowDialogue(true);\n        setRound1Selections([]);\n        setCurrentItem({});\n        setShowTranscript(false);\n        setShowFullBody(false);\n        // Play the round audio after a short delay - pass the correct round number!\n        setTimeout(() => {\n          playRoundOrder(nextRound);\n          startBackgroundMusic(nextRound);\n        }, 500);\n      } else if (nextRound === 4) {\n        // Round 4: Typing - go directly to playing\n        setGameState('playing');\n        setShowDialogue(true);\n        setShowFullBody(false);\n        setRound2Chat([]);\n        setRound2Order({ type: false, size: false, milk: false, syrup: false, temp: false });\n        setRound2OrderDetails({});\n        setRound2ConfirmStep(false);\n        const greeting = \"Hi there! What can I get started for you today?\";\n        setRound2Chat([{ role: 'npc', text: greeting }]);\n        playAudio('/Audio/kokorobot-greeting.mp3');\n        startBackgroundMusic();\n      } else if (nextRound === 5) {\n        // Round 5: Speaking - go directly to playing\n        setGameState('playing');\n        setShowDialogue(true);\n        setShowFullBody(false);\n        setRound3Order({ type: false, size: false, milk: false, temp: false, syrup: false });\n        setRound3OrderDetails({});\n        setRound3Score(500);\n        setRound3ConfirmStep(false);\n        setRound3CurrentQuestion('');\n        setRound3Transcript('');\n        setRound3Feedback([]);\n        playAudio('/Audio/kokorobot-ready.mp3');\n        startBackgroundMusic();\n      }\n    } else {\n      // After Round 5, reset to Round 1 with intro\n      setRound(1);\n      setGameState('intro');\n      setRound1Selections([]);\n      setCurrentItem({});\n      setRound2Chat([]);\n      setRound2Order({ type: false, size: false, milk: false, syrup: false, temp: false });\n      setRound3Transcript('');\n      setRound3Feedback([]);\n      setShowTranscript(false);\n      setShowFullBody(true);\n      setKokoroScale(1);\n      setKokoroOpacity(1);\n      setKokoroX(-200);\n      setMissionVisible(false);\n    }\n  };\n\n  // Kokoro Star Coin - uses your custom kokoro-star.png\n  const KokoroCoin = ({ className = \"\", size = 24 }: { className?: string, size?: number }) => (\n    <img \n      src=\"/kokoro-star.png\" \n      alt=\"coin\" \n      width={size} \n      height={size}\n      className={`inline-block ${className}`}\n      style={{ \n        width: size, \n        height: size,\n        filter: 'drop-shadow(0 2px 4px rgba(255,215,0,0.5))'\n      }}\n    />\n  );\n\n  return (\n    <div className=\"min-h-screen bg-black text-white overflow-hidden relative\">\n      {/* M31 Background */}\n      <div \n        className=\"absolute inset-0 bg-cover bg-center\"\n        style={{ backgroundImage: `url('/m31.jpg')` }}\n      />\n      \n      {/* Darker overlay */}\n      <div className=\"absolute inset-0 bg-black/20\" />\n      \n      {/* Barren landscape at bottom */}\n      <div className=\"absolute bottom-0 left-0 right-0 h-1/3 bg-gradient-to-t from-amber-950/90 via-amber-900/40 to-transparent\" />\n      \n      {/* Ground */}\n      <div className=\"absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-amber-900 to-transparent\" />\n\n      {/* Bellagio-style Gold Coin Fountain Animation - from center */}\n      {showCoinAnimation && (\n        <div className=\"fixed inset-0 pointer-events-none z-50 overflow-hidden flex items-center justify-center\">\n          {animatedCoins.map((coin) => (\n            <div\n              key={coin.id}\n              className=\"absolute animate-fountain-jet\"\n              style={{\n                '--jx': `${coin.x}px`,\n                '--jy': `${coin.y}px`,\n                '--s': coin.scale,\n                animationDelay: `${coin.delay}s`\n              } as React.CSSProperties}\n            >\n              <div className=\"relative\">\n                <KokoroCoin size={36} className=\"drop-shadow-[0_0_15px_rgba(255,215,0,0.9)]\" />\n                <div className=\"absolute inset-0 w-9 h-9 bg-yellow-400/40 rounded-full blur-md -z-10\" />\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* HUD - Responsive for mobile */}\n      <div className=\"absolute top-6 md:top-4 left-2 md:left-4 right-2 md:right-4 flex justify-between items-center z-30\">\n        <div className=\"flex items-center gap-1 md:gap-3\">\n          <div className=\"bg-black/60 backdrop-blur-sm rounded-full px-2 md:px-4 py-1 md:py-1.5 border border-zinc-500/30 flex items-center\">\n            <span className=\"text-zinc-100 font-sans text-xs md:text-sm\">M31 Â· Lv.3 Â· {round}/5</span>\n          </div>\n          {musicStarted && (\n            <button \n              onClick={toggleMusic}\n              className=\"bg-black/60 backdrop-blur-sm rounded-full px-2 md:px-3 py-1 md:py-1.5 border border-zinc-500/30 hover:bg-black/80 transition flex items-center\"\n            >\n              <span className=\"text-zinc-100 text-xs md:text-sm\">{musicPlaying ? 'ðŸ”Š' : 'ðŸ”‡'}</span>\n            </button>\n          )}\n          {/* Language Pill */}\n          <div className=\"bg-black/60 backdrop-blur-sm rounded-full px-2 md:px-3 py-1 md:py-1.5 border border-zinc-500/30 flex items-center gap-1 md:gap-2\">\n            <span className=\"text-xs md:text-sm\">{languageInfo[selectedLanguage].flag}</span>\n            <span className=\"text-zinc-100 font-sans text-xs md:text-sm\">{languageInfo[selectedLanguage].shortCode}</span>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-1 md:gap-3\">\n          <div className=\"bg-black/60 backdrop-blur-sm rounded-full px-2 md:px-4 py-1 md:py-1.5 border border-zinc-500/30 flex items-center gap-1 md:gap-2\">\n            <KokoroCoin size={20} />\n            <span className=\"text-zinc-100 font-sans text-xs md:text-sm\">{coins}</span>\n          </div>\n          {/* Save button */}\n          <button \n            onClick={() => alert('âœ… Progress saved locally!')}\n            className=\"bg-black/60 backdrop-blur-sm rounded-full px-2 md:px-3 py-1 md:py-1.5 border border-zinc-500/30 hover:bg-black/80 transition flex items-center\"\n          >\n            <span className=\"text-zinc-100 text-xs md:text-sm\">âœ…</span>\n          </button>\n          {/* Exit button */}\n          <button \n            onClick={() => { if(confirm('Exit game? Your progress is saved.')) window.location.href = '/'; }}\n            className=\"bg-black/60 backdrop-blur-sm rounded-full px-2 md:px-3 py-1 md:py-1.5 border border-zinc-500/30 hover:bg-black/80 transition flex items-center\"\n          >\n            <span className=\"text-zinc-100 text-xs md:text-sm\">âœ•</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Full Body Kokorobot */}\n      {showFullBody && (gameState === 'intro' || gameState === 'walking') && (\n        <div\n          className={`absolute bottom-24 md:bottom-28 z-[60] pointer-events-none ${\n            isWalking ? '' : 'transition-opacity duration-300'\n          }`}\n          style={{\n            left: `${kokoroX}px`,\n            transform: 'translateX(-50%)',\n            opacity: kokoroOpacity,\n          }}\n        >\n          <div className=\"relative w-fit\">\n            <img\n              src={isWalking ? \"/kokorobot-sideview.png\" : \"/kokorobot-cb.png\"}\n              alt=\"Kokorobot\"\n              className={[\n                \"block w-auto drop-shadow-2xl\",\n                isWalking ? \"animate-walk\" : \"\",\n              ].join(\" \")}\n              style={{ height: 'clamp(160px, 26vh, 260px)' }}\n            />\n\n            {/* Name badge */}\n            <div className=\"absolute -bottom-3 left-1/2 -translate-x-1/2\">\n              <span className=\"text-xs text-amber-400 font-sans font-medium bg-black/70 px-2 py-1 rounded-full border border-amber-500/30 whitespace-nowrap\">\n                Kokoro\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* INTRO MISSION CARD */}\n      {gameState === 'intro' && missionVisible && (\n        <div className=\"absolute inset-0 z-30 flex items-center justify-center px-4 pt-20 pb-32 md:pt-0 md:pb-0\">\n          <div \n            className={`bg-black/70 backdrop-blur-md rounded-3xl p-5 md:p-8 max-w-sm md:max-w-md w-full border border-amber-500/30 text-center transition-opacity transition-transform duration-500 ${\n              missionVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'\n            }`}\n          >\n            <p className=\"text-purple-400 text-sm md:text-base font-medium mb-2\">Round {round} of 5</p>\n            <h1 className=\"text-amber-400 text-2xl md:text-3xl font-medium mb-4\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>\n              M31 Coffee Outpost\n            </h1>\n            <p className=\"text-amber-200 text-sm md:text-base mb-6 leading-relaxed\">\n              Learn to understand, and be understood.<br />\n              Earn rewards to build Andromeda's first cafÃ©!\n            </p>\n            <button\n              onClick={startGame}\n              disabled={!introReady}\n              className={`px-8 py-3 rounded-full text-lg font-semibold transition-all ${\n                introReady \n                  ? 'bg-amber-500 hover:bg-amber-400 text-black cursor-pointer' \n                  : 'bg-amber-500/50 text-black/50 cursor-wait'\n              }`}\n              style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n            >\n              Begin Mission\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* WALKING STATE */}\n      {gameState === 'walking' && (\n        <div className=\"absolute inset-0 flex items-center justify-center z-10\">\n          <p className=\"text-amber-400 text-2xl animate-pulse font-medium\">Starting mission...</p>\n        </div>\n      )}\n\n      {/* DIALOGUE BOX - Mobile-friendly layout */}\n      {gameState === 'playing' && showDialogue && (\n        <div className=\"absolute inset-0 flex flex-col items-center justify-start md:justify-center z-20 pt-20 md:pt-0 pb-2\">\n          <div className=\"w-full max-w-xl overflow-y-auto px-2 md:px-4\">\n            <div className=\"w-full max-w-xl mx-auto animate-fade-in\">\n            \n            {/* Listen & Select UI - Rounds 1-3 */}\n            {(round === 1 || round === 2 || round === 3) && currentRoundConfig && (\n              <div className=\"bg-black/85 backdrop-blur-lg rounded-2xl border border-amber-500/40 p-4 md:p-6 shadow-2xl\">\n                <div className=\"flex items-center gap-3 md:gap-4 mb-3 md:mb-4\">\n                  <img \n                    src=\"/kokorobot-closeup.png\" \n                    alt=\"Kokorobot\" \n                    className={`w-20 h-20 md:w-28 md:h-28 object-cover rounded-full border-3 border-amber-500/60 shadow-lg animate-pop-in ${isNpcSpeaking ? 'ring-4 ring-amber-400 ring-offset-2 ring-offset-black animate-pulse' : ''}`}\n                  />\n                  <div className=\"flex-1\">\n                    <p className=\"text-amber-400 text-lg md:text-xl mb-1 font-sans font-medium\">M31 Coffee Outpost</p>\n                    \n                    {showTranscript ? (\n                      <p className=\"text-base md:text-xl leading-relaxed text-white\">{currentRoundConfig.npcOrder}</p>\n                    ) : (\n                      <div className=\"bg-black/60 rounded-xl p-3 border border-amber-500/30\">\n                        <p className=\"text-amber-300 mb-1 text-sm md:text-base font-medium\">ðŸ“‹ Register Training</p>\n                        <p className=\"text-amber-100 text-xs md:text-sm mb-3\">You're on register. Enter Kokoro's exact order.</p>\n                        \n                        {/* Matching rounded buttons */}\n                        <div className=\"flex gap-2 justify-center\">\n                          <button \n                            onClick={replayVoice}\n                            className=\"px-4 py-2 rounded-xl transition font-medium flex flex-col items-center justify-center bg-transparent hover:bg-amber-900/50 text-amber-400 text-sm border border-amber-500/40 min-w-[100px]\"\n                          >\n                            <span>ðŸ”Š Replay</span>\n                            <span className=\"text-xs text-amber-400/60\">(Free)</span>\n                          </button>\n                          <button \n                            onClick={buyTranscript}\n                            disabled={coins < 10}\n                            className={`px-4 py-2 rounded-xl transition font-medium flex flex-col items-center justify-center text-sm border min-w-[100px] ${\n                              coins >= 10 \n                                ? 'bg-transparent hover:bg-amber-900/50 text-amber-400 border-amber-500/40' \n                                : 'bg-transparent text-slate-500 border-slate-600 cursor-not-allowed'\n                            }`}\n                          >\n                            <span>ðŸ’¡ Show Text</span>\n                            <span className=\"flex items-center gap-1 text-xs\">\n                              <KokoroCoin size={12} />\n                              <span>10</span>\n                            </span>\n                          </button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Instruction hint */}\n                <p className=\"text-amber-400/60 text-xs text-center mb-3\">Tap Type â†’ Size â†’ Milk â†’ Syrup â†’ Add Item â†’ Submit.</p>\n                \n                {/* Order Builder - Mobile Responsive */}\n                <div className=\"border-t border-amber-500/30 pt-4\">\n                  {/* Current Order Summary */}\n                  <div className=\"flex flex-wrap gap-2 mb-4 min-h-[40px]\">\n                    {round1Selections.length > 0 ? (\n                      round1Selections.map((item, i) => (\n                        <button\n                          key={i}\n                          onClick={() => removeFromOrder(i)}\n                          className=\"bg-amber-500/30 border border-amber-500/60 rounded-lg px-3 py-1.5 text-sm hover:bg-red-500/30 hover:border-red-500/60 transition text-amber-200 font-medium\"\n                        >\n                          {item.size} {item.type} {item.milk && `(${item.milk})`} {item.syrup && `+ ${item.syrup}`} âœ•\n                        </button>\n                      ))\n                    ) : (\n                      <p className=\"text-amber-400/50 text-sm\">Receipt preview</p>\n                    )}\n                  </div>\n\n                  {/* Progress Indicator */}\n                  <div className=\"flex items-center justify-center gap-2 mb-4\">\n                    <div className=\"flex items-center gap-1\">\n                      <span className={`w-2 h-2 rounded-full ${currentItem.type ? 'bg-amber-400' : 'bg-amber-900'}`} />\n                      <span className=\"text-xs text-amber-400/60\">Type</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <span className={`w-2 h-2 rounded-full ${currentItem.size ? 'bg-amber-400' : 'bg-amber-900'}`} />\n                      <span className=\"text-xs text-amber-400/60\">Size</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <span className={`w-2 h-2 rounded-full ${currentItem.milk ? 'bg-amber-400' : 'bg-amber-900'}`} />\n                      <span className=\"text-xs text-amber-400/60\">Milk</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <span className={`w-2 h-2 rounded-full ${currentItem.syrup ? 'bg-amber-400' : 'bg-amber-900'}`} />\n                      <span className=\"text-xs text-amber-400/60\">Syrup</span>\n                    </div>\n                  </div>\n\n                  {/* Selection Grid - 2 columns on mobile, 4 on desktop */}\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 mb-4 max-h-[40vh] md:max-h-none overflow-y-auto\">\n                    {/* TYPE */}\n                    <div className=\"bg-black/30 rounded-xl p-2 md:p-3\">\n                      <p className=\"text-xs text-amber-400/60 mb-2 font-semibold uppercase tracking-wide\">Type â˜•</p>\n                      <div className=\"flex flex-col gap-1\">\n                        {['Americano', 'Latte', 'Cappuccino', 'Flat White', 'Macchiato', 'Mocha', 'Espresso'].map((type) => (\n                          <button\n                            key={type}\n                            onClick={() => setCurrentItem({...currentItem, type})}\n                            className={`py-1.5 px-2 rounded-lg text-xs transition font-medium ${\n                              currentItem.type === type \n                                ? 'bg-amber-500 text-black' \n                                : 'bg-amber-900/50 hover:bg-amber-900/70 text-amber-200'\n                            }`}\n                          >\n                            {type}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* SIZE */}\n                    <div className=\"bg-black/30 rounded-xl p-2 md:p-3\">\n                      <p className=\"text-xs text-amber-400/60 mb-2 font-semibold uppercase tracking-wide\">Size ðŸ“</p>\n                      <div className=\"flex flex-col gap-1\">\n                        {['Small', 'Medium', 'Large'].map((size) => (\n                          <button\n                            key={size}\n                            onClick={() => setCurrentItem({...currentItem, size})}\n                            className={`py-1.5 px-2 rounded-lg text-xs transition font-medium ${\n                              currentItem.size === size \n                                ? 'bg-amber-500 text-black' \n                                : 'bg-amber-900/50 hover:bg-amber-900/70 text-amber-200'\n                            }`}\n                          >\n                            {size}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* MILK */}\n                    <div className=\"bg-black/30 rounded-xl p-2 md:p-3\">\n                      <p className=\"text-xs text-amber-400/60 mb-2 font-semibold uppercase tracking-wide\">Milk ðŸ¥›</p>\n                      <div className=\"flex flex-col gap-1\">\n                        {['None', 'Whole', 'Half & Half', 'Oat', 'Almond', 'Nonfat'].map((milk) => (\n                          <button\n                            key={milk}\n                            onClick={() => setCurrentItem({...currentItem, milk: milk === 'None' ? undefined : milk})}\n                            className={`py-1.5 px-2 rounded-lg text-xs transition font-medium ${\n                              (currentItem.milk === milk || (!currentItem.milk && milk === 'None')) \n                                ? 'bg-amber-500 text-black' \n                                : 'bg-amber-900/50 hover:bg-amber-900/70 text-amber-200'\n                            }`}\n                          >\n                            {milk}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* SYRUP */}\n                    <div className=\"bg-black/30 rounded-xl p-2 md:p-3\">\n                      <p className=\"text-xs text-amber-400/60 mb-2 font-semibold uppercase tracking-wide\">Syrup ðŸ¯</p>\n                      <div className=\"flex flex-col gap-1\">\n                        {['None', 'Caramel', 'Vanilla', 'Hazelnut'].map((syrup) => (\n                          <button\n                            key={syrup}\n                            onClick={() => setCurrentItem({...currentItem, syrup: syrup === 'None' ? undefined : syrup})}\n                            className={`py-1.5 px-2 rounded-lg text-xs transition font-medium ${\n                              (currentItem.syrup === syrup || (!currentItem.syrup && syrup === 'None')) \n                                ? 'bg-amber-500 text-black' \n                                : 'bg-amber-900/50 hover:bg-amber-900/70 text-amber-200'\n                            }`}\n                          >\n                            {syrup}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Current Selection Preview */}\n                  {(currentItem.type || currentItem.size) && (\n                    <div className=\"bg-amber-900/30 rounded-lg p-2 mb-3 text-center\">\n                      <p className=\"text-amber-200 text-sm\">\n                        Building: <span className=\"font-semibold\">\n                          {currentItem.size || '___'} {currentItem.type || '___'}\n                          {currentItem.milk && ` (${currentItem.milk})`}\n                          {currentItem.syrup && ` + ${currentItem.syrup}`}\n                        </span>\n                      </p>\n                    </div>\n                  )}\n\n                  {/* Action Buttons - Sticky at bottom */}\n                  <div className=\"sticky bottom-0 bg-black/90 pt-3 -mx-4 md:-mx-6 px-4 md:px-6 pb-2 -mb-4 md:-mb-6 rounded-b-2xl\">\n                    <div className=\"flex gap-3\">\n                      <button\n                        onClick={addToOrder}\n                        disabled={!currentItem.type || !currentItem.size || round1Selections.length >= currentRoundConfig.itemCount}\n                        className=\"flex-1 py-3 rounded-xl font-semibold text-sm md:text-base transition bg-amber-900/60 hover:bg-amber-900/80 text-amber-200 disabled:opacity-30 disabled:cursor-not-allowed\"\n                      >\n                        + Add Item\n                      </button>\n                      <button\n                        onClick={checkRound1}\n                        disabled={round1Selections.length !== currentRoundConfig.itemCount}\n                        className=\"flex-1 py-3 rounded-xl font-semibold text-sm md:text-base transition bg-amber-500 hover:bg-amber-400 text-black disabled:opacity-30 disabled:cursor-not-allowed\"\n                      >\n                        Submit âœ“\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Round 4 - Typing Order */}\n            {round === 4 && (\n              <div className=\"bg-black/85 backdrop-blur-lg rounded-2xl border border-amber-500/40 p-8 shadow-2xl\">\n                <div className=\"flex items-center gap-4 mb-4\">\n                  <img src=\"/kokorobot-closeup.png\" alt=\"Kokorobot\" className=\"w-20 h-20 rounded-full object-cover border-2 border-amber-500/50\" />\n                  <div>\n                    <p className=\"text-amber-400 font-sans font-medium text-xl\">Kokoro</p>\n                    <p className=\"text-lg text-purple-400\">Your turn! Order one drink by typing.</p>\n                  </div>\n                </div>\n                \n                <div className=\"h-64 overflow-y-auto mb-4 space-y-3 bg-black/30 rounded-xl p-4\">\n                  {round2Chat.map((msg, i) => (\n                    <div key={i} className={`flex ${msg.role === 'player' ? 'justify-end' : 'justify-start'}`}>\n                      {msg.role === 'npc' && (\n                        <img src=\"/kokorobot-closeup.png\" alt=\"Kokorobot\" className=\"w-12 h-12 rounded-full mr-2 object-cover\" />\n                      )}\n                      <span className={`inline-block rounded-xl px-5 py-3 max-w-[80%] text-lg ${\n                        msg.role === 'player' ? 'bg-purple-500 text-white' : 'bg-amber-900/60 text-amber-200'\n                      }`}>\n                        {msg.text}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"flex gap-3 mb-4\">\n                  {[{key: 'type', label: 'â˜• Type'}, {key: 'size', label: 'ðŸ“ Size'}, {key: 'temp', label: 'ðŸ§Š Temp'}, {key: 'milk', label: 'ðŸ¥› Milk'}].map(({key, label}) => (\n                    <span key={key} className={`px-4 py-2 rounded-full text-base font-medium ${round2Order[key as keyof typeof round2Order] ? 'bg-green-500/30 text-green-400 border border-green-500/50' : 'bg-amber-900/50 text-amber-400/60'}`}>\n                      {label} {round2Order[key as keyof typeof round2Order] && 'âœ“'}\n                    </span>\n                  ))}\n                </div>\n\n                {/* Show Confirm/Modify buttons when order is complete */}\n                {round2ConfirmStep ? (\n                  <div className=\"flex gap-3\">\n                    <button \n                      onClick={() => {\n                        setRound2ConfirmStep(false);\n                        setRound2Order({ type: false, size: false, milk: false, syrup: false, temp: false });\n                        setRound2OrderDetails({});\n                        const response = \"No problem! What would you like instead?\";\n                        setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n                        playAudio('/Audio/kokorobot-greeting.mp3');\n                      }}\n                      className=\"flex-1 bg-amber-900/60 hover:bg-amber-900/80 text-amber-200 font-semibold py-4 rounded-xl text-xl border border-amber-500/40\"\n                    >\n                      âœï¸ Modify\n                    </button>\n                    <button \n                      onClick={() => {\n                        const response = \"Thank you, it will be at the pick up counter.\";\n                        setRound2Chat(prev => [...prev, { role: 'npc', text: response }]);\n                        // Stop background music\n                        if (audioRef) {\n                          audioRef.pause();\n                          setMusicPlaying(false);\n                        }\n                        playAudio('/Audio/goodresult.mp3', () => {\n                          setCoins(prev => prev + 80);\n                          triggerCoinAnimation(round);\n                          setInvestorMessage({ title: \"Impressive!\" });\n                          setGameState('investor');\n                        });\n                      }}\n                      className=\"flex-1 bg-green-500 hover:bg-green-400 text-black font-semibold py-4 rounded-xl text-xl\"\n                    >\n                      âœ“ Confirm Order\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"flex gap-3\">\n                    <input\n                      type=\"text\"\n                      value={round2Input}\n                      onChange={(e) => setRound2Input(e.target.value)}\n                      onKeyDown={(e) => e.key === 'Enter' && processRound2Input()}\n                      placeholder=\"Type your order...\"\n                      className=\"flex-1 bg-amber-900/40 border border-amber-500/40 rounded-xl px-5 py-4 text-xl focus:outline-none focus:border-amber-500 text-white placeholder-amber-400/50\"\n                    />\n                    <button onClick={processRound2Input} className=\"bg-purple-500 hover:bg-purple-400 text-white font-semibold px-10 rounded-xl text-xl\">\n                      Send\n                    </button>\n                  </div>\n                )}\n                \n                {/* Skip option with coin info */}\n                <div className=\"mt-4 pt-4 border-t border-amber-500/20 text-center\">\n                  <p className=\"text-amber-400/60 text-xs mb-2\">Round 4: Type your order Â· Earn +80 coins</p>\n                  <button\n                    onClick={() => {\n                      // Skip to next round without coins\n                      setRound(5);\n                      setGameState('playing');\n                      setShowDialogue(true);\n                      setRound3Transcript('');\n                      setRound3ConfirmStep(false);\n                      startBackgroundMusic(5);\n                    }}\n                    className=\"text-zinc-500 hover:text-zinc-300 text-sm transition underline\"\n                  >\n                    Skip this round (no coins)\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Round 5 - Speaking Order */}\n            {round === 5 && (\n              <div className=\"bg-black/85 backdrop-blur-lg rounded-2xl border border-amber-500/40 p-8 shadow-2xl text-center\">\n                <img src=\"/kokorobot-closeup.png\" alt=\"Kokorobot\" className=\"w-24 h-24 rounded-full object-cover border-2 border-amber-500/50 mx-auto mb-4\" />\n                \n                {!round3ConfirmStep ? (\n                  <>\n                    <p className=\"text-xl text-green-400 mb-6 font-medium\">Speak your order!</p>\n                    \n                    <button\n                      onClick={startListening}\n                      disabled={round3Listening}\n                      className={`w-40 h-40 rounded-full font-semibold text-4xl transition mx-auto mb-6 shadow-lg ${\n                        round3Listening ? 'bg-red-500 animate-pulse shadow-red-500/50' : 'bg-gradient-to-r from-green-500 to-amber-500 hover:from-green-400 hover:to-amber-400 shadow-green-500/30'\n                      }`}\n                    >\n                      {round3Listening ? 'ðŸŽ¤' : 'ðŸŽ¤ Speak'}\n                    </button>\n\n                    {round3Transcript && (\n                      <div className=\"bg-amber-900/40 rounded-xl p-5 mb-5 text-left border border-amber-500/30\">\n                        <p className=\"text-base text-amber-400/80 mb-1\">You said:</p>\n                        <p className=\"text-2xl text-white\">\"{round3Transcript}\"</p>\n                      </div>\n                    )}\n\n                    {round3CurrentQuestion && !round3ConfirmStep && (\n                      <div className=\"bg-amber-900/40 rounded-xl p-5 text-left border border-amber-500/30\">\n                        <p className=\"text-yellow-400 text-xl mb-4\">ðŸŽ¤ {round3CurrentQuestion}</p>\n                        <p className=\"text-amber-400/60 text-base mb-4\">Tap the mic to answer</p>\n                      </div>\n                    )}\n                  </>\n                ) : (\n                  <>\n                    {/* Order Summary with Confirm/Modify */}\n                    <div className=\"text-center\">\n                      <div className=\"bg-green-900/30 rounded-xl p-6 mb-6 border border-green-500/50\">\n                        <p className=\"text-2xl text-white\">{round3CurrentQuestion}</p>\n                      </div>\n                      \n                      <div className=\"flex gap-3\">\n                        <button \n                          onClick={() => {\n                            setRound3ConfirmStep(false);\n                            setRound3Order({ type: false, size: false, milk: false, temp: false, syrup: false });\n                            setRound3OrderDetails({});\n                            setRound3Transcript('');\n                            setRound3CurrentQuestion('');\n                          }}\n                          className=\"flex-1 bg-amber-900/60 hover:bg-amber-900/80 text-amber-200 font-semibold py-4 rounded-xl text-xl border border-amber-500/40\"\n                        >\n                          âœï¸ Modify\n                        </button>\n                        <button \n                          onClick={acceptRound3Score}\n                          className=\"flex-1 bg-green-500 hover:bg-green-400 text-black font-semibold py-4 rounded-xl text-xl\"\n                        >\n                          âœ“ Confirm Order\n                        </button>\n                      </div>\n                    </div>\n                  </>\n                )}\n                \n                {/* Skip option with coin info */}\n                <div className=\"mt-4 pt-4 border-t border-amber-500/20\">\n                  <p className=\"text-amber-400/60 text-xs mb-2\">Round 5: Speak your order Â· Earn +100 coins</p>\n                  <button\n                    onClick={() => {\n                      // Skip to completion without coins\n                      stopBackgroundMusic();\n                      setInvestorMessage({ title: \"You're a natural!\" });\n                      setGameState('investor');\n                    }}\n                    className=\"text-zinc-500 hover:text-zinc-300 text-sm transition underline\"\n                  >\n                    Skip this round (no coins)\n                  </button>\n                </div>\n              </div>\n            )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Earth Investor Video Call - Frame-based layout */}\n      {gameState === 'investor' && (\n        <div className=\"fixed inset-0 z-40 bg-black flex items-center justify-center\">\n          {/* FRAME: everything pins to this box, not the viewport */}\n          <div className=\"relative w-full h-full md:w-[min(96vw,1200px)] md:h-[min(92vh,800px)] md:rounded-2xl overflow-hidden bg-black\">\n            \n            {/* Background image - fills the frame */}\n            <img \n              src={round === 1 ? \"/ib.png\" : `/NY-investor${round}.png`}\n              alt=\"Earth Investor calling from spaceship\" \n              className=\"absolute inset-0 w-full h-full object-cover\"\n            />\n            \n            {/* All overlays inside the same frame */}\n            <div className=\"absolute inset-0 z-50 pointer-events-none\">\n              \n              {/* Black overlay for HUD/LIVE readability - MOBILE ONLY */}\n              <div className=\"absolute top-0 left-0 right-0 h-27 bg-gradient-to-b from-black/100 via-black/85 to-transparent pointer-events-none\" />\n              \n              {/* HUD - top bar - with margin from top on mobile */}\n              <div className=\"absolute left-4 right-4 md:left-6 md:right-6 top-5 md:top-2 flex justify-between items-center pointer-events-auto\">\n                <div className=\"bg-black/80 rounded-full px-3 md:px-4 py-1 md:py-1.5 border border-zinc-500/30 flex items-center\">\n                  <span className=\"text-zinc-100 font-sans text-xs md:text-sm whitespace-nowrap\">M31 Â· Lv.3 Â· {round}/5</span>\n                </div>\n                <div className=\"flex items-center gap-2 md:gap-3\">\n                  {/* Balance - coins fly here */}\n                  <div className=\"bg-black/80 rounded-full px-3 md:px-4 py-1 md:py-1.5 border border-zinc-500/30 flex items-center gap-1 md:gap-2\">\n                    <KokoroCoin size={20} className=\"md:w-5 md:h-5\" />\n                    <span className=\"text-zinc-100 font-sans text-xs md:text-sm\">{coins}</span>\n                  </div>\n                  {/* Save button */}\n                  <button \n                    onClick={() => alert('âœ… Progress saved locally!')}\n                    className=\"bg-black/80 rounded-full px-2 md:px-3 py-1 md:py-1.5 border border-zinc-500/30 hover:bg-black/60 transition flex items-center\"\n                  >\n                    <span className=\"text-zinc-100 text-xs md:text-sm\">âœ… </span>\n                  </button>\n                  {/* Exit button */}\n                  <button \n                    onClick={() => { if(confirm('Exit game? Your progress is saved.')) window.location.href = '/'; }}\n                    className=\"bg-black/80 rounded-full px-2 md:px-3 py-1 md:py-1.5 border border-zinc-500/30 hover:bg-black/60 transition flex items-center\"\n                  >\n                    <span className=\"text-zinc-100 text-xs md:text-sm\">âœ•</span>\n                  </button>\n                </div>\n              </div>\n\n              {/* LIVE indicator - just below HUD */}\n              <div className=\"absolute left-5 md:left-6 top-[72px] md:top-12 flex items-center gap-2 pointer-events-none\">\n                <div className=\"w-2 h-2 md:w-3 md:h-3 bg-green-500 rounded-full animate-pulse flex-shrink-0\" />\n                <span className=\"text-green-400 text-xs md:text-base font-sans font-medium drop-shadow-[0_2px_4px_rgba(0,0,0,0.9)]\">\n                  {round === 5 \n                    ? <>\n                        <span className=\"md:hidden\">LIVE: LEVEL 3 CLEAR!!! {totalCoinsEarned} COINS EARNED!</span>\n                        <span className=\"hidden md:inline\">LIVE: LEVEL 3 CLEAR!!! {totalCoinsEarned} COINS EARNED!</span>\n                      </>\n                    : `LIVE: +${round === 1 ? 20 : round === 2 ? 30 : round === 3 ? 50 : round === 4 ? 80 : 100} COINS FROM EARTH!`\n                  }\n                </span>\n              </div>\n\n              {/* Bellagio-style fountain jets */}\n              {showCoinAnimation && (\n                <div className=\"absolute inset-0 overflow-hidden flex items-center justify-center\">\n                  {animatedCoins.map((coin) => (\n                    <div\n                      key={coin.id}\n                      className=\"absolute animate-fountain-jet\"\n                      style={{\n                        '--jx': `${coin.x}px`,\n                        '--jy': `${coin.y}px`,\n                        '--s': coin.scale,\n                        animationDelay: `${coin.delay}s`\n                      } as React.CSSProperties}\n                    >\n                      <div className=\"relative\">\n                        <KokoroCoin size={32} className=\"drop-shadow-[0_0_15px_rgba(255,215,0,0.9)]\" />\n                        <div className=\"absolute inset-0 w-8 h-8 bg-yellow-400/40 rounded-full blur-md -z-10\" />\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {/* Coin flying animation */}\n              <div className=\"absolute top-[55%] left-1/2 animate-fly-to-balance\">\n                <div className=\"flex items-center gap-1 md:gap-2 bg-black/70 px-3 md:px-4 py-1 md:py-2 rounded-full\">\n                  <KokoroCoin size={24} className=\"md:w-8 md:h-8\" />\n                  <span className=\"text-yellow-400 font-semibold text-lg md:text-2xl\">+{round === 1 ? 20 : round === 2 ? 30 : round === 3 ? 50 : round === 4 ? 80 : 100}</span>\n                </div>\n              </div>\n\n              {/* Title/Subtitle - centered */}\n              <div className={`absolute left-[55%] -translate-x-1/2 w-[min(92%,520px)] text-center pointer-events-none ${\n                round === 5 ? 'top-[50%] -translate-y-1/2' : 'top-[50%] -translate-y-1/2'\n              }`}>\n                <h2 className=\"text-2xl md:text-4xl font-medium text-white drop-shadow-[0_4px_16px_rgba(0,0,0,0.95)] leading-tight\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>\n                  {investorMessage.title}\n                </h2>\n                {round === 5 ? (\n                  <p className=\"mt-2 text-base md:text-xl text-white/90 leading-snug drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)]\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>\n                    Ready for more levels in new outposts?\n                  </p>\n                ) : (\n                  investorMessage.subtitle && (\n                    <p className=\"mt-2 text-base md:text-xl text-white/90 leading-snug drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)]\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>\n                      {investorMessage.subtitle}\n                    </p>\n                  )\n                )}\n              </div>\n\n              {/* CTAs - positioned based on round */}\n              <div className={`absolute flex gap-2 md:gap-3 flex-col pointer-events-auto ${\n                round === 5\n                  ? 'bottom-16 md:bottom-[20%] right-12 md:right-80 items-end'\n                  : round === 3 || round === 4\n                  ? 'bottom-16 md:bottom-[25%] left-1/2 -translate-x-1/2 items-center w-[min(92%,360px)]'\n                  : 'bottom-30 md:bottom-[38%] right-12 md:left-1/2 md:-translate-x-1/2 md:right-auto items-end md:items-center'\n              }`}>\n                {/* Rounds 3 and 4: Build Your CafÃ© + Next Round */}\n                {(round === 3 || round === 4) && (\n                  <>\n                    <button\n                      onClick={() => setShowCafeShop(true)}\n                      className=\"bg-zinc-800 hover:bg-zinc-700 text-zinc-100 font-semibold py-2.5 px-8 rounded-lg text-base transition border border-zinc-100/30\"\n                      style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                    >\n                      Build Your CafÃ©\n                    </button>\n                    <button\n                      onClick={completeGame}\n                      className=\"bg-zinc-100 hover:bg-zinc-200 text-zinc-900 font-semibold py-2.5 px-8 rounded-lg text-base transition shadow-lg border border-zinc-400/50\"\n                      style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                    >\n                      Next Round â†’\n                    </button>\n                  </>\n                )}\n                \n                {/* Round 5: Completion CTAs */}\n                {round === 5 && (\n                  <>\n                    <button\n                      onClick={() => setShowEmailModal(true)}\n                      className=\"bg-zinc-100 hover:bg-zinc-200 text-zinc-900 font-semibold py-3 px-8 rounded-lg text-base transition shadow-lg border border-zinc-400/50\"\n                      style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                    >\n                      Save {totalCoinsEarned} Coins Earned\n                    </button>\n                    <div className=\"flex flex-col items-end\">\n                      <button\n                        onClick={() => setShowCafeShop(true)}\n                        className=\"bg-zinc-800 hover:bg-zinc-700 text-zinc-100 font-semibold py-3 px-8 rounded-lg text-base transition border border-zinc-100/30\"\n                        style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                      >\n                        Build Your CafÃ©\n                      </button>\n                      <button\n                        onClick={openFeedbackForm}\n                        className=\"text-white hover:text-black text-sm font-semibold mt-1 transition underline underline-offset-4\"\n                        style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                      >\n                        Send Feedback\n                      </button>\n                    </div>\n                  </>\n                )}\n                \n                {/* Rounds 1-2: Just Next Round */}\n                {round < 3 && (\n                  <button\n                    onClick={completeGame}\n                    className=\"bg-zinc-700 hover:bg-zinc-600 text-zinc-100 font-semibold py-2.5 px-8 rounded-lg text-base transition shadow-lg border border-zinc-100/30\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  >\n                    Next Round â†’\n                  </button>\n                )}\n              </div>\n              \n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Custom animation styles */}\n      <style jsx>{`\n        @keyframes fountain-jet {\n          0% {\n            opacity: 0;\n            transform: translateX(var(--jx)) translateY(50px) scale(0.3);\n          }\n          15% {\n            opacity: 1;\n            transform: translateX(var(--jx)) translateY(var(--jy)) scale(var(--s));\n          }\n          35% {\n            opacity: 1;\n            transform: translateX(var(--jx)) translateY(calc(var(--jy) * 0.7)) scale(var(--s)) rotate(90deg);\n          }\n          55% {\n            opacity: 1;\n            transform: translateX(var(--jx)) translateY(calc(var(--jy) * 0.4)) scale(var(--s)) rotate(180deg);\n          }\n          75% {\n            opacity: 0.8;\n            transform: translateX(calc(var(--jx) * 0.3 + 40%)) translateY(calc(var(--jy) * 0.1 - 45%)) scale(calc(var(--s) * 0.6)) rotate(270deg);\n          }\n          100% {\n            opacity: 0;\n            transform: translateX(45%) translateY(-48%) scale(0.15);\n          }\n        }\n        .animate-fountain-jet {\n          animation: fountain-jet 2.8s ease-out forwards;\n        }\n        @keyframes walk {\n          0% { transform: translateY(0) rotate(0deg); }\n          25% { transform: translateY(-6px) rotate(-2deg); }\n          50% { transform: translateY(0) rotate(0deg); }\n          75% { transform: translateY(-6px) rotate(2deg); }\n          100% { transform: translateY(0) rotate(0deg); }\n        }\n        .animate-walk {\n          animation: walk 0.5s ease-in-out infinite;\n        }\n        @keyframes fade-in {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.5s ease-out;\n        }\n        @keyframes pop-in {\n          0% { transform: scale(0); opacity: 0; }\n          70% { transform: scale(1.1); }\n          100% { transform: scale(1); opacity: 1; }\n        }\n        .animate-pop-in {\n          animation: pop-in 0.4s ease-out;\n        }\n        @keyframes fly-to-balance {\n          0% {\n            opacity: 1;\n            transform: translate(-50%, -50%) scale(1);\n          }\n          70% {\n            opacity: 1;\n            transform: translate(42%, -52%) scale(0.8);\n          }\n          100% {\n            opacity: 0;\n            transform: translate(42%, -52%) scale(0.5);\n          }\n        }\n        .animate-fly-to-balance {\n          animation: fly-to-balance 1.5s ease-in-out forwards;\n        }\n      `}</style>\n\n      {/* Menu Popup - Chalkboard Style */}\n      {showMenu && (\n        <div className=\"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4\" onClick={() => setShowMenu(false)}>\n          <div \n            className=\"bg-zinc-900 rounded-xl p-8 max-w-2xl w-full border-4 border-zinc-700 shadow-2xl\"\n            onClick={e => e.stopPropagation()}\n            style={{ \n              backgroundImage: 'linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%)',\n              boxShadow: 'inset 0 0 60px rgba(0,0,0,0.5)'\n            }}\n          >\n            <h2 className=\"text-4xl font-medium text-center mb-8 text-white\" style={{ fontFamily: 'Georgia, serif', textShadow: '2px 2px 4px rgba(0,0,0,0.5)' }}>\n              â˜• Our Menu\n            </h2>\n            <div className=\"grid grid-cols-1 gap-4\">\n              {menuItems.map((item, i) => (\n                <div key={i} className=\"flex justify-between items-center border-b border-zinc-700/50 pb-3\">\n                  <div>\n                    <p className=\"text-2xl text-white font-medium\" style={{ fontFamily: 'Georgia, serif' }}>{item.name}</p>\n                    <p className=\"text-zinc-400 text-sm italic\">{item.desc}</p>\n                  </div>\n                  <div className=\"text-zinc-500 text-xl\">â€¢â€¢â€¢</div>\n                </div>\n              ))}\n            </div>\n            <button \n              onClick={() => setShowMenu(false)}\n              className=\"mt-8 w-full py-3 bg-amber-600 hover:bg-amber-500 text-white font-semibold rounded-lg text-lg\"\n            >\n              Got it!\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Cafe Shop */}\n      {showCafeShop && (\n        <div className=\"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-gradient-to-b from-zinc-800 to-zinc-900 rounded-2xl p-6 max-w-4xl w-full border border-amber-500/30\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-3xl font-medium text-amber-400\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>ðŸª Choose Your CafÃ©</h2>\n              <div className=\"flex items-center gap-2 bg-black/50 px-4 py-2 rounded-full\">\n                <KokoroCoin size={28} />\n                <span className=\"text-yellow-400 font-bold text-xl\">{coins}</span>\n              </div>\n            </div>\n            \n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6\">\n              {cafeOptions.map((cafe) => {\n                const owned = purchasedCafes.includes(cafe.id);\n                const canAfford = coins >= cafe.price;\n                return (\n                  <div \n                    key={cafe.id}\n                    className={`relative rounded-xl overflow-hidden border-2 transition-all ${\n                      owned ? 'border-green-500 cursor-pointer hover:scale-105' : canAfford ? 'border-amber-500 hover:border-amber-400 cursor-pointer hover:scale-105' : 'border-zinc-600 opacity-50'\n                    }`}\n                    onClick={() => {\n                      if (owned) {\n                        // Show owned popup with options\n                        setOwnedCafeToView(cafe);\n                        setShowOwnedPopup(true);\n                      } else if (canAfford) {\n                        // Show purchase confirmation\n                        setSelectedCafe(cafe);\n                        setShowPurchaseConfirm(true);\n                      } else {\n                        setShowCoinShop(true);\n                      }\n                    }}\n                  >\n                    <div className=\"relative\">\n                      <img src={cafe.image} alt={cafe.name} className=\"w-full h-32 object-cover bg-gradient-to-br from-indigo-900/80 via-purple-900/60 to-black/90\" />\n                      {owned && (\n                        <div className=\"absolute top-2 right-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full\">\n                          âœ“ OWNED\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"p-3 bg-black/80\">\n                      <p className=\"text-white font-medium text-sm\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>{cafe.name}</p>\n                      <div className=\"flex items-center gap-1 mt-1\">\n                        {owned ? (\n                          <span className=\"text-green-400 text-sm\">Tap to view options</span>\n                        ) : (\n                          <>\n                            <KokoroCoin size={18} />\n                            <span className={`font-bold ${canAfford ? 'text-yellow-400' : 'text-red-400'}`}>{cafe.price}</span>\n                          </>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n            \n            {/* Different buttons based on whether game is complete (round 5) or mid-game */}\n            {round === 5 ? (\n              <>\n                {/* Round 5 Complete: Full options */}\n                <div className=\"flex gap-3 mb-4\">\n                  <button \n                    onClick={() => {\n                      alert('ðŸŽ¯ New conversation sets coming soon! Stay tuned for more scenarios to practice.');\n                    }}\n                    className=\"flex-1 py-4 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl text-lg border border-zinc-600\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  >\n                    ðŸŽ¯ Try a New Set\n                  </button>\n                  <button \n                    onClick={() => {\n                      alert('ðŸª More outposts coming soon! Restaurant, Department Store, and more.');\n                    }}\n                    className=\"flex-1 py-4 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl text-lg border border-zinc-600\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  >\n                    ðŸ¬ Choose New Outpost\n                  </button>\n                </div>\n                \n                <button \n                  onClick={() => {\n                    alert('ðŸ—ºï¸ M31 Map coming soon! Your cafÃ©s are saved in inventory.');\n                  }}\n                  className=\"w-full py-4 bg-zinc-800 hover:bg-zinc-700 text-white font-bold rounded-xl text-lg border border-zinc-600 mb-4\"\n                  style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                >\n                  ðŸ—ºï¸ Go to M31 Map\n                </button>\n                \n                {/* Small Links - all mustard yellow */}\n                <div className=\"flex justify-center gap-6 pt-2 border-t border-zinc-700\">\n                  <button \n                    onClick={() => setShowCoinShop(true)}\n                    className=\"text-amber-400 hover:text-amber-300 text-sm font-medium transition\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  >\n                    ðŸ’° Buy Coins\n                  </button>\n                  <button \n                    onClick={() => {\n                      setShowCafeShop(false);\n                      setShowInventory(true);\n                    }}\n                    className=\"text-amber-400 hover:text-amber-300 text-sm font-medium transition\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  >\n                    ðŸ“¦ Check Inventory\n                  </button>\n                  <button \n                    onClick={() => {\n                      setShowCafeShop(false);\n                    }}\n                    className=\"text-amber-400 hover:text-amber-300 text-sm font-medium transition\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  >\n                    ðŸ’¾ Save & Exit\n                  </button>\n                </div>\n              </>\n            ) : (\n              <>\n                {/* Mid-game (rounds 3-4): Simple options */}\n                <div className=\"flex gap-3\">\n                  <button \n                    onClick={() => setShowCoinShop(true)}\n                    className=\"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-amber-400 font-semibold rounded-lg border border-zinc-600\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  >\n                    ðŸ’° Buy Coins\n                  </button>\n                  <button \n                    onClick={() => {\n                      setShowCafeShop(false);\n                      completeGame();\n                    }}\n                    className=\"flex-1 py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white font-semibold rounded-lg\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  >\n                    â–¶ï¸ Keep Playing\n                  </button>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Purchase Confirmation Popup */}\n      {showPurchaseConfirm && selectedCafe && (\n        <div className=\"fixed inset-0 bg-black/95 z-[70] flex items-center justify-center p-4\">\n          <div className=\"bg-gradient-to-b from-zinc-800 to-zinc-900 rounded-2xl p-8 max-w-md w-full border border-amber-500/50 text-center\">\n            <h3 className=\"text-2xl font-medium text-amber-400 mb-4\">ðŸª Purchase CafÃ©?</h3>\n            <img \n              src={selectedCafe.image} \n              alt={selectedCafe.name} \n              className=\"w-48 h-48 object-cover rounded-xl mx-auto mb-4 border-2 border-amber-500/30 bg-gradient-to-br from-indigo-900/80 via-purple-900/60 to-black/90\"\n            />\n            <p className=\"text-white text-xl font-semibold mb-2\">{selectedCafe.name}</p>\n            <div className=\"flex items-center justify-center gap-2 mb-4\">\n              <span className=\"text-zinc-400\">Price:</span>\n              <KokoroCoin size={24} />\n              <span className=\"text-yellow-400 font-bold text-xl\">{selectedCafe.price}</span>\n            </div>\n            <div className=\"flex items-center justify-center gap-2 mb-6 bg-black/50 py-2 px-4 rounded-full inline-flex\">\n              <span className=\"text-zinc-400\">Your balance:</span>\n              <KokoroCoin size={20} />\n              <span className=\"text-yellow-400 font-semibold\">{coins}</span>\n            </div>\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => {\n                  setShowPurchaseConfirm(false);\n                  setSelectedCafe(null);\n                }}\n                className=\"flex-1 py-3 bg-zinc-700 hover:bg-zinc-600 text-white font-semibold rounded-lg\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => {\n                  // Process purchase\n                  setCoins(prev => prev - selectedCafe.price);\n                  setPurchasedCafes(prev => [...prev, selectedCafe.id]);\n                  setShowPurchaseConfirm(false);\n                  // Show just purchased popup\n                  setJustPurchasedCafe(selectedCafe);\n                  setShowJustPurchased(true);\n                  setSelectedCafe(null);\n                }}\n                className=\"flex-1 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-400 hover:to-emerald-400 text-white font-bold rounded-lg\"\n              >\n                âœ“ Buy Now\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Just Purchased Popup */}\n      {showJustPurchased && justPurchasedCafe && (\n        <div className=\"fixed inset-0 bg-black/95 z-[70] flex items-center justify-center p-4\">\n          <div className=\"bg-gradient-to-b from-green-900/80 to-zinc-900 rounded-2xl p-8 max-w-md w-full border border-green-500/50 text-center\">\n            <div className=\"text-6xl mb-4\">ðŸŽ‰</div>\n            <h3 className=\"text-3xl font-bold text-green-400 mb-4\">Congratulations!</h3>\n            <img \n              src={justPurchasedCafe.image} \n              alt={justPurchasedCafe.name} \n              className=\"w-48 h-48 object-cover rounded-xl mx-auto mb-4 border-2 border-green-500/50 bg-gradient-to-br from-indigo-900/80 via-purple-900/60 to-black/90\"\n            />\n            <p className=\"text-white text-xl mb-2\">{justPurchasedCafe.name}</p>\n            <p className=\"text-green-300 mb-6\">is now in your inventory!</p>\n            <p className=\"text-zinc-400 text-sm mb-6\">What would you like to do?</p>\n            <div className=\"flex flex-col gap-3\">\n              <button\n                onClick={() => {\n                  setShowJustPurchased(false);\n                  setJustPurchasedCafe(null);\n                  alert('ðŸ—ºï¸ M31 Map coming soon! Your cafÃ© is saved in inventory.');\n                }}\n                className=\"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-400 hover:to-purple-400 text-white font-bold rounded-lg\"\n              >\n                ðŸ—ºï¸ Place on M31 Map\n              </button>\n              <button\n                onClick={() => {\n                  setShowJustPurchased(false);\n                  setJustPurchasedCafe(null);\n                  setShowCafeShop(false);\n                  setShowInventory(true);\n                }}\n                className=\"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white font-bold rounded-lg\"\n              >\n                ðŸ“¦ Check Inventory\n              </button>\n              <button\n                onClick={() => {\n                  setShowJustPurchased(false);\n                  setJustPurchasedCafe(null);\n                  alert('ðŸŽ¯ New conversation sets coming soon! Stay tuned for more scenarios to practice.');\n                }}\n                className=\"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white font-bold rounded-lg\"\n              >\n                ðŸŽ¯ Try a New Set\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Owned Cafe Popup */}\n      {showOwnedPopup && ownedCafeToView && (\n        <div className=\"fixed inset-0 bg-black/95 z-[70] flex items-center justify-center p-4\">\n          <div className=\"bg-gradient-to-b from-zinc-800 to-zinc-900 rounded-2xl p-8 max-w-md w-full border border-green-500/50 text-center relative\">\n            <h3 className=\"text-2xl font-bold text-green-400 mb-4\">ðŸª {ownedCafeToView.name}</h3>\n            <img \n              src={ownedCafeToView.image} \n              alt={ownedCafeToView.name} \n              className=\"w-48 h-48 object-cover rounded-xl mx-auto mb-6 border-2 border-green-500/50 bg-gradient-to-br from-indigo-900/80 via-purple-900/60 to-black/90\"\n            />\n            <p className=\"text-zinc-300 mb-6\">This cafÃ© is in your inventory. What would you like to do?</p>\n            <div className=\"flex flex-col gap-3\">\n              <button\n                onClick={() => {\n                  setShowOwnedPopup(false);\n                  setOwnedCafeToView(null);\n                  alert('ðŸ—ºï¸ M31 Map coming soon! Your cafÃ© is saved in inventory.');\n                }}\n                className=\"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-400 hover:to-purple-400 text-white font-bold rounded-lg\"\n              >\n                ðŸ—ºï¸ Place on M31 Map\n              </button>\n              <button\n                onClick={() => {\n                  setShowOwnedPopup(false);\n                  setOwnedCafeToView(null);\n                  setShowCafeShop(false);\n                  setShowInventory(true);\n                }}\n                className=\"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-400 hover:to-orange-400 text-white font-bold rounded-lg\"\n              >\n                ðŸ“¦ Check Inventory\n              </button>\n              <button\n                onClick={() => {\n                  setShowOwnedPopup(false);\n                  setOwnedCafeToView(null);\n                  alert('ðŸŽ¯ New conversation sets coming soon! Stay tuned for more scenarios to practice.');\n                }}\n                className=\"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white font-bold rounded-lg\"\n              >\n                ðŸŽ¯ Try a New Set\n              </button>\n              <button\n                onClick={() => {\n                  setShowOwnedPopup(false);\n                  setOwnedCafeToView(null);\n                }}\n                className=\"w-full py-3 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Friendly Feedback Modal - Wrong Answer */}\n      {showFeedbackModal && (\n        <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[80] flex items-center justify-center p-4\">\n          <div className=\"bg-gradient-to-b from-amber-50 to-white rounded-3xl p-8 max-w-sm w-full text-center shadow-2xl border border-amber-200\">\n            {/* Kokoro kaomoji face */}\n            <div className=\"text-5xl mb-4 text-amber-900 relative inline-block\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>\n              <span>{\"(à¹‘>â—¡<à¹‘)\"}</span>\n              {/* Pink cheeks */}\n              <span className=\"absolute left-[15%] top-[45%] w-3 h-3 bg-pink-300 rounded-full opacity-70\"></span>\n              <span className=\"absolute right-[15%] top-[45%] w-3 h-3 bg-pink-300 rounded-full opacity-70\"></span>\n            </div>\n            <h3 className=\"text-2xl font-medium text-amber-800 mb-2\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>\n              Almost there!\n            </h3>\n            <p className=\"text-amber-700 mb-6 text-base leading-relaxed\">\n              Let's try again! Tap ðŸ”Š Replay to hear the order.\n            </p>\n            <button\n              onClick={() => {\n                setShowFeedbackModal(false);\n                replayVoice();\n              }}\n              className=\"w-full py-3 bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-300 hover:to-amber-400 text-amber-900 font-bold rounded-full text-lg shadow-lg transition-all\"\n              style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n            >\n              ðŸ”Š Replay Order\n            </button>\n            <button\n              onClick={() => setShowFeedbackModal(false)}\n              className=\"mt-3 text-amber-600 hover:text-amber-800 font-medium transition-colors\"\n            >\n              Got it, thanks!\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Email Capture Modal */}\n      {showEmailModal && (\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-md z-[90] flex items-center justify-center p-4\">\n          <div className=\"bg-gradient-to-b from-zinc-800 to-zinc-900 rounded-3xl p-6 md:p-8 max-w-md w-full text-center shadow-2xl border border-pink-500/30\">\n            {!emailSubmitted ? (\n              <>\n                {/* Header */}\n                <div className=\"mb-6\">\n                  <div className=\"text-4xl mb-3\">ðŸŽ‰</div>\n                  <h3 className=\"text-xl md:text-2xl font-medium text-white mb-2\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>\n                    Save Your Progress!\n                  </h3>\n                  <p className=\"text-zinc-400 text-sm md:text-base\">\n                    Keep your <span className=\"text-yellow-400 font-semibold\">{totalCoinsEarned} coins</span> for new levels\n                  </p>\n                </div>\n                \n                {/* Email Input */}\n                <div className=\"mb-4\">\n                  <input\n                    type=\"email\"\n                    value={emailInput}\n                    onChange={(e) => {\n                      setEmailInput(e.target.value);\n                      setEmailError('');\n                    }}\n                    placeholder=\"Enter your email\"\n                    className=\"w-full px-4 py-3 rounded-xl bg-zinc-700/50 border border-zinc-600 text-white placeholder-zinc-400 focus:outline-none focus:border-pink-500 focus:ring-2 focus:ring-pink-500/20 text-base\"\n                    style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                  />\n                  {emailError && (\n                    <p className=\"text-red-400 text-sm mt-2\">{emailError}</p>\n                  )}\n                </div>\n                \n                {/* Submit Button */}\n                <button\n                  onClick={handleEmailSubmit}\n                  className=\"w-full py-3 bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-400 hover:to-purple-500 text-white font-bold rounded-full text-lg shadow-lg transition-all mb-3\"\n                  style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}\n                >\n                  Get Notified at Launch ðŸš€\n                </button>\n                \n                {/* Privacy note */}\n                <p className=\"text-zinc-500 text-xs mb-4\">\n                  We'll only email you about RPG for Humanity updates.\n                </p>\n                \n                {/* Close button */}\n                <button\n                  onClick={() => setShowEmailModal(false)}\n                  className=\"text-zinc-400 hover:text-white text-sm transition-colors\"\n                >\n                  Maybe later\n                </button>\n              </>\n            ) : (\n              <>\n                {/* Success State */}\n                <div className=\"py-4\">\n                  <div className=\"text-5xl mb-4\">âœ…</div>\n                  <h3 className=\"text-xl md:text-2xl font-bold text-green-400 mb-2\" style={{ fontFamily: 'system-ui, -apple-system, sans-serif' }}>\n                    You're on the list!\n                  </h3>\n                  <p className=\"text-zinc-300 text-sm md:text-base\">\n                    We'll notify you when new levels are ready.\n                  </p>\n                  <div className=\"flex items-center justify-center gap-2 mt-4 text-yellow-400\">\n                    <KokoroCoin size={24} />\n                    <span className=\"font-semibold\">{totalCoinsEarned} coins saved</span>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Coin Shop */}\n      {showCoinShop && (\n        <div className=\"fixed inset-0 bg-black/90 z-[80] flex items-center justify-center p-4\" onClick={() => setShowCoinShop(false)}>\n          <div \n            className=\"bg-gradient-to-b from-purple-900 to-zinc-900 rounded-2xl p-6 max-w-md w-full border border-purple-500/50\"\n            onClick={e => e.stopPropagation()}\n          >\n            <h2 className=\"text-3xl font-medium text-center text-purple-300 mb-6\">ðŸ’° Coin Shop</h2>\n            \n            <div className=\"space-y-4 mb-6\">\n              {coinBundles.map((bundle) => (\n                <div \n                  key={bundle.id}\n                  className={`relative p-4 rounded-xl border-2 cursor-pointer transition-all hover:scale-102 ${\n                    bundle.best ? 'border-yellow-400 bg-yellow-400/10' : 'border-zinc-600 bg-zinc-800/50 hover:border-purple-500'\n                  }`}\n                  onClick={() => {\n                    // Simulate purchase (in real app, this would go to payment)\n                    setCoins(prev => prev + bundle.coins);\n                    setShowCoinShop(false);\n                  }}\n                >\n                  {bundle.best && (\n                    <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-black text-xs font-bold px-3 py-1 rounded-full\">\n                      â­ BEST VALUE\n                    </div>\n                  )}\n                  <div className=\"flex justify-between items-center\">\n                    <div>\n                      <p className=\"text-white font-bold text-lg\">{bundle.label}</p>\n                      <div className=\"flex items-center gap-2\">\n                        <KokoroCoin size={28} />\n                        <span className=\"text-yellow-400 font-bold text-2xl\">{bundle.coins.toLocaleString()}</span>\n                      </div>\n                    </div>\n                    <div className=\"bg-green-500 hover:bg-green-400 text-white font-bold px-6 py-3 rounded-xl text-xl\">\n                      {bundle.price}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n            \n            <button \n              onClick={() => setShowCoinShop(false)}\n              className=\"w-full py-3 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg\"\n            >\n              Maybe Later\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Inventory View */}\n      {showInventory && (\n        <div className=\"fixed inset-0 bg-gradient-to-b from-zinc-900 via-zinc-800 to-zinc-900 z-[60] flex flex-col\">\n          {/* Top Bar */}\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-zinc-700\">\n            <button\n              onClick={() => setShowInventory(false)}\n              className=\"flex items-center gap-2 text-amber-400 hover:text-amber-300 transition font-medium\"\n            >\n              <span className=\"text-xl\">â†</span>\n              <span>Back to Coffee Outpost</span>\n            </button>\n            <div className=\"flex items-center gap-2 bg-black/50 px-4 py-2 rounded-full\">\n              <KokoroCoin size={28} />\n              <span className=\"text-yellow-400 font-bold text-xl\">{coins}</span>\n            </div>\n          </div>\n\n          {/* Tabs */}\n          <div className=\"flex gap-2 px-6 py-4 border-b border-zinc-700\">\n            <button\n              onClick={() => setInventoryTab('buildings')}\n              className={`px-6 py-3 rounded-xl font-semibold transition ${\n                inventoryTab === 'buildings'\n                  ? 'bg-amber-500 text-black'\n                  : 'bg-zinc-700 text-zinc-300 hover:bg-zinc-600'\n              }`}\n            >\n              ðŸª Buildings\n            </button>\n            <button\n              onClick={() => setInventoryTab('kokorobots')}\n              className=\"px-6 py-3 rounded-xl font-semibold bg-zinc-800 text-zinc-500 cursor-not-allowed flex items-center gap-2\"\n              disabled\n            >\n              ðŸ¤– Kokorobots\n              <span className=\"text-xs bg-zinc-700 px-2 py-0.5 rounded-full\">Soon</span>\n            </button>\n            <button\n              className=\"px-6 py-3 rounded-xl font-semibold bg-zinc-800 text-zinc-500 cursor-not-allowed flex items-center gap-2\"\n              disabled\n            >\n              ðŸŒ³ Items\n              <span className=\"text-xs bg-zinc-700 px-2 py-0.5 rounded-full\">Soon</span>\n            </button>\n          </div>\n\n          {/* Content Area */}\n          <div className=\"flex-1 overflow-y-auto px-6 py-6\">\n            {inventoryTab === 'buildings' && (\n              <div>\n                <h2 className=\"text-2xl font-medium text-white mb-6\">Your Buildings</h2>\n                \n                {purchasedCafes.length === 0 ? (\n                  <div className=\"text-center py-16\">\n                    <div className=\"text-6xl mb-4\">ðŸª</div>\n                    <p className=\"text-zinc-400 text-xl mb-6\">No buildings yet!</p>\n                    <button\n                      onClick={() => {\n                        setShowInventory(false);\n                        setShowCafeShop(true);\n                      }}\n                      className=\"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white font-semibold py-3 px-8 rounded-full text-lg transition\"\n                    >\n                      ðŸ›’ Shop for CafÃ©s\n                    </button>\n                  </div>\n                ) : (\n                  <div>\n                    {/* Buildings Grid */}\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 mb-8\">\n                      {purchasedCafes.map((cafeId) => {\n                        const cafe = cafeOptions.find(c => c.id === cafeId);\n                        if (!cafe) return null;\n                        const isSelected = selectedInventoryItem === cafeId;\n                        return (\n                          <div\n                            key={cafeId}\n                            onClick={() => setSelectedInventoryItem(isSelected ? null : cafeId)}\n                            className={`relative rounded-xl overflow-hidden cursor-pointer transition-all transform hover:scale-105 ${\n                              isSelected \n                                ? 'ring-4 ring-amber-400 ring-offset-2 ring-offset-zinc-800' \n                                : 'border-2 border-zinc-600 hover:border-amber-500/50'\n                            }`}\n                          >\n                            <img \n                              src={cafe.image} \n                              alt={cafe.name}\n                              className=\"w-full aspect-square object-cover bg-gradient-to-br from-indigo-900/80 via-purple-900/60 to-black/90\"\n                            />\n                            <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-3\">\n                              <p className=\"text-white font-semibold text-sm\">{cafe.name}</p>\n                            </div>\n                            {isSelected && (\n                              <div className=\"absolute top-2 right-2 bg-amber-400 text-black rounded-full p-1\">\n                                <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                                  <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                                </svg>\n                              </div>\n                            )}\n                          </div>\n                        );\n                      })}\n                      \n                      {/* Buy More Card */}\n                      <div\n                        onClick={() => {\n                          setShowInventory(false);\n                          setShowCafeShop(true);\n                        }}\n                        className=\"rounded-xl border-2 border-dashed border-zinc-600 hover:border-amber-500/50 cursor-pointer transition-all flex flex-col items-center justify-center aspect-square bg-zinc-800/50 hover:bg-zinc-800\"\n                      >\n                        <span className=\"text-4xl mb-2\">+</span>\n                        <span className=\"text-zinc-400 font-medium\">Buy More</span>\n                      </div>\n                    </div>\n\n                    {/* Action Button - only show when item selected */}\n                    {selectedInventoryItem && (\n                      <div className=\"flex justify-center mb-8\">\n                        <button\n                          onClick={() => {\n                            alert('ðŸ—ºï¸ M31 Map coming soon! Your cafÃ© is saved and ready to place.');\n                          }}\n                          className=\"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-400 hover:to-purple-400 text-white font-bold py-4 px-10 rounded-full text-xl transition shadow-lg shadow-blue-500/30\"\n                        >\n                          ðŸ—ºï¸ Place on M31 Map\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {inventoryTab === 'kokorobots' && (\n              <div className=\"text-center py-16\">\n                <div className=\"text-6xl mb-4\">ðŸ¤–</div>\n                <h2 className=\"text-2xl font-medium text-white mb-4\">Kokorobots Coming Soon!</h2>\n                <p className=\"text-zinc-400 max-w-md mx-auto\">\n                  Customize your Kokorobot's appearance â€” change hairstyles, suits, colors, and more!\n                </p>\n              </div>\n            )}\n\n          </div>\n\n          {/* Bottom Bar */}\n          <div className=\"flex items-center justify-between px-6 py-5 border-t border-zinc-700 bg-zinc-900/80\">\n            <button\n              onClick={() => {\n                alert('ðŸ¬ All Outposts hub coming soon! Practice at different locations.');\n              }}\n              className=\"text-amber-400 hover:text-amber-300 font-semibold text-lg transition flex items-center gap-2\"\n            >\n              ðŸ¬ All Outposts\n            </button>\n            <button\n              onClick={() => {\n                setShowInventory(false);\n                alert('âœ… Progress saved! Your coins and items are stored.');\n              }}\n              className=\"text-amber-400 hover:text-amber-300 font-semibold text-lg transition\"\n            >\n              Save & Exit\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;;AAEA;AACA;AAHA;;;;;AA8Be,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAY;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAQ;IAC1C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAkB;QACtE,OAAO;IACT;IACA,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAyB,EAAE;IAC/D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAoB;IAC5E,uBAAuB;IACvB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAuC;IACvF,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAgB;IAClF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAW,EAAE;IAEjE,qCAAqC;IACrC,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAC;IAC/D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAkE;IAClH,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAkE;IAC5H,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAmD;IAEzG,gCAAgC;IAChC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAE3D,wDAAwD;IACxD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IAEzD,4BAA4B;IAC5B,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,mCAAmC;IACnC,MAAM,mBAAmB,CAAC;QACxB,MAAM,cAAsC;YAAE,GAAG;YAAI,GAAG;YAAI,GAAG;YAAI,GAAG;YAAI,GAAG;QAAI;QACjF,OAAO,WAAW,CAAC,EAAE,IAAI;IAC3B;IAEA,gBAAgB;IAChB,MAAM,oBAAoB;IAE1B,MAAM,mBAAmB;QACvB,OAAO,IAAI,CAAC,mBAAmB,UAAU;IAC3C;IAEA,0BAA0B;IAC1B,MAAM,oBAAoB;QACxB,IAAI,CAAC,cAAc,CAAC,WAAW,QAAQ,CAAC,MAAM;YAC5C,cAAc;YACd;QACF;QAEA,IAAI;YACF,+DAA+D;YAC/D,MAAM,eAAe;gBACnB,OAAO;gBACP,aAAa;gBACb,WAAW,IAAI,OAAO,WAAW;gBACjC,QAAQ;YACV;YAEA,gBAAgB;YAChB,MAAM,WAAW,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,qBAAqB;YACtE,SAAS,IAAI,CAAC;YACd,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;YAEtD,kBAAkB;YAClB,cAAc;YAEd,8BAA8B;YAC9B,WAAW;gBACT,kBAAkB;YACpB,GAAG;QACL,EAAE,OAAO,KAAK;YACZ,cAAc;QAChB;IACF;IAEA,oCAAoC;IACpC,IAAA,kNAAS,EAAC;QACR;;IAgBF,GAAG,EAAE;IAEL,2CAA2C;IAC3C,IAAA,kNAAS,EAAC;QACR;;IASF,GAAG;QAAC;QAAO;QAAgB;KAAS;IAEpC,oDAAoD;IACpD,MAAM,cAAc;QAClB;YAAE,IAAI;YAAc,MAAM;YAAe,OAAO;YAAK,OAAO;QAAkB;QAC9E;YAAE,IAAI;YAAa,MAAM;YAAc,OAAO;YAAM,OAAO;QAAiB;QAC5E;YAAE,IAAI;YAAc,MAAM;YAAe,OAAO;YAAM,OAAO;QAAkB;QAC/E;YAAE,IAAI;YAAc,MAAM;YAAe,OAAO;YAAM,OAAO;QAAkB;QAC/E;YAAE,IAAI;YAAc,MAAM;YAAe,OAAO;YAAM,OAAO;QAAkB;KAChF;IAED,eAAe;IACf,MAAM,cAAc;QAClB;YAAE,IAAI;YAAW,OAAO;YAAK,OAAO;YAAS,OAAO;QAAU;QAC9D;YAAE,IAAI;YAAW,OAAO;YAAM,OAAO;YAAS,OAAO;YAAW,MAAM;QAAK;QAC3E;YAAE,IAAI;YAAO,OAAO;YAAM,OAAO;YAAS,OAAO;QAAW;KAC7D;IAED,aAAa;IACb,MAAM,YAAY;QAChB;YAAE,MAAM;YAAa,MAAM;QAAmB;QAC9C;YAAE,MAAM;YAAS,MAAM;QAA0B;QACjD;YAAE,MAAM;YAAc,MAAM;QAAkB;QAC9C;YAAE,MAAM;YAAc,MAAM;QAA0B;QACtD;YAAE,MAAM;YAAa,MAAM;QAAuB;QAClD;YAAE,MAAM;YAAS,MAAM;QAA8B;QACrD;YAAE,MAAM;YAAY,MAAM;QAAmB;KAC9C;IAED,mBAAmB;IACnB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC,CAAC;IACxC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAc,EAAE;IACxE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAqB,CAAC;IAEpE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAA2C,EAAE;IACzF,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAA+E;QAC3H,MAAM;QAAO,MAAM;QAAO,MAAM;QAAO,OAAO;QAAO,MAAM;IAC7D;IAEA,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACjE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAA0B;IAElE,kCAAkC;IAClC,MAAM,eAAe;QACnB,GAAG;YACD,OAAO;YACP,UAAU;YACV,cAAc;gBAAC;oBAAE,MAAM;oBAAa,MAAM;oBAAU,MAAM;oBAAe,OAAO;gBAAU;aAAE;YAC5F,WAAW;QACb;QACA,GAAG;YACD,OAAO;YACP,UAAU;YACV,cAAc;gBAAC;oBAAE,MAAM;oBAAc,MAAM;oBAAS,MAAM;oBAAU,OAAO;gBAAW;aAAE;YACxF,WAAW;QACb;QACA,GAAG;YACD,OAAO;YACP,UAAU;YACV,cAAc;gBACZ;oBAAE,MAAM;oBAAa,MAAM;gBAAQ;gBACnC;oBAAE,MAAM;oBAAS,MAAM;oBAAS,MAAM;gBAAM;gBAC5C;oBAAE,MAAM;oBAAS,MAAM;oBAAS,MAAM;gBAAQ;aAC/C;YACD,WAAW;QACb;IACF;IAEA,MAAM,qBAAqB,SAAS,IAAI,YAAY,CAAC,MAAmB,GAAG;IAE3E,gEAAgE;IAChE,IAAA,kNAAS,EAAC;QACR,IAAI,cAAc,SAAS;YACzB,WAAW,CAAC;YACZ,aAAa;YACb,cAAc;YACd,kBAAkB;YAElB,MAAM,SAAS,YAAY;gBACzB,WAAW,CAAA;oBACT,8CAA8C;oBAC9C,qEAAqE;oBACrE,MAAM,WAAW,OAAO,UAAU,GAAG;oBACrC,MAAM,SAAS,WAAW,OAAO,UAAU,GAAG,OAAO,OAAO,UAAU,GAAG;oBACzE,IAAI,QAAQ,QAAQ;wBAClB,cAAc;wBACd,aAAa;wBACb,yCAAyC;wBACzC,WAAW;4BACT,kBAAkB;4BAClB,WAAW,IAAM,cAAc,OAAO;wBACxC,GAAG;wBACH,OAAO;oBACT;oBACA,OAAO,OAAO;gBAChB;YACF,GAAG;YAEH,OAAO,IAAM,cAAc;QAC7B;IACF,GAAG;QAAC;KAAU;IAEd,kGAAkG;IAClG,MAAM,uBAAuB,CAAC;QAC5B,MAAM,WAAmB,EAAE;QAE3B,+CAA+C;QAC/C,MAAM,YAAY;YAAE,GAAG;YAAI,GAAG;YAAI,GAAG;YAAI,GAAG;YAAI,GAAG;QAAG;QACtD,MAAM,cAAc;YAAE,GAAG;YAAG,GAAG;YAAG,GAAG;YAAG,GAAG;YAAG,GAAG;QAAE;QACnD,6BAA6B;QAC7B,MAAM,uBAAuB;YAAE,GAAG;YAAK,GAAG;YAAM,GAAG;YAAK,GAAG;YAAM,GAAG;QAAI;QAExE,MAAM,UAAU,SAAS,CAAC,aAAuC,IAAI;QACrE,MAAM,aAAa,WAAW,CAAC,aAAyC,IAAI;QAC5E,MAAM,aAAa,oBAAoB,CAAC,aAAkD,IAAI;QAE9F,6DAA6D;QAC7D,MAAM,cAAc,sCAAgC,0BAAoB;QACxE,MAAM,aAAa,cAAc,CAAC,UAAU,CAAC;QAE7C,IAAI,SAAS;QAEb,IAAK,IAAI,MAAM,GAAG,MAAM,SAAS,MAAO;YACtC,gDAAgD;YAChD,MAAM,iBAAiB,KAAK,GAAG,CAAC,MAAM,UAAU,KAAK,CAAC,UAAU,CAAC;YACjE,MAAM,qBAAqB,IAAK,iBAAiB;YAEjD,sBAAsB;YACtB,MAAM,oBAAoB,MAAM,KAAK,MAAM,KAAK;YAChD,MAAM,eAAe,MAAO,MAAM,qBAAqB,oBAAoB;YAE3E,oEAAoE;YACpE,MAAM,OAAO,AAAC,MAAM,aAAe,cAAc,IAAK;YAEtD,oCAAoC;YACpC,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,IAAK;gBACnC,MAAM,aAAa,eAAe,CAAC,MAAM,AAAC,IAAI,aAAc,GAAG;gBAC/D,SAAS,IAAI,CAAC;oBACZ,IAAI;oBACJ,GAAG,OAAO,CAAC,KAAK,MAAM,KAAK,KAAK,CAAC;oBACjC,GAAG,CAAC;oBACJ,UAAU,KAAK,MAAM,KAAK;oBAC1B,OAAO,OAAO,KAAK,MAAM,KAAK;oBAC9B,OAAO,AAAC,IAAI,OAAS,KAAK,MAAM,KAAK;oBACrC,UAAU;oBACV,WAAW;gBACb;YACF;QACF;QAEA,iBAAiB;QACjB,qBAAqB;QACrB,WAAW,IAAM,qBAAqB,QAAQ;IAChD;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,MAAM,kBAAkB,OAAO,eAAe,CAAC,SAAS;YACxD,UAAU;QACZ;QAEA;QACA,OAAO,eAAe,CAAC,eAAe,GAAG;IAC3C,GAAG,EAAE;IAEL,oDAAoD;IACpD,0EAA0E;IAE1E,MAAM,WAAW;QACjB,qCAAqC;QACrC,MAAM,QAAQ,IAAA,sIAAe,EAAC,QAAQ;QACtC,IAAI,OAAO,OAAO;QAElB,sDAAsD;QACtD,MAAM,YAAY;YAAC;YAAY;YAAS;YAAS;YAAS;YAAS;YAAY;YAAQ;SAAQ;QAE/F,KAAK,MAAM,QAAQ,UAAW;YAC5B,MAAM,IAAI,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,QAAQ,CAAC;YAC3C,IAAI,GAAG,OAAO;QAChB;QAEA,MAAM,eAAe,OAAO,IAAI,CAAC,CAAA,IAC/B,EAAE,IAAI,CAAC,UAAU,CAAC,SAClB,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QAGjC,OAAO,gBAAgB,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,UAAU,CAAC,UAAU,MAAM,CAAC,EAAE;IAC/E;IAEE,MAAM,QAAQ,CAAC,MAAc;QAC3B,iDAAiD;QACjD,IAAI,WAAW;YACb,MAAM,QAAQ,IAAI,MAAM;YACxB,MAAM,MAAM,GAAG;YACf,iBAAiB;YACjB,MAAM,OAAO,GAAG,IAAM,iBAAiB;YACvC,MAAM,OAAO,GAAG,CAAC;gBACf,QAAQ,KAAK,CAAC,yBAAyB,WAAW;gBAClD,iBAAiB;gBACjB,iCAAiC;gBACjC,IAAI,qBAAqB,QAAQ;oBAC/B,MAAM,YAAY,IAAI,yBAAyB;oBAC/C,MAAM,QAAQ;oBACd,IAAI,OAAO,UAAU,KAAK,GAAG;oBAC7B,UAAU,IAAI,GAAG;oBACjB,UAAU,KAAK,GAAG;oBAClB,iBAAiB;oBACjB,UAAU,KAAK,GAAG,IAAM,iBAAiB;oBACzC,OAAO,eAAe,CAAC,KAAK,CAAC;gBAC/B;YACF;YACA,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC;gBAClB,QAAQ,KAAK,CAAC,sBAAsB;gBACpC,iBAAiB;YACnB;YACA;QACF;QAEA,kBAAkB;QAClB,IAAI,qBAAqB,QAAQ;YAC/B,OAAO,eAAe,CAAC,MAAM;YAC7B,MAAM,YAAY,IAAI,yBAAyB;YAE/C,MAAM,QAAQ;YACd,IAAI,OAAO,UAAU,KAAK,GAAG;YAE7B,UAAU,IAAI,GAAG;YACjB,UAAU,KAAK,GAAG;YAClB,UAAU,MAAM,GAAG;YAEnB,iBAAiB;YACjB,UAAU,KAAK,GAAG,IAAM,iBAAiB;YACzC,OAAO,eAAe,CAAC,KAAK,CAAC;QAC/B;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,wCAAwC;QACxC,MAAM,cAAc,cAAc;QAClC,MAAM,SAAS,YAAY,CAAC,YAAyB;QACrD,IAAI,CAAC,QAAQ;QAEb,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,YAAY,cAAc,EAAE,OAAO,KAAK,EAAE;QAEvE,2CAA2C;QAC3C,IAAI,UAAU;YACZ,SAAS,KAAK;QAChB;QAEA,MAAM,QAAQ,IAAI;QAClB,MAAM,OAAO,GAAG;QAChB,MAAM,GAAG,GAAG,OAAO,KAAK;QACxB,MAAM,MAAM,GAAG;QACf,iBAAiB;QAEjB,MAAM,SAAS,GAAG;YAChB,QAAQ,GAAG,CAAC;YACZ,MAAM,IAAI,GAAG,IAAI,CAAC;gBAChB,QAAQ,GAAG,CAAC;YACd,GAAG,KAAK,CAAC,CAAA;gBACP,QAAQ,KAAK,CAAC,gBAAgB;gBAC9B,SAAS,OAAO,QAAQ;YAC1B;QACF;QAEA,MAAM,OAAO,GAAG;YACd,QAAQ,GAAG,CAAC;YACZ,iBAAiB;YACjB,gEAAgE;YAChE,+BAA+B;YAC/B,IAAI,YAAY,cAAc;gBAC5B,SAAS,IAAI,GAAG,KAAK,CAAC,KAAO;YAC/B;QACF;QAEA,MAAM,OAAO,GAAG,CAAC;YACf,QAAQ,KAAK,CAAC,oCAAoC;YAClD,MAAM,OAAO,KAAK,EACf,IAAI,CAAC,CAAA;gBACJ,QAAQ,GAAG,CAAC,iBAAiB,IAAI,MAAM,EAAE,IAAI,UAAU;gBACvD,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,SAAS,OAAO,QAAQ;gBAC1B;YACF,GACC,KAAK,CAAC,CAAA;gBACL,QAAQ,KAAK,CAAC,sBAAsB;gBACpC,SAAS,OAAO,QAAQ;YAC1B;QACJ;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,+FAA+F;QAC/F,IAAI,KAAK,GAAG,OAAO;QACnB,IAAI,MAAM,GAAG,OAAO;QACpB,OAAO,2BAA2B,iBAAiB;IACrD;IAEA,uEAAuE;IACvE,MAAM,uBAAuB,CAAC;QAC5B,8CAA8C;QAC9C,IAAI,CAAC,gBAAgB,cAAc;YACjC,QAAQ,GAAG,CAAC;YACZ;QACF;QAEA,uDAAuD;QACvD,IAAI,UAAU;YACZ,SAAS,KAAK;YACd,SAAS,WAAW,GAAG;YACvB,SAAS,GAAG,GAAG;QACjB;QAEA,+DAA+D;QAC/D,IAAI,OAAO,aAAa,aAAa;YACnC,SAAS,gBAAgB,CAAC,SAAS,OAAO,CAAC,CAAC;gBAC1C,MAAM,UAAU;gBAChB,IAAI,QAAQ,GAAG,IAAI,QAAQ,GAAG,CAAC,QAAQ,CAAC,gBAAgB;oBACtD,QAAQ,KAAK;oBACb,QAAQ,WAAW,GAAG;oBACtB,QAAQ,GAAG,GAAG;gBAChB;YACF;QACF;QAEA,MAAM,cAAc,OAAO,eAAe,WAAW,aAAa;QAClE,MAAM,YAAY,iBAAiB;QAEnC,QAAQ,GAAG,CAAC,CAAC,4BAA4B,EAAE,YAAY,EAAE,EAAE,WAAW;QAEtE,oCAAoC;QACpC;QAEA,MAAM,QAAQ,IAAI,MAAM;QACxB,MAAM,IAAI,GAAG;QACb,MAAM,MAAM,GAAG;QACf,MAAM,IAAI,GAAG,KAAK,CAAC,KAAO;QAC1B,YAAY;QACZ,gBAAgB;QAChB,gBAAgB;IAClB;IAEA,4BAA4B;IAC5B,MAAM,sBAAsB;QAC1B,QAAQ,GAAG,CAAC;QACZ,IAAI,UAAU;YACZ,SAAS,KAAK;YACd,SAAS,WAAW,GAAG;YACvB,IAAI;gBAAE,SAAS,GAAG,GAAG;YAAI,EAAE,OAAM,GAAG,CAAC;QACvC;QACA,6DAA6D;QAC7D,IAAI,OAAO,aAAa,aAAa;YACnC,SAAS,gBAAgB,CAAC,SAAS,OAAO,CAAC,CAAC;gBAC1C,MAAM,UAAU;gBAChB,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,QAAQ,CAAC,kBAAkB,QAAQ,GAAG,CAAC,QAAQ,CAAC,QAAQ,GAAG;oBACzF,QAAQ,KAAK;oBACb,QAAQ,WAAW,GAAG;oBACtB,IAAI;wBAAE,QAAQ,GAAG,GAAG;oBAAI,EAAE,OAAM,GAAG,CAAC;gBACtC;YACF;QACF;IACA,qEAAqE;IACvE;IAEA,iEAAiE;IACjE,MAAM,uBAAuB;QAC3B,QAAQ,GAAG,CAAC;QACZ,IAAI,UAAU;YACZ,SAAS,KAAK;QAChB;IACF;IAEA,kCAAkC;IAClC,MAAM,wBAAwB;QAC5B,QAAQ,GAAG,CAAC;QACZ,IAAI,YAAY,cAAc;YAC5B,SAAS,IAAI,GAAG,KAAK,CAAC,KAAO;QAC/B;IACF;IAEA,MAAM,WAAW,CAAC;QAChB,IAAI,qBAAqB,QAAQ;YAC/B,OAAO,eAAe,CAAC,MAAM;YAC7B,MAAM,YAAY,IAAI,yBAAyB;YAC/C,UAAU,IAAI,GAAG;YACjB,MAAM,QAAQ;YACd,IAAI,OAAO,UAAU,KAAK,GAAG;YAC7B,UAAU,IAAI,GAAG;YACjB,UAAU,KAAK,GAAG;YAClB,UAAU,MAAM,GAAG;YACnB,iBAAiB;YACjB,UAAU,KAAK,GAAG;gBAChB,iBAAiB;gBACjB,8CAA8C;gBAC9C,IAAI,YAAY,cAAc;oBAC5B,SAAS,IAAI,GAAG,KAAK,CAAC,KAAO;gBAC/B;YACF;YACA,OAAO,eAAe,CAAC,KAAK,CAAC;QAC/B;IACF;IAEA,MAAM,gBAAgB;QACpB,IAAI,SAAS,IAAI;YACf,SAAS,CAAA,OAAQ,OAAO;YACxB,kBAAkB;QACpB;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,cAAc;YAChB,iBAAiB;YACjB,IAAI,UAAU;gBACZ,SAAS,KAAK;YAChB;YACA,+BAA+B;YAC/B,IAAI,OAAO,aAAa,aAAa;gBACnC,SAAS,gBAAgB,CAAC,SAAS,OAAO,CAAC,CAAC;oBAC1C,MAAM,UAAU;oBAChB,IAAI,QAAQ,GAAG,IAAI,QAAQ,GAAG,CAAC,QAAQ,CAAC,gBAAgB;wBACtD,QAAQ,KAAK;oBACf;gBACF;YACF;YACA,gBAAgB;QAClB,OAAO;YACL,wCAAwC;YACxC,IAAI,YAAY,SAAS,GAAG,EAAE;gBAC5B,SAAS,IAAI,GAAG,KAAK,CAAC;oBACpB,oCAAoC;oBACpC,MAAM,YAAY,iBAAiB;oBACnC,MAAM,QAAQ,IAAI,MAAM;oBACxB,MAAM,IAAI,GAAG;oBACb,MAAM,MAAM,GAAG;oBACf,MAAM,IAAI,GAAG,KAAK,CAAC,KAAO;oBAC1B,YAAY;gBACd;YACF,OAAO;gBACL,qCAAqC;gBACrC,MAAM,YAAY,iBAAiB;gBACnC,MAAM,QAAQ,IAAI,MAAM;gBACxB,MAAM,IAAI,GAAG;gBACb,MAAM,MAAM,GAAG;gBACf,MAAM,IAAI,GAAG,KAAK,CAAC,KAAO;gBAC1B,YAAY;YACd;YACA,gBAAgB;QAClB;IACF;IAEA,MAAM,YAAY;QAChB,aAAa;QACb,kBAAkB;QAClB,aAAa;QAEb,iCAAiC;QACjC,MAAM,eAAe,YAAY;YAC/B,WAAW,CAAA;gBACT,MAAM,SAAS,OAAO,UAAU,GAAG,IAAI;gBACvC,IAAI,QAAQ,QAAQ;oBAClB,cAAc;oBACd;oBACA,OAAO;gBACT;gBACA,OAAO,OAAO;YAChB;QACF,GAAG;IACL;IAEA,MAAM,sBAAsB;QAC1B,aAAa;QAEb,IAAI,QAAQ;QACZ,IAAI,UAAU;QAEd,MAAM,iBAAiB,YAAY;YACjC,SAAS;YACT,WAAW;YACX,eAAe;YACf,iBAAiB;YAEjB,IAAI,SAAS,GAAG;gBACd,cAAc;gBACd,gBAAgB;gBAChB,aAAa;gBACb,gBAAgB;gBAChB;gBACA,qBAAqB,IAAI,0BAA0B;YACrD;QACF,GAAG;IACL;IAEA,MAAM,cAAc;QAClB;IACF;IAEA,MAAM,aAAa;QACjB,IAAI,CAAC,oBAAoB;QACzB,IAAI,YAAY,IAAI,IAAI,YAAY,IAAI,IAAI,iBAAiB,MAAM,GAAG,mBAAmB,SAAS,EAAE;YAClG,oBAAoB;mBAAI;gBAAkB;aAAyB;YACnE,eAAe,CAAC;QAClB;IACF;IAEA,MAAM,kBAAkB,CAAC;QACvB,oBAAoB,iBAAiB,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IAC9D;IAEA,MAAM,cAAc;QAClB,IAAI,CAAC,oBAAoB;QAEzB,MAAM,YAAY,CAAC,QACjB,MAAM,GAAG,CAAC,CAAA,IAAK,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,IAAI,IAAI,OAAO,CAAC,EAAE,EAAE,KAAK,IAAI,QAAQ,EAAE,IAAI,GAAG,IAAI,CAAC;QAE7F,MAAM,YAAY,UAAU,sBAAsB,UAAU,mBAAmB,YAAY;QAE3F,IAAI,WAAW;YACb,+CAA+C;YAC/C;YACA,yDAAyD;YACzD,MAAM,aAAa,UAAU,IAAI,KAAK,UAAU,IAAI,KAAK;YACzD,2BAA2B;YAC3B,oBAAoB,CAAA,OAAQ,OAAO;YACnC,yBAAyB;YACzB,UAAU,yBAAyB;gBACjC,SAAS,CAAA,OAAQ,OAAO;gBACxB,qBAAqB;gBACrB,MAAM,WAA4C;oBAChD,GAAG;wBAAE,OAAO;oBAAa;oBACzB,GAAG;wBAAE,OAAO;oBAAa;oBACzB,GAAG;wBAAE,OAAO;wBAAc,UAAU;oBAAgC;oBACpE,GAAG;wBAAE,OAAO;oBAAc;oBAC1B,GAAG;wBAAE,OAAO;oBAAoB;gBAClC;gBAEA,mBAAmB,QAAQ,CAAC,MAAM,IAAI;oBAAE,OAAO;gBAAa;gBAC5D,aAAa;YACf;QAEF,OAAO;YACL,6DAA6D;YAC7D,UAAU;YACV,qBAAqB;YACrB,oBAAoB,EAAE;YACtB,eAAe,CAAC;QAClB;IACF;IAEA,MAAM,cAAc;QAClB,SAAS;QACT,aAAa;QACb,gBAAgB;QAChB,kBAAkB;QAClB,eAAe;YAAE,MAAM;YAAO,MAAM;YAAO,MAAM;YAAO,OAAO;YAAO,MAAM;QAAM;QAClF,sBAAsB,CAAC;QACvB,qBAAqB;QACrB,MAAM,WAAW;QACjB,cAAc;YAAC;gBAAE,MAAM;gBAAO,MAAM;YAAS;SAAE;QAC/C,UAAU;IACZ;IAEA,MAAM,YAAY,CAAC,WAAmB;QACpC,2CAA2C;QAC3C,IAAI,UAAU;YACZ,SAAS,KAAK;QAChB;QAEA,MAAM,QAAQ,IAAI,MAAM;QACxB,MAAM,MAAM,GAAG;QACf,iBAAiB;QAEjB,sDAAsD;QACtD,MAAM,iBAAiB,UAAU,QAAQ,CAAC,iBAAiB,UAAU,QAAQ,CAAC;QAE9E,MAAM,SAAS,GAAG;YAChB,MAAM,IAAI,GAAG,KAAK,CAAC,CAAA;gBACjB,QAAQ,KAAK,CAAC,gBAAgB;gBAC9B,iBAAiB;YACnB;QACF;QAEA,MAAM,OAAO,GAAG;YACd,iBAAiB;YACjB,IAAI,OAAO;YACX,yDAAyD;YACzD,IAAI,YAAY,gBAAgB,CAAC,gBAAgB;gBAC/C,SAAS,IAAI,GAAG,KAAK,CAAC,KAAO;YAC/B;QACF;QAEA,MAAM,OAAO,GAAG;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,iBAAiB;QACnB;IACF;IAEA,gDAAgD;IAChD,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAA+E,CAAC;IAC5I,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAE3D,MAAM,qBAAqB;QACzB,IAAI,CAAC,YAAY,IAAI,IAAI;QAEzB,MAAM,QAAQ,YAAY,WAAW;QACrC,cAAc,CAAA,OAAQ;mBAAI;gBAAM;oBAAE,MAAM;oBAAU,MAAM;gBAAY;aAAE;QACtE,eAAe;QAEf,6CAA6C;QAC7C,IAAI,mBAAmB;YACrB,IAAI,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,oBAAoB,MAAM,QAAQ,CAAC,iBAAiB,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,iBAAiB,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,OAAO;gBACpc,MAAM,WAAW;gBACjB,cAAc,CAAA,OAAQ;2BAAI;wBAAM;4BAAE,MAAM;4BAAO,MAAM;wBAAS;qBAAE;gBAChE,yCAAyC;gBACzC;gBACA,2BAA2B;gBAC3B,oBAAoB,CAAA,OAAQ,OAAO;gBACnC,UAAU,yBAAyB;oBACjC,SAAS,CAAA,OAAQ,OAAO;oBACxB,qBAAqB;oBACrB,mBAAmB;wBAAE,OAAO;oBAAc;oBAC1C,aAAa;gBACf;gBACA;YACF,OAAO,IAAI,MAAM,QAAQ,CAAC,SAAS,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,UAAU;gBAC9I,qBAAqB;gBACrB,eAAe;oBAAE,MAAM;oBAAO,MAAM;oBAAO,MAAM;oBAAO,OAAO;oBAAO,MAAM;gBAAM;gBAClF,sBAAsB,CAAC;gBACvB,MAAM,WAAW;gBACjB,cAAc,CAAA,OAAQ;2BAAI;wBAAM;4BAAE,MAAM;4BAAO,MAAM;wBAAS;qBAAE;gBAChE,UAAU;gBACV;YACF;QACF;QAEA,kFAAkF;QAClF,IAAI,MAAM,QAAQ,CAAC,uBAAuB,MAAM,QAAQ,CAAC,mBAAmB,MAAM,QAAQ,CAAC,iBAAiB,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,cAAc;YACtK,MAAM,WAAW;YACjB,cAAc,CAAA,OAAQ;uBAAI;oBAAM;wBAAE,MAAM;wBAAO,MAAM;oBAAS;iBAAE;YAChE,UAAU;YACV;QACF;QAEA,+EAA+E;QAC/E,IAAI,MAAM,QAAQ,CAAC,SAAS,MAAM,QAAQ,CAAC,kBAAkB,MAAM,QAAQ,CAAC,YAAY,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,oBAAoB,MAAM,QAAQ,CAAC,kBAAkB,MAAM,QAAQ,CAAC,YAAY,MAAM,QAAQ,CAAC,YAAY;YAC5O,MAAM,WAAW;YACjB,cAAc,CAAA,OAAQ;uBAAI;oBAAM;wBAAE,MAAM;wBAAO,MAAM;oBAAS;iBAAE;YAChE,UAAU;YACV;QACF;QAEA,MAAM,WAAW;YAAE,GAAG,WAAW;QAAC;QAClC,MAAM,aAAa;YAAE,GAAG,kBAAkB;QAAC;QAE3C,8CAA8C;QAC9C,MAAM,aAAa,MAAM,QAAQ,CAAC,kBAAkB,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC;QAEhI,mFAAmF;QACnF,MAAM,gBAAgB;YAAC;YAAgB;YAAQ;YAAU;YAAa;YAAa;YAAe;YAAU;YAAQ;YAAO;YAAU;SAAgB;QACrJ,MAAM,kBAAkB,cAAc,IAAI,CAAC,CAAA,QAAS,MAAM,QAAQ,CAAC;QAEnE,IAAI,mBAAmB,CAAC,YAAY,IAAI,EAAE;YACxC,MAAM,WAAW;YACjB,cAAc,CAAA,OAAQ;uBAAI;oBAAM;wBAAE,MAAM;wBAAO,MAAM;oBAAS;iBAAE;YAChE,UAAU;YACV,WAAW,IAAM,YAAY,OAAO;YACpC;QACF;QAEA,oBAAoB;QACpB,IAAI,MAAM,QAAQ,CAAC,cAAc;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAa,OACnF,IAAI,MAAM,QAAQ,CAAC,eAAe;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAc,OAC1F,IAAI,MAAM,QAAQ,CAAC,UAAU;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAS,OAChF,IAAI,MAAM,QAAQ,CAAC,eAAe;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAc,OAC1F,IAAI,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,aAAa;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAa,OACtH,IAAI,MAAM,QAAQ,CAAC,UAAU;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAS,OAChF,IAAI,MAAM,QAAQ,CAAC,aAAa;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAY;QAE3F,cAAc;QACd,IAAI,MAAM,QAAQ,CAAC,UAAU;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAS,OAC3E,IAAI,MAAM,QAAQ,CAAC,WAAW;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAU,OAClF,IAAI,MAAM,QAAQ,CAAC,UAAU;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAS;QAErF,qBAAqB;QACrB,IAAI,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,SAAS;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAQ,OAC5H,IAAI,MAAM,QAAQ,CAAC,QAAQ;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAO;QAEjF,sBAAsB;QACtB,IAAI,MAAM,QAAQ,CAAC,YAAY;YAAE,SAAS,KAAK,GAAG;YAAM,WAAW,KAAK,GAAG;QAAW,OACjF,IAAI,MAAM,QAAQ,CAAC,YAAY;YAAE,SAAS,KAAK,GAAG;YAAM,WAAW,KAAK,GAAG;QAAW,OACtF,IAAI,MAAM,QAAQ,CAAC,aAAa;YAAE,SAAS,KAAK,GAAG;YAAM,WAAW,KAAK,GAAG;QAAY,OACxF,IAAI,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,UAAU;YAAE,SAAS,KAAK,GAAG;YAAM,WAAW,KAAK,GAAG;QAAQ;QAEnJ,yCAAyC;QACzC,MAAM,eAAe;YAAC;YAAa;SAAW;QAC9C,IAAI,aAAa,QAAQ,CAAC,WAAW,IAAI,IAAI,KAAK;YAChD,SAAS,IAAI,GAAG;YAChB,WAAW,IAAI,GAAG;QACpB;QAEA,yCAAyC;QACzC,IAAI,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,YAAY,MAAM,QAAQ,CAAC,cAAe,UAAU,QAAS,MAAM,UAAU,CAAC,UAAU,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,eAAe;YAClT,SAAS,IAAI,GAAG;YAChB,WAAW,IAAI,GAAG;QACpB,OAAO,IAAI,MAAM,QAAQ,CAAC,QAAQ;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAY,OACnF,IAAI,MAAM,QAAQ,CAAC,WAAW;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAe,OACvF,IAAI,MAAM,QAAQ,CAAC,UAAU;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAc,OACrF,IAAI,MAAM,QAAQ,CAAC,SAAS;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAa,OACnF,IAAI,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,YAAY;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAe,OACjJ,IAAI,MAAM,QAAQ,CAAC,QAAQ;YAAE,SAAS,IAAI,GAAG;YAAM,WAAW,IAAI,GAAG;QAAY;QAEtF,eAAe;QACf,sBAAsB;QAEtB,WAAW;YACT,IAAI,WAAW;YACf,IAAI,YAAY;YAEhB,sCAAsC;YACtC,IAAI,cAAc,CAAC,SAAS,IAAI,EAAE;gBAChC,IAAI,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,YAAY,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,QAAQ;oBACrI,WAAW;oBACX,cAAc,CAAA,OAAQ;+BAAI;4BAAM;gCAAE,MAAM;gCAAO,MAAM;4BAAS;yBAAE;oBAChE,UAAU;oBACV;gBACF;YACF;YAEA,IAAI,CAAC,SAAS,IAAI,EAAE;gBAClB,WAAW;gBACX,YAAY;YACd,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;gBACzB,WAAW;gBACX,YAAY;YACd,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;gBACzB,WAAW;gBACX,YAAY;YACd,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;gBACzB,WAAW;gBACX,YAAY;YACd,OAAO;gBACL,iDAAiD;gBACjD,MAAM,WAAW,WAAW,IAAI,KAAK,SAAS,KAAK,CAAC,MAAM,EAAE,WAAW,IAAI,EAAE;gBAC7E,MAAM,YAAY,WAAW,KAAK,IAAI,WAAW,KAAK,KAAK,SAAS,CAAC,CAAC,EAAE,WAAW,KAAK,EAAE,GAAG;gBAC7F,WAAW,CAAC,YAAY,EAAE,WAAW,IAAI,CAAC,CAAC,EAAE,WAAW,IAAI,GAAG,UAAU,CAAC,EAAE,WAAW,IAAI,GAAG,SAAS,2CAA2C,CAAC;gBACnJ,qBAAqB;YACvB;YAEA,cAAc,CAAA,OAAQ;uBAAI;oBAAM;wBAAE,MAAM;wBAAO,MAAM;oBAAS;iBAAE;YAChE,IAAI,WAAW,UAAU;QAC3B,GAAG;IACL;IAEA,MAAM,cAAc;QAClB,SAAS;QACT,aAAa;QACb,gBAAgB;QAChB,eAAe;YAAE,MAAM;YAAO,MAAM;YAAO,MAAM;YAAO,MAAM;YAAO,OAAO;QAAM;QAClF,sBAAsB,CAAC;QACvB,eAAe;QACf,qBAAqB;QACrB,yBAAyB;QACzB,oBAAoB;QACpB,kBAAkB,EAAE;QACpB,UAAU;IACZ;IAEA,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAA+E;QAC3H,MAAM;QAAO,MAAM;QAAO,MAAM;QAAO,MAAM;QAAO,OAAO;IAC7D;IAEA,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,iNAAQ,EAA+E,CAAC;IAC5I,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAC;IAC3D,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAC;IAEnE,MAAM,iBAAiB;QACrB,IAAI,CAAC,CAAC,6BAA6B,MAAM,KAAK,CAAC,CAAC,uBAAuB,MAAM,GAAG;YAC9E,MAAM;YACN;QACF;QAEA,6BAA6B;QAC7B,IAAI,UAAU;YACZ,SAAS,KAAK;QAChB;QAEA,MAAM,oBAAoB,AAAC,OAAe,uBAAuB,IAAI,AAAC,OAAe,iBAAiB;QACtG,MAAM,cAAc,IAAI;QAExB,YAAY,UAAU,GAAG;QACzB,YAAY,cAAc,GAAG;QAC7B,YAAY,IAAI,GAAG;QAEnB,mBAAmB;QACnB,oBAAoB;QACpB,kBAAkB,EAAE;QACpB,yBAAyB;QAEzB,IAAI;QAEJ,YAAY,QAAQ,GAAG,CAAC;YACtB,aAAa;YACb,MAAM,aAAa,MAAM,IAAI,CAAC,MAAM,OAAO,EACxC,GAAG,CAAC,CAAC,SAAgB,MAAM,CAAC,EAAE,CAAC,UAAU,EACzC,IAAI,CAAC;YACR,oBAAoB;YAEpB,gBAAgB,WAAW;gBACzB,YAAY,IAAI;gBAChB,eAAe;YACjB,GAAG;QACL;QAEA,YAAY,OAAO,GAAG;YACpB,mBAAmB;YACnB,IAAI,YAAY,cAAc;gBAC5B,SAAS,IAAI,GAAG,KAAK,CAAC,KAAO;YAC/B;QACF;QACA,YAAY,KAAK,GAAG;YAClB,mBAAmB;YACnB,IAAI,YAAY,cAAc;gBAC5B,SAAS,IAAI,GAAG,KAAK,CAAC,KAAO;YAC/B;QACF;QACA,YAAY,KAAK;QAEjB,WAAW;YACT,IAAI,iBAAiB;gBACnB,YAAY,IAAI;YAClB;QACF,GAAG;IACL;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,QAAQ,WAAW,WAAW;QACpC,MAAM,WAAW;YAAE,GAAG,WAAW;QAAC;QAClC,MAAM,aAAa;YAAE,GAAG,kBAAkB;QAAC;QAC3C,IAAI,QAAQ;QAEZ,oBAAoB;QACpB,IAAI,CAAC,SAAS,IAAI,EAAE;YAClB,IAAI,MAAM,QAAQ,CAAC,cAAc;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAa,OACnF,IAAI,MAAM,QAAQ,CAAC,eAAe;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAc,OAC1F,IAAI,MAAM,QAAQ,CAAC,UAAU;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAS,OAChF,IAAI,MAAM,QAAQ,CAAC,eAAe;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAc,OAC1F,IAAI,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,aAAa;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAa,OACtH,IAAI,MAAM,QAAQ,CAAC,UAAU;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAS,OAChF,IAAI,MAAM,QAAQ,CAAC,aAAa;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAY;QAC7F;QAEA,cAAc;QACd,IAAI,CAAC,SAAS,IAAI,EAAE;YAClB,IAAI,MAAM,QAAQ,CAAC,UAAU;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAS,OAC3E,IAAI,MAAM,QAAQ,CAAC,WAAW;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAU,OAClF,IAAI,MAAM,QAAQ,CAAC,UAAU;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAS;QACvF;QAEA,qBAAqB;QACrB,IAAI,CAAC,SAAS,IAAI,EAAE;YAClB,IAAI,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,UAAU,MAAM,QAAQ,CAAC,SAAS;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAQ,OAC5H,IAAI,MAAM,QAAQ,CAAC,QAAQ;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAO;QACnF;QAEA,sBAAsB;QACtB,IAAI,CAAC,SAAS,KAAK,EAAE;YACnB,IAAI,MAAM,QAAQ,CAAC,YAAY;gBAAE,SAAS,KAAK,GAAG;gBAAM,WAAW,KAAK,GAAG;YAAW,OACjF,IAAI,MAAM,QAAQ,CAAC,YAAY;gBAAE,SAAS,KAAK,GAAG;gBAAM,WAAW,KAAK,GAAG;YAAW,OACtF,IAAI,MAAM,QAAQ,CAAC,aAAa;gBAAE,SAAS,KAAK,GAAG;gBAAM,WAAW,KAAK,GAAG;YAAY,OACxF,IAAI,MAAM,QAAQ,CAAC,eAAe,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,UAAU;gBAAE,SAAS,KAAK,GAAG;gBAAM,WAAW,KAAK,GAAG;YAAQ,OAE9I,IAAI,SAAS,IAAI,IAAI,CAAC,MAAM,QAAQ,CAAC,cAAc,CAAC,MAAM,QAAQ,CAAC,cAAc,CAAC,MAAM,QAAQ,CAAC,aAAa;gBACjH,SAAS,KAAK,GAAG;gBACjB,WAAW,KAAK,GAAG;YACrB;QACF;QAEA,yCAAyC;QACzC,MAAM,eAAe;YAAC;YAAa;SAAW;QAC9C,IAAI,aAAa,QAAQ,CAAC,WAAW,IAAI,IAAI,KAAK;YAChD,SAAS,IAAI,GAAG;YAChB,WAAW,IAAI,GAAG;QACpB;QAEA,sEAAsE;QACtE,MAAM,qBAAqB;YAAC;YAAS;YAAc;YAAa;SAAQ;QACxE,IAAI,CAAC,SAAS,IAAI,EAAE;YAClB,gCAAgC;YAChC,IAAI,MAAM,QAAQ,CAAC,QAAQ;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAY,OAC5E,IAAI,MAAM,QAAQ,CAAC,WAAW;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAe,OACvF,IAAI,MAAM,QAAQ,CAAC,UAAU;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAc,OACrF,IAAI,MAAM,QAAQ,CAAC,SAAS;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAa,OACnF,IAAI,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,YAAY;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAe,OACjJ,IAAI,MAAM,QAAQ,CAAC,QAAQ;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAY,OACjF,IAAI,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,aAAa,MAAM,QAAQ,CAAC,YAAY;gBAAE,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAAc,OAEhJ,IAAI,CAAC,MAAM,QAAQ,CAAC,cAAc,MAAM,QAAQ,CAAC,YAAY,MAAM,QAAQ,CAAC,WAAW,KAAK,CAAC,mBAAmB,QAAQ,CAAC,WAAW,IAAI,IAAI,KAAK;gBACpJ,SAAS,IAAI,GAAG;gBAAM,WAAW,IAAI,GAAG;YAC1C;QACF;QAEA,eAAe;QACf,sBAAsB;QACtB,kBAAkB,CAAA,OAAQ,OAAO;QAEjC,yCAAyC;QACzC,IAAI,WAAW;QACf,IAAI,YAAY;QAEhB,IAAI,CAAC,SAAS,IAAI,EAAE;YAClB,WAAW;YACX,YAAY;QACd,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;YACzB,WAAW;YACX,YAAY;QACd,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;YACzB,WAAW;YACX,YAAY;QACd,OAAO,IAAI,CAAC,SAAS,IAAI,EAAE;YACzB,WAAW,CAAC,EAAE,EAAE,WAAW,IAAI,CAAC,oEAAoE,CAAC;YACrG,YAAY;QACd;QAEA,IAAI,UAAU;YACZ,qCAAqC;YACrC,yBAAyB;YACzB,kBAAkB;gBAAC;aAAS;YAC5B,UAAU;QACZ,OAAO;YACL,wCAAwC;YACxC,qBAAqB;YACrB,kBAAkB,EAAE;YACpB,MAAM,WAAW,WAAW,IAAI,KAAK,SAAS,KAAK,CAAC,MAAM,EAAE,WAAW,IAAI,EAAE;YAC7E,MAAM,YAAY,WAAW,KAAK,IAAI,WAAW,KAAK,KAAK,SAAS,CAAC,CAAC,EAAE,WAAW,KAAK,EAAE,GAAG;YAC7F,yBAAyB,CAAC,aAAa,EAAE,WAAW,IAAI,CAAC,CAAC,EAAE,WAAW,IAAI,GAAG,UAAU,CAAC,EAAE,WAAW,IAAI,GAAG,SAAS,CAAC,CAAC;QAC1H;IACF;IAEA,MAAM,oBAAoB;QACxB,yCAAyC;QACzC;QACA,iDAAiD;QACjD,oBAAoB,CAAA,OAAQ,OAAO;QACnC,qDAAqD;QACrD,UAAU,yBAAyB;YACjC,SAAS,CAAA,OAAQ,OAAO;YACxB,qBAAqB;YACrB,mBAAmB;gBAAE,OAAO;YAAoB;YAChD,aAAa;QACf;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,QAAQ,GAAG;YACb,qBAAqB;YACrB,MAAM,YAAa,QAAQ;YAC3B,SAAS;YAET,qEAAqE;YACrE,IAAI,cAAc,KAAK,cAAc,GAAG;gBACtC,uDAAuD;gBACvD,aAAa;gBACb,gBAAgB;gBAChB,oBAAoB,EAAE;gBACtB,eAAe,CAAC;gBAChB,kBAAkB;gBAClB,gBAAgB;gBAChB,4EAA4E;gBAC5E,WAAW;oBACT,eAAe;oBACf,qBAAqB;gBACvB,GAAG;YACL,OAAO,IAAI,cAAc,GAAG;gBAC1B,2CAA2C;gBAC3C,aAAa;gBACb,gBAAgB;gBAChB,gBAAgB;gBAChB,cAAc,EAAE;gBAChB,eAAe;oBAAE,MAAM;oBAAO,MAAM;oBAAO,MAAM;oBAAO,OAAO;oBAAO,MAAM;gBAAM;gBAClF,sBAAsB,CAAC;gBACvB,qBAAqB;gBACrB,MAAM,WAAW;gBACjB,cAAc;oBAAC;wBAAE,MAAM;wBAAO,MAAM;oBAAS;iBAAE;gBAC/C,UAAU;gBACV;YACF,OAAO,IAAI,cAAc,GAAG;gBAC1B,6CAA6C;gBAC7C,aAAa;gBACb,gBAAgB;gBAChB,gBAAgB;gBAChB,eAAe;oBAAE,MAAM;oBAAO,MAAM;oBAAO,MAAM;oBAAO,MAAM;oBAAO,OAAO;gBAAM;gBAClF,sBAAsB,CAAC;gBACvB,eAAe;gBACf,qBAAqB;gBACrB,yBAAyB;gBACzB,oBAAoB;gBACpB,kBAAkB,EAAE;gBACpB,UAAU;gBACV;YACF;QACF,OAAO;YACL,6CAA6C;YAC7C,SAAS;YACT,aAAa;YACb,oBAAoB,EAAE;YACtB,eAAe,CAAC;YAChB,cAAc,EAAE;YAChB,eAAe;gBAAE,MAAM;gBAAO,MAAM;gBAAO,MAAM;gBAAO,OAAO;gBAAO,MAAM;YAAM;YAClF,oBAAoB;YACpB,kBAAkB,EAAE;YACpB,kBAAkB;YAClB,gBAAgB;YAChB,eAAe;YACf,iBAAiB;YACjB,WAAW,CAAC;YACZ,kBAAkB;QACpB;IACF;IAEA,sDAAsD;IACtD,MAAM,aAAa,CAAC,EAAE,YAAY,EAAE,EAAE,OAAO,EAAE,EAAyC,iBACtF,8OAAC;YACC,KAAI;YACJ,KAAI;YACJ,OAAO;YACP,QAAQ;YACR,WAAW,CAAC,aAAa,EAAE,WAAW;YACtC,OAAO;gBACL,OAAO;gBACP,QAAQ;gBACR,QAAQ;YACV;;;;;;IAIJ,qBACE,8OAAC;kDAAc;;0BAEb,8OAAC;gBAEC,OAAO;oBAAE,iBAAiB,CAAC,eAAe,CAAC;gBAAC;0DADlC;;;;;;0BAKZ,8OAAC;0DAAc;;;;;;0BAGf,8OAAC;0DAAc;;;;;;0BAGf,8OAAC;0DAAc;;;;;;YAGd,mCACC,8OAAC;0DAAc;0BACZ,cAAc,GAAG,CAAC,CAAC,qBAClB,8OAAC;wBAGC,OAAO;4BACL,QAAQ,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC;4BACrB,QAAQ,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC;4BACrB,OAAO,KAAK,KAAK;4BACjB,gBAAgB,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC;wBAClC;kEANU;kCAQV,cAAA,8OAAC;sEAAc;;8CACb,8OAAC;oCAAW,MAAM;oCAAI,WAAU;;;;;;8CAChC,8OAAC;8EAAc;;;;;;;;;;;;uBAXZ,KAAK,EAAE;;;;;;;;;;0BAmBpB,8OAAC;0DAAc;;kCACb,8OAAC;kEAAc;;0CACb,8OAAC;0EAAc;0CACb,cAAA,8OAAC;8EAAe;;wCAA6C;wCAAc;wCAAM;;;;;;;;;;;;4BAElF,8BACC,8OAAC;gCACC,SAAS;0EACC;0CAEV,cAAA,8OAAC;8EAAe;8CAAoC,eAAe,OAAO;;;;;;;;;;;0CAI9E,8OAAC;0EAAc;;kDACb,8OAAC;kFAAe;kDAAsB,mIAAY,CAAC,iBAAiB,CAAC,IAAI;;;;;;kDACzE,8OAAC;kFAAe;kDAA8C,mIAAY,CAAC,iBAAiB,CAAC,SAAS;;;;;;;;;;;;;;;;;;kCAG1G,8OAAC;kEAAc;;0CACb,8OAAC;0EAAc;;kDACb,8OAAC;wCAAW,MAAM;;;;;;;kDAClB,8OAAC;kFAAe;kDAA8C;;;;;;;;;;;;0CAGhE,8OAAC;gCACC,SAAS,IAAM,MAAM;0EACX;0CAEV,cAAA,8OAAC;8EAAe;8CAAmC;;;;;;;;;;;0CAGrD,8OAAC;gCACC,SAAS;oCAAQ,IAAG,QAAQ,uCAAuC,OAAO,QAAQ,CAAC,IAAI,GAAG;gCAAK;0EACrF;0CAEV,cAAA,8OAAC;8EAAe;8CAAmC;;;;;;;;;;;;;;;;;;;;;;;YAMxD,gBAAgB,CAAC,cAAc,WAAW,cAAc,SAAS,mBAChE,8OAAC;gBAIC,OAAO;oBACL,MAAM,GAAG,QAAQ,EAAE,CAAC;oBACpB,WAAW;oBACX,SAAS;gBACX;0DAPW,CAAC,2DAA2D,EACrE,YAAY,KAAK,mCACjB;0BAOF,cAAA,8OAAC;8DAAc;;sCACb,8OAAC;4BACC,KAAK,YAAY,4BAA4B;4BAC7C,KAAI;4BAKJ,OAAO;gCAAE,QAAQ;4BAA4B;uEAJlC;gCACT;gCACA,YAAY,iBAAiB;6BAC9B,CAAC,IAAI,CAAC;;;;;;sCAKT,8OAAC;sEAAc;sCACb,cAAA,8OAAC;0EAAe;0CAA+H;;;;;;;;;;;;;;;;;;;;;;YAStJ,cAAc,WAAW,gCACxB,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DACY,CAAC,4KAA4K,EACtL,iBAAiB,8BAA8B,2BAC/C;;sCAEF,8OAAC;sEAAY;;gCAAwD;gCAAO;gCAAM;;;;;;;sCAClF,8OAAC;4BAAoE,OAAO;gCAAE,YAAY;4BAAuC;sEAAnH;sCAAsH;;;;;;sCAGpI,8OAAC;sEAAY;;gCAA2D;8CAC/B,8OAAC;;;;;;;gCAAK;;;;;;;sCAG/C,8OAAC;4BACC,SAAS;4BACT,UAAU,CAAC;4BAMX,OAAO;gCAAE,YAAY;4BAAuC;sEALjD,CAAC,4DAA4D,EACtE,aACI,8DACA,6CACJ;sCAEH;;;;;;;;;;;;;;;;;YAQN,cAAc,2BACb,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DAAY;8BAAoD;;;;;;;;;;;YAKpE,cAAc,aAAa,8BAC1B,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DAAc;8BACb,cAAA,8OAAC;kEAAc;;4BAGd,CAAC,UAAU,KAAK,UAAU,KAAK,UAAU,CAAC,KAAK,oCAC9C,8OAAC;0EAAc;;kDACb,8OAAC;kFAAc;;0DACb,8OAAC;gDACC,KAAI;gDACJ,KAAI;0FACO,CAAC,0GAA0G,EAAE,gBAAgB,wEAAwE,IAAI;;;;;;0DAEtN,8OAAC;0FAAc;;kEACb,8OAAC;kGAAY;kEAA+D;;;;;;oDAE3E,+BACC,8OAAC;kGAAY;kEAAmD,mBAAmB,QAAQ;;;;;6EAE3F,8OAAC;kGAAc;;0EACb,8OAAC;0GAAY;0EAAuD;;;;;;0EACpE,8OAAC;0GAAY;0EAAyC;;;;;;0EAGtD,8OAAC;0GAAc;;kFACb,8OAAC;wEACC,SAAS;kHACC;;0FAEV,8OAAC;;0FAAK;;;;;;0FACN,8OAAC;0HAAe;0FAA4B;;;;;;;;;;;;kFAE9C,8OAAC;wEACC,SAAS;wEACT,UAAU,QAAQ;kHACP,CAAC,mHAAmH,EAC7H,SAAS,KACL,4EACA,qEACJ;;0FAEF,8OAAC;;0FAAK;;;;;;0FACN,8OAAC;0HAAe;;kGACd,8OAAC;wFAAW,MAAM;;;;;;;kGAClB,8OAAC;;kGAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kDAUpB,8OAAC;kFAAY;kDAA6C;;;;;;kDAG1D,8OAAC;kFAAc;;0DAEb,8OAAC;0FAAc;0DACZ,iBAAiB,MAAM,GAAG,IACzB,iBAAiB,GAAG,CAAC,CAAC,MAAM,kBAC1B,8OAAC;wDAEC,SAAS,IAAM,gBAAgB;kGACrB;;4DAET,KAAK,IAAI;4DAAC;4DAAE,KAAK,IAAI;4DAAC;4DAAE,KAAK,IAAI,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,CAAC,CAAC;4DAAC;4DAAE,KAAK,KAAK,IAAI,CAAC,EAAE,EAAE,KAAK,KAAK,EAAE;4DAAC;;uDAJpF;;;;8EAQT,8OAAC;8FAAY;8DAA4B;;;;;;;;;;;0DAK7C,8OAAC;0FAAc;;kEACb,8OAAC;kGAAc;;0EACb,8OAAC;0GAAgB,CAAC,qBAAqB,EAAE,YAAY,IAAI,GAAG,iBAAiB,gBAAgB;;;;;;0EAC7F,8OAAC;0GAAe;0EAA4B;;;;;;;;;;;;kEAE9C,8OAAC;kGAAc;;0EACb,8OAAC;0GAAgB,CAAC,qBAAqB,EAAE,YAAY,IAAI,GAAG,iBAAiB,gBAAgB;;;;;;0EAC7F,8OAAC;0GAAe;0EAA4B;;;;;;;;;;;;kEAE9C,8OAAC;kGAAc;;0EACb,8OAAC;0GAAgB,CAAC,qBAAqB,EAAE,YAAY,IAAI,GAAG,iBAAiB,gBAAgB;;;;;;0EAC7F,8OAAC;0GAAe;0EAA4B;;;;;;;;;;;;kEAE9C,8OAAC;kGAAc;;0EACb,8OAAC;0GAAgB,CAAC,qBAAqB,EAAE,YAAY,KAAK,GAAG,iBAAiB,gBAAgB;;;;;;0EAC9F,8OAAC;0GAAe;0EAA4B;;;;;;;;;;;;;;;;;;0DAKhD,8OAAC;0FAAc;;kEAEb,8OAAC;kGAAc;;0EACb,8OAAC;0GAAY;0EAAuE;;;;;;0EACpF,8OAAC;0GAAc;0EACZ;oEAAC;oEAAa;oEAAS;oEAAc;oEAAc;oEAAa;oEAAS;iEAAW,CAAC,GAAG,CAAC,CAAC,qBACzF,8OAAC;wEAEC,SAAS,IAAM,eAAe;gFAAC,GAAG,WAAW;gFAAE;4EAAI;kHACxC,CAAC,sDAAsD,EAChE,YAAY,IAAI,KAAK,OACjB,4BACA,wDACJ;kFAED;uEARI;;;;;;;;;;;;;;;;kEAeb,8OAAC;kGAAc;;0EACb,8OAAC;0GAAY;0EAAuE;;;;;;0EACpF,8OAAC;0GAAc;0EACZ;oEAAC;oEAAS;oEAAU;iEAAQ,CAAC,GAAG,CAAC,CAAC,qBACjC,8OAAC;wEAEC,SAAS,IAAM,eAAe;gFAAC,GAAG,WAAW;gFAAE;4EAAI;kHACxC,CAAC,sDAAsD,EAChE,YAAY,IAAI,KAAK,OACjB,4BACA,wDACJ;kFAED;uEARI;;;;;;;;;;;;;;;;kEAeb,8OAAC;kGAAc;;0EACb,8OAAC;0GAAY;0EAAuE;;;;;;0EACpF,8OAAC;0GAAc;0EACZ;oEAAC;oEAAQ;oEAAS;oEAAe;oEAAO;oEAAU;iEAAS,CAAC,GAAG,CAAC,CAAC,qBAChE,8OAAC;wEAEC,SAAS,IAAM,eAAe;gFAAC,GAAG,WAAW;gFAAE,MAAM,SAAS,SAAS,YAAY;4EAAI;kHAC5E,CAAC,sDAAsD,EAChE,AAAC,YAAY,IAAI,KAAK,QAAS,CAAC,YAAY,IAAI,IAAI,SAAS,SACzD,4BACA,wDACJ;kFAED;uEARI;;;;;;;;;;;;;;;;kEAeb,8OAAC;kGAAc;;0EACb,8OAAC;0GAAY;0EAAuE;;;;;;0EACpF,8OAAC;0GAAc;0EACZ;oEAAC;oEAAQ;oEAAW;oEAAW;iEAAW,CAAC,GAAG,CAAC,CAAC,sBAC/C,8OAAC;wEAEC,SAAS,IAAM,eAAe;gFAAC,GAAG,WAAW;gFAAE,OAAO,UAAU,SAAS,YAAY;4EAAK;kHAC/E,CAAC,sDAAsD,EAChE,AAAC,YAAY,KAAK,KAAK,SAAU,CAAC,YAAY,KAAK,IAAI,UAAU,SAC7D,4BACA,wDACJ;kFAED;uEARI;;;;;;;;;;;;;;;;;;;;;;4CAgBd,CAAC,YAAY,IAAI,IAAI,YAAY,IAAI,mBACpC,8OAAC;0FAAc;0DACb,cAAA,8OAAC;8FAAY;;wDAAyB;sEAC1B,8OAAC;sGAAe;;gEACvB,YAAY,IAAI,IAAI;gEAAM;gEAAE,YAAY,IAAI,IAAI;gEAChD,YAAY,IAAI,IAAI,CAAC,EAAE,EAAE,YAAY,IAAI,CAAC,CAAC,CAAC;gEAC5C,YAAY,KAAK,IAAI,CAAC,GAAG,EAAE,YAAY,KAAK,EAAE;;;;;;;;;;;;;;;;;;0DAOvD,8OAAC;0FAAc;0DACb,cAAA,8OAAC;8FAAc;;sEACb,8OAAC;4DACC,SAAS;4DACT,UAAU,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,iBAAiB,MAAM,IAAI,mBAAmB,SAAS;sGACjG;sEACX;;;;;;sEAGD,8OAAC;4DACC,SAAS;4DACT,UAAU,iBAAiB,MAAM,KAAK,mBAAmB,SAAS;sGACxD;sEACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4BAUV,UAAU,mBACT,8OAAC;0EAAc;;kDACb,8OAAC;kFAAc;;0DACb,8OAAC;gDAAI,KAAI;gDAAyB,KAAI;0FAAsB;;;;;;0DAC5D,8OAAC;;;kEACC,8OAAC;kGAAY;kEAA+C;;;;;;kEAC5D,8OAAC;kGAAY;kEAA0B;;;;;;;;;;;;;;;;;;kDAI3C,8OAAC;kFAAc;kDACZ,WAAW,GAAG,CAAC,CAAC,KAAK,kBACpB,8OAAC;0FAAuB,CAAC,KAAK,EAAE,IAAI,IAAI,KAAK,WAAW,gBAAgB,iBAAiB;;oDACtF,IAAI,IAAI,KAAK,uBACZ,8OAAC;wDAAI,KAAI;wDAAyB,KAAI;kGAAsB;;;;;;kEAE9D,8OAAC;kGAAgB,CAAC,sDAAsD,EACtE,IAAI,IAAI,KAAK,WAAW,6BAA6B,kCACrD;kEACC,IAAI,IAAI;;;;;;;+CAPH;;;;;;;;;;kDAad,8OAAC;kFAAc;kDACZ;4CAAC;gDAAC,KAAK;gDAAQ,OAAO;4CAAQ;4CAAG;gDAAC,KAAK;gDAAQ,OAAO;4CAAS;4CAAG;gDAAC,KAAK;gDAAQ,OAAO;4CAAS;4CAAG;gDAAC,KAAK;gDAAQ,OAAO;4CAAS;yCAAE,CAAC,GAAG,CAAC,CAAC,EAAC,GAAG,EAAE,KAAK,EAAC,iBACpJ,8OAAC;0FAA0B,CAAC,6CAA6C,EAAE,WAAW,CAAC,IAAgC,GAAG,8DAA8D,qCAAqC;;oDAC1N;oDAAM;oDAAE,WAAW,CAAC,IAAgC,IAAI;;+CADhD;;;;;;;;;;oCAOd,kCACC,8OAAC;kFAAc;;0DACb,8OAAC;gDACC,SAAS;oDACP,qBAAqB;oDACrB,eAAe;wDAAE,MAAM;wDAAO,MAAM;wDAAO,MAAM;wDAAO,OAAO;wDAAO,MAAM;oDAAM;oDAClF,sBAAsB,CAAC;oDACvB,MAAM,WAAW;oDACjB,cAAc,CAAA,OAAQ;+DAAI;4DAAM;gEAAE,MAAM;gEAAO,MAAM;4DAAS;yDAAE;oDAChE,UAAU;gDACZ;0FACU;0DACX;;;;;;0DAGD,8OAAC;gDACC,SAAS;oDACP,MAAM,WAAW;oDACjB,cAAc,CAAA,OAAQ;+DAAI;4DAAM;gEAAE,MAAM;gEAAO,MAAM;4DAAS;yDAAE;oDAChE,wBAAwB;oDACxB,IAAI,UAAU;wDACZ,SAAS,KAAK;wDACd,gBAAgB;oDAClB;oDACA,UAAU,yBAAyB;wDACjC,SAAS,CAAA,OAAQ,OAAO;wDACxB,qBAAqB;wDACrB,mBAAmB;4DAAE,OAAO;wDAAc;wDAC1C,aAAa;oDACf;gDACF;0FACU;0DACX;;;;;;;;;;;6DAKH,8OAAC;kFAAc;;0DACb,8OAAC;gDACC,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;gDACvC,aAAY;0FACF;;;;;;0DAEZ,8OAAC;gDAAO,SAAS;0FAA8B;0DAAsF;;;;;;;;;;;;kDAOzI,8OAAC;kFAAc;;0DACb,8OAAC;0FAAY;0DAAiC;;;;;;0DAC9C,8OAAC;gDACC,SAAS;oDACP,mCAAmC;oDACnC,SAAS;oDACT,aAAa;oDACb,gBAAgB;oDAChB,oBAAoB;oDACpB,qBAAqB;oDACrB,qBAAqB;gDACvB;0FACU;0DACX;;;;;;;;;;;;;;;;;;4BAQN,UAAU,mBACT,8OAAC;0EAAc;;kDACb,8OAAC;wCAAI,KAAI;wCAAyB,KAAI;kFAAsB;;;;;;oCAE3D,CAAC,kCACA;;0DACE,8OAAC;0FAAY;0DAA0C;;;;;;0DAEvD,8OAAC;gDACC,SAAS;gDACT,UAAU;0FACC,CAAC,gFAAgF,EAC1F,kBAAkB,+CAA+C,4GACjE;0DAED,kBAAkB,OAAO;;;;;;4CAG3B,kCACC,8OAAC;0FAAc;;kEACb,8OAAC;kGAAY;kEAAmC;;;;;;kEAChD,8OAAC;kGAAY;;4DAAsB;4DAAE;4DAAiB;;;;;;;;;;;;;4CAIzD,yBAAyB,CAAC,mCACzB,8OAAC;0FAAc;;kEACb,8OAAC;kGAAY;;4DAA+B;4DAAI;;;;;;;kEAChD,8OAAC;kGAAY;kEAAmC;;;;;;;;;;;;;qEAKtD;kDAEE,cAAA,8OAAC;sFAAc;;8DACb,8OAAC;8FAAc;8DACb,cAAA,8OAAC;kGAAY;kEAAuB;;;;;;;;;;;8DAGtC,8OAAC;8FAAc;;sEACb,8OAAC;4DACC,SAAS;gEACP,qBAAqB;gEACrB,eAAe;oEAAE,MAAM;oEAAO,MAAM;oEAAO,MAAM;oEAAO,MAAM;oEAAO,OAAO;gEAAM;gEAClF,sBAAsB,CAAC;gEACvB,oBAAoB;gEACpB,yBAAyB;4DAC3B;sGACU;sEACX;;;;;;sEAGD,8OAAC;4DACC,SAAS;sGACC;sEACX;;;;;;;;;;;;;;;;;;;kDAST,8OAAC;kFAAc;;0DACb,8OAAC;0FAAY;0DAAiC;;;;;;0DAC9C,8OAAC;gDACC,SAAS;oDACP,mCAAmC;oDACnC;oDACA,mBAAmB;wDAAE,OAAO;oDAAoB;oDAChD,aAAa;gDACf;0FACU;0DACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAYZ,cAAc,4BACb,8OAAC;0DAAc;0BAEb,cAAA,8OAAC;8DAAc;;sCAGb,8OAAC;4BACC,KAAK,UAAU,IAAI,YAAY,CAAC,YAAY,EAAE,MAAM,IAAI,CAAC;4BACzD,KAAI;sEACM;;;;;;sCAIZ,8OAAC;sEAAc;;8CAGb,8OAAC;8EAAc;;;;;;8CAGf,8OAAC;8EAAc;;sDACb,8OAAC;sFAAc;sDACb,cAAA,8OAAC;0FAAe;;oDAA+D;oDAAc;oDAAM;;;;;;;;;;;;sDAErG,8OAAC;sFAAc;;8DAEb,8OAAC;8FAAc;;sEACb,8OAAC;4DAAW,MAAM;sGAAc;;;;;;sEAChC,8OAAC;sGAAe;sEAA8C;;;;;;;;;;;;8DAGhE,8OAAC;oDACC,SAAS,IAAM,MAAM;8FACX;8DAEV,cAAA,8OAAC;kGAAe;kEAAmC;;;;;;;;;;;8DAGrD,8OAAC;oDACC,SAAS;wDAAQ,IAAG,QAAQ,uCAAuC,OAAO,QAAQ,CAAC,IAAI,GAAG;oDAAK;8FACrF;8DAEV,cAAA,8OAAC;kGAAe;kEAAmC;;;;;;;;;;;;;;;;;;;;;;;8CAMzD,8OAAC;8EAAc;;sDACb,8OAAC;sFAAc;;;;;;sDACf,8OAAC;sFAAe;sDACb,UAAU,kBACP;;kEACE,8OAAC;kGAAe;;4DAAY;4DAAwB;4DAAiB;;;;;;;kEACrE,8OAAC;kGAAe;;4DAAmB;4DAAwB;4DAAiB;;;;;;;;+DAE9E,CAAC,OAAO,EAAE,UAAU,IAAI,KAAK,UAAU,IAAI,KAAK,UAAU,IAAI,KAAK,UAAU,IAAI,KAAK,IAAI,kBAAkB,CAAC;;;;;;;;;;;;gCAMpH,mCACC,8OAAC;8EAAc;8CACZ,cAAc,GAAG,CAAC,CAAC,qBAClB,8OAAC;4CAGC,OAAO;gDACL,QAAQ,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC;gDACrB,QAAQ,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC;gDACrB,OAAO,KAAK,KAAK;gDACjB,gBAAgB,GAAG,KAAK,KAAK,CAAC,CAAC,CAAC;4CAClC;sFANU;sDAQV,cAAA,8OAAC;0FAAc;;kEACb,8OAAC;wDAAW,MAAM;wDAAI,WAAU;;;;;;kEAChC,8OAAC;kGAAc;;;;;;;;;;;;2CAXZ,KAAK,EAAE;;;;;;;;;;8CAmBpB,8OAAC;8EAAc;8CACb,cAAA,8OAAC;kFAAc;;0DACb,8OAAC;gDAAW,MAAM;0FAAc;;;;;;0DAChC,8OAAC;0FAAe;;oDAAoD;oDAAE,UAAU,IAAI,KAAK,UAAU,IAAI,KAAK,UAAU,IAAI,KAAK,UAAU,IAAI,KAAK;;;;;;;;;;;;;;;;;;8CAKtJ,8OAAC;8EAAe,CAAC,wFAAwF,EACvG,UAAU,IAAI,+BAA+B,8BAC7C;;sDACA,8OAAC;4CAAmH,OAAO;gDAAE,YAAY;4CAAuC;sFAAlK;sDACX,gBAAgB,KAAK;;;;;;wCAEvB,UAAU,kBACT,8OAAC;4CAA4G,OAAO;gDAAE,YAAY;4CAAuC;sFAA5J;sDAA+J;;;;;mDAI5K,gBAAgB,QAAQ,kBACtB,8OAAC;4CAA4G,OAAO;gDAAE,YAAY;4CAAuC;sFAA5J;sDACV,gBAAgB,QAAQ;;;;;;;;;;;;8CAOjC,8OAAC;8EAAe,CAAC,0DAA0D,EACzE,UAAU,IACN,6DACA,UAAU,KAAK,UAAU,IACzB,wFACA,8GACJ;;wCAEC,CAAC,UAAU,KAAK,UAAU,CAAC,mBAC1B;;8DACE,8OAAC;oDACC,SAAS,IAAM,gBAAgB;oDAE/B,OAAO;wDAAE,YAAY;oDAAuC;8FADlD;8DAEX;;;;;;8DAGD,8OAAC;oDACC,SAAS;oDAET,OAAO;wDAAE,YAAY;oDAAuC;8FADlD;8DAEX;;;;;;;;wCAOJ,UAAU,mBACT;;8DACE,8OAAC;oDACC,SAAS,IAAM,kBAAkB;oDAEjC,OAAO;wDAAE,YAAY;oDAAuC;8FADlD;;wDAEX;wDACO;wDAAiB;;;;;;;8DAEzB,8OAAC;8FAAc;;sEACb,8OAAC;4DACC,SAAS,IAAM,gBAAgB;4DAE/B,OAAO;gEAAE,YAAY;4DAAuC;sGADlD;sEAEX;;;;;;sEAGD,8OAAC;4DACC,SAAS;4DAET,OAAO;gEAAE,YAAY;4DAAuC;sGADlD;sEAEX;;;;;;;;;;;;;;wCAQN,QAAQ,mBACP,8OAAC;4CACC,SAAS;4CAET,OAAO;gDAAE,YAAY;4CAAuC;sFADlD;sDAEX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAuFZ,0BACC,8OAAC;gBAAoF,SAAS,IAAM,YAAY;0DAAjG;0BACb,cAAA,8OAAC;oBAEC,SAAS,CAAA,IAAK,EAAE,eAAe;oBAC/B,OAAO;wBACL,iBAAiB;wBACjB,WAAW;oBACb;8DALU;;sCAOV,8OAAC;4BAAgE,OAAO;gCAAE,YAAY;gCAAkB,YAAY;4BAA8B;sEAApI;sCAAuI;;;;;;sCAGrJ,8OAAC;sEAAc;sCACZ,UAAU,GAAG,CAAC,CAAC,MAAM,kBACpB,8OAAC;8EAAsB;;sDACrB,8OAAC;;;8DACC,8OAAC;oDAA8C,OAAO;wDAAE,YAAY;oDAAiB;8FAAxE;8DAA4E,KAAK,IAAI;;;;;;8DAClG,8OAAC;8FAAY;8DAAgC,KAAK,IAAI;;;;;;;;;;;;sDAExD,8OAAC;sFAAc;sDAAwB;;;;;;;mCAL/B;;;;;;;;;;sCASd,8OAAC;4BACC,SAAS,IAAM,YAAY;sEACjB;sCACX;;;;;;;;;;;;;;;;;YAQN,8BACC,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DAAc;;sCACb,8OAAC;sEAAc;;8CACb,8OAAC;oCAAmD,OAAO;wCAAE,YAAY;oCAAuC;8EAAlG;8CAAqG;;;;;;8CACnH,8OAAC;8EAAc;;sDACb,8OAAC;4CAAW,MAAM;;;;;;;sDAClB,8OAAC;sFAAe;sDAAqC;;;;;;;;;;;;;;;;;;sCAIzD,8OAAC;sEAAc;sCACZ,YAAY,GAAG,CAAC,CAAC;gCAChB,MAAM,QAAQ,eAAe,QAAQ,CAAC,KAAK,EAAE;gCAC7C,MAAM,YAAY,SAAS,KAAK,KAAK;gCACrC,qBACE,8OAAC;oCAKC,SAAS;wCACP,IAAI,OAAO;4CACT,gCAAgC;4CAChC,mBAAmB;4CACnB,kBAAkB;wCACpB,OAAO,IAAI,WAAW;4CACpB,6BAA6B;4CAC7B,gBAAgB;4CAChB,uBAAuB;wCACzB,OAAO;4CACL,gBAAgB;wCAClB;oCACF;8EAfW,CAAC,4DAA4D,EACtE,QAAQ,oDAAoD,YAAY,2EAA2E,8BACnJ;;sDAeF,8OAAC;sFAAc;;8DACb,8OAAC;oDAAI,KAAK,KAAK,KAAK;oDAAE,KAAK,KAAK,IAAI;8FAAY;;;;;;gDAC/C,uBACC,8OAAC;8FAAc;8DAA0F;;;;;;;;;;;;sDAK7G,8OAAC;sFAAc;;8DACb,8OAAC;oDAA6C,OAAO;wDAAE,YAAY;oDAAuC;8FAA7F;8DAAiG,KAAK,IAAI;;;;;;8DACvH,8OAAC;8FAAc;8DACZ,sBACC,8OAAC;kGAAe;kEAAyB;;;;;6EAEzC;;0EACE,8OAAC;gEAAW,MAAM;;;;;;0EAClB,8OAAC;0GAAgB,CAAC,UAAU,EAAE,YAAY,oBAAoB,gBAAgB;0EAAG,KAAK,KAAK;;;;;;;;;;;;;;;;;;;;mCAlC9F,KAAK,EAAE;;;;;4BAyClB;;;;;;wBAID,UAAU,kBACT;;8CAEE,8OAAC;8EAAc;;sDACb,8OAAC;4CACC,SAAS;gDACP,MAAM;4CACR;4CAEA,OAAO;gDAAE,YAAY;4CAAuC;sFADlD;sDAEX;;;;;;sDAGD,8OAAC;4CACC,SAAS;gDACP,MAAM;4CACR;4CAEA,OAAO;gDAAE,YAAY;4CAAuC;sFADlD;sDAEX;;;;;;;;;;;;8CAKH,8OAAC;oCACC,SAAS;wCACP,MAAM;oCACR;oCAEA,OAAO;wCAAE,YAAY;oCAAuC;8EADlD;8CAEX;;;;;;8CAKD,8OAAC;8EAAc;;sDACb,8OAAC;4CACC,SAAS,IAAM,gBAAgB;4CAE/B,OAAO;gDAAE,YAAY;4CAAuC;sFADlD;sDAEX;;;;;;sDAGD,8OAAC;4CACC,SAAS;gDACP,gBAAgB;gDAChB,iBAAiB;4CACnB;4CAEA,OAAO;gDAAE,YAAY;4CAAuC;sFADlD;sDAEX;;;;;;sDAGD,8OAAC;4CACC,SAAS;gDACP,gBAAgB;4CAClB;4CAEA,OAAO;gDAAE,YAAY;4CAAuC;sFADlD;sDAEX;;;;;;;;;;;;;yDAML;sCAEE,cAAA,8OAAC;0EAAc;;kDACb,8OAAC;wCACC,SAAS,IAAM,gBAAgB;wCAE/B,OAAO;4CAAE,YAAY;wCAAuC;kFADlD;kDAEX;;;;;;kDAGD,8OAAC;wCACC,SAAS;4CACP,gBAAgB;4CAChB;wCACF;wCAEA,OAAO;4CAAE,YAAY;wCAAuC;kFADlD;kDAEX;;;;;;;;;;;;;;;;;;;;;;;;YAWZ,uBAAuB,8BACtB,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DAAc;;sCACb,8OAAC;sEAAa;sCAA2C;;;;;;sCACzD,8OAAC;4BACC,KAAK,aAAa,KAAK;4BACvB,KAAK,aAAa,IAAI;sEACZ;;;;;;sCAEZ,8OAAC;sEAAY;sCAAyC,aAAa,IAAI;;;;;;sCACvE,8OAAC;sEAAc;;8CACb,8OAAC;8EAAe;8CAAgB;;;;;;8CAChC,8OAAC;oCAAW,MAAM;;;;;;;8CAClB,8OAAC;8EAAe;8CAAqC,aAAa,KAAK;;;;;;;;;;;;sCAEzE,8OAAC;sEAAc;;8CACb,8OAAC;8EAAe;8CAAgB;;;;;;8CAChC,8OAAC;oCAAW,MAAM;;;;;;;8CAClB,8OAAC;8EAAe;8CAAiC;;;;;;;;;;;;sCAEnD,8OAAC;sEAAc;;8CACb,8OAAC;oCACC,SAAS;wCACP,uBAAuB;wCACvB,gBAAgB;oCAClB;8EACU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;wCACP,mBAAmB;wCACnB,SAAS,CAAA,OAAQ,OAAO,aAAa,KAAK;wCAC1C,kBAAkB,CAAA,OAAQ;mDAAI;gDAAM,aAAa,EAAE;6CAAC;wCACpD,uBAAuB;wCACvB,4BAA4B;wCAC5B,qBAAqB;wCACrB,qBAAqB;wCACrB,gBAAgB;oCAClB;8EACU;8CACX;;;;;;;;;;;;;;;;;;;;;;;YASR,qBAAqB,mCACpB,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DAAc;;sCACb,8OAAC;sEAAc;sCAAgB;;;;;;sCAC/B,8OAAC;sEAAa;sCAAyC;;;;;;sCACvD,8OAAC;4BACC,KAAK,kBAAkB,KAAK;4BAC5B,KAAK,kBAAkB,IAAI;sEACjB;;;;;;sCAEZ,8OAAC;sEAAY;sCAA2B,kBAAkB,IAAI;;;;;;sCAC9D,8OAAC;sEAAY;sCAAsB;;;;;;sCACnC,8OAAC;sEAAY;sCAA6B;;;;;;sCAC1C,8OAAC;sEAAc;;8CACb,8OAAC;oCACC,SAAS;wCACP,qBAAqB;wCACrB,qBAAqB;wCACrB,MAAM;oCACR;8EACU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;wCACP,qBAAqB;wCACrB,qBAAqB;wCACrB,gBAAgB;wCAChB,iBAAiB;oCACnB;8EACU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;wCACP,qBAAqB;wCACrB,qBAAqB;wCACrB,MAAM;oCACR;8EACU;8CACX;;;;;;;;;;;;;;;;;;;;;;;YASR,kBAAkB,iCACjB,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DAAc;;sCACb,8OAAC;sEAAa;;gCAAyC;gCAAI,gBAAgB,IAAI;;;;;;;sCAC/E,8OAAC;4BACC,KAAK,gBAAgB,KAAK;4BAC1B,KAAK,gBAAgB,IAAI;sEACf;;;;;;sCAEZ,8OAAC;sEAAY;sCAAqB;;;;;;sCAClC,8OAAC;sEAAc;;8CACb,8OAAC;oCACC,SAAS;wCACP,kBAAkB;wCAClB,mBAAmB;wCACnB,MAAM;oCACR;8EACU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;wCACP,kBAAkB;wCAClB,mBAAmB;wCACnB,gBAAgB;wCAChB,iBAAiB;oCACnB;8EACU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;wCACP,kBAAkB;wCAClB,mBAAmB;wCACnB,MAAM;oCACR;8EACU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;wCACP,kBAAkB;wCAClB,mBAAmB;oCACrB;8EACU;8CACX;;;;;;;;;;;;;;;;;;;;;;;YASR,mCACC,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DAAc;;sCAEb,8OAAC;4BAAmE,OAAO;gCAAE,YAAY;4BAAuC;sEAAjH;;8CACb,8OAAC;;8CAAM;;;;;;8CAEP,8OAAC;8EAAe;;;;;;8CAChB,8OAAC;8EAAe;;;;;;;;;;;;sCAElB,8OAAC;4BAAwD,OAAO;gCAAE,YAAY;4BAAuC;sEAAvG;sCAA0G;;;;;;sCAGxH,8OAAC;sEAAY;sCAAgD;;;;;;sCAG7D,8OAAC;4BACC,SAAS;gCACP,qBAAqB;gCACrB;4BACF;4BAEA,OAAO;gCAAE,YAAY;4BAAuC;sEADlD;sCAEX;;;;;;sCAGD,8OAAC;4BACC,SAAS,IAAM,qBAAqB;sEAC1B;sCACX;;;;;;;;;;;;;;;;;YAQN,gCACC,8OAAC;0DAAc;0BACb,cAAA,8OAAC;8DAAc;8BACZ,CAAC,+BACA;;0CAEE,8OAAC;0EAAc;;kDACb,8OAAC;kFAAc;kDAAgB;;;;;;kDAC/B,8OAAC;wCAA+D,OAAO;4CAAE,YAAY;wCAAuC;kFAA9G;kDAAiH;;;;;;kDAG/H,8OAAC;kFAAY;;4CAAqC;0DACtC,8OAAC;0FAAe;;oDAAiC;oDAAiB;;;;;;;4CAAa;;;;;;;;;;;;;0CAK7F,8OAAC;0EAAc;;kDACb,8OAAC;wCACC,MAAK;wCACL,OAAO;wCACP,UAAU,CAAC;4CACT,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC5B,cAAc;wCAChB;wCACA,aAAY;wCAEZ,OAAO;4CAAE,YAAY;wCAAuC;kFADlD;;;;;;oCAGX,4BACC,8OAAC;kFAAY;kDAA6B;;;;;;;;;;;;0CAK9C,8OAAC;gCACC,SAAS;gCAET,OAAO;oCAAE,YAAY;gCAAuC;0EADlD;0CAEX;;;;;;0CAKD,8OAAC;0EAAY;0CAA6B;;;;;;0CAK1C,8OAAC;gCACC,SAAS,IAAM,kBAAkB;0EACvB;0CACX;;;;;;;qDAKH;kCAEE,cAAA,8OAAC;sEAAc;;8CACb,8OAAC;8EAAc;8CAAgB;;;;;;8CAC/B,8OAAC;oCAAiE,OAAO;wCAAE,YAAY;oCAAuC;8EAAhH;8CAAmH;;;;;;8CAGjI,8OAAC;8EAAY;8CAAqC;;;;;;8CAGlD,8OAAC;8EAAc;;sDACb,8OAAC;4CAAW,MAAM;;;;;;;sDAClB,8OAAC;sFAAe;;gDAAiB;gDAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAU/D,8BACC,8OAAC;gBAAsF,SAAS,IAAM,gBAAgB;0DAAvG;0BACb,cAAA,8OAAC;oBAEC,SAAS,CAAA,IAAK,EAAE,eAAe;8DADrB;;sCAGV,8OAAC;sEAAa;sCAAwD;;;;;;sCAEtE,8OAAC;sEAAc;sCACZ,YAAY,GAAG,CAAC,CAAC,uBAChB,8OAAC;oCAKC,SAAS;wCACP,4DAA4D;wCAC5D,SAAS,CAAA,OAAQ,OAAO,OAAO,KAAK;wCACpC,gBAAgB;oCAClB;8EAPW,CAAC,+EAA+E,EACzF,OAAO,IAAI,GAAG,uCAAuC,0DACrD;;wCAOD,OAAO,IAAI,kBACV,8OAAC;sFAAc;sDAA8G;;;;;;sDAI/H,8OAAC;sFAAc;;8DACb,8OAAC;;;sEACC,8OAAC;sGAAY;sEAAgC,OAAO,KAAK;;;;;;sEACzD,8OAAC;sGAAc;;8EACb,8OAAC;oEAAW,MAAM;;;;;;8EAClB,8OAAC;8GAAe;8EAAsC,OAAO,KAAK,CAAC,cAAc;;;;;;;;;;;;;;;;;;8DAGrF,8OAAC;8FAAc;8DACZ,OAAO,KAAK;;;;;;;;;;;;;mCAxBZ,OAAO,EAAE;;;;;;;;;;sCA+BpB,8OAAC;4BACC,SAAS,IAAM,gBAAgB;sEACrB;sCACX;;;;;;;;;;;;;;;;;YAQN,+BACC,8OAAC;0DAAc;;kCAEb,8OAAC;kEAAc;;0CACb,8OAAC;gCACC,SAAS,IAAM,iBAAiB;0EACtB;;kDAEV,8OAAC;kFAAe;kDAAU;;;;;;kDAC1B,8OAAC;;kDAAK;;;;;;;;;;;;0CAER,8OAAC;0EAAc;;kDACb,8OAAC;wCAAW,MAAM;;;;;;;kDAClB,8OAAC;kFAAe;kDAAqC;;;;;;;;;;;;;;;;;;kCAKzD,8OAAC;kEAAc;;0CACb,8OAAC;gCACC,SAAS,IAAM,gBAAgB;0EACpB,CAAC,8CAA8C,EACxD,iBAAiB,cACb,4BACA,+CACJ;0CACH;;;;;;0CAGD,8OAAC;gCACC,SAAS,IAAM,gBAAgB;gCAE/B,QAAQ;0EADE;;oCAEX;kDAEC,8OAAC;kFAAe;kDAA+C;;;;;;;;;;;;0CAEjE,8OAAC;gCAEC,QAAQ;0EADE;;oCAEX;kDAEC,8OAAC;kFAAe;kDAA+C;;;;;;;;;;;;;;;;;;kCAKnE,8OAAC;kEAAc;;4BACZ,iBAAiB,6BAChB,8OAAC;;;kDACC,8OAAC;kFAAa;kDAAuC;;;;;;oCAEpD,eAAe,MAAM,KAAK,kBACzB,8OAAC;kFAAc;;0DACb,8OAAC;0FAAc;0DAAgB;;;;;;0DAC/B,8OAAC;0FAAY;0DAA6B;;;;;;0DAC1C,8OAAC;gDACC,SAAS;oDACP,iBAAiB;oDACjB,gBAAgB;gDAClB;0FACU;0DACX;;;;;;;;;;;6DAKH,8OAAC;;;0DAEC,8OAAC;0FAAc;;oDACZ,eAAe,GAAG,CAAC,CAAC;wDACnB,MAAM,OAAO,YAAY,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;wDAC5C,IAAI,CAAC,MAAM,OAAO;wDAClB,MAAM,aAAa,0BAA0B;wDAC7C,qBACE,8OAAC;4DAEC,SAAS,IAAM,yBAAyB,aAAa,OAAO;sGACjD,CAAC,4FAA4F,EACtG,aACI,6DACA,sDACJ;;8EAEF,8OAAC;oEACC,KAAK,KAAK,KAAK;oEACf,KAAK,KAAK,IAAI;8GACJ;;;;;;8EAEZ,8OAAC;8GAAc;8EACb,cAAA,8OAAC;kHAAY;kFAAoC,KAAK,IAAI;;;;;;;;;;;gEAE3D,4BACC,8OAAC;8GAAc;8EACb,cAAA,8OAAC;wEAAwB,MAAK;wEAAe,SAAQ;kHAAtC;kFACb,cAAA,8OAAC;4EAAK,UAAS;4EAAU,GAAE;4EAAqH,UAAS;;;;;;;;;;;;;;;;;;2DAnB1J;;;;;oDAyBX;kEAGA,8OAAC;wDACC,SAAS;4DACP,iBAAiB;4DACjB,gBAAgB;wDAClB;kGACU;;0EAEV,8OAAC;0GAAe;0EAAgB;;;;;;0EAChC,8OAAC;0GAAe;0EAA4B;;;;;;;;;;;;;;;;;;4CAK/C,uCACC,8OAAC;0FAAc;0DACb,cAAA,8OAAC;oDACC,SAAS;wDACP,MAAM;oDACR;8FACU;8DACX;;;;;;;;;;;;;;;;;;;;;;;4BAUZ,iBAAiB,8BAChB,8OAAC;0EAAc;;kDACb,8OAAC;kFAAc;kDAAgB;;;;;;kDAC/B,8OAAC;kFAAa;kDAAuC;;;;;;kDACrD,8OAAC;kFAAY;kDAAiC;;;;;;;;;;;;;;;;;;kCASpD,8OAAC;kEAAc;;0CACb,8OAAC;gCACC,SAAS;oCACP,MAAM;gCACR;0EACU;0CACX;;;;;;0CAGD,8OAAC;gCACC,SAAS;oCACP,iBAAiB;oCACjB,MAAM;gCACR;0EACU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}}]
}